[{"id":"c9b7812d.41b5b","type":"tab","label":"workspace","disabled":false,"info":""},{"id":"59148a18.8a7b24","type":"tab","label":"mqtt","disabled":true,"info":""},{"id":"91ff2fa4.75554","type":"tab","label":"온조기","disabled":true,"info":""},{"id":"d1374567.e2bae8","type":"tab","label":"PLC","disabled":true,"info":""},{"id":"5e8d60de.683be","type":"tab","label":"atonics counter","disabled":true,"info":""},{"id":"29365c96.1284f4","type":"tab","label":"Hotrunner","disabled":true,"info":""},{"id":"85528abd.1ee708","type":"tab","label":"Foolproof","disabled":true,"info":""},{"id":"b3335886.c50e28","type":"tab","label":"hopper","disabled":true,"info":""},{"id":"d5617ede.93e9e","type":"tab","label":"0712023 iot server","disabled":true,"info":""},{"id":"1a302ef9.aa4741","type":"serial-port","z":"","serialport":"COM7","serialbaud":"9600","databits":"8","parity":"none","stopbits":"1","waitfor":"","newline":"10","bin":"bin","out":"time","addchar":"","responsetimeout":"100"},{"id":"f7d80e71.1a9be","type":"ui_group","z":"85528abd.1ee708","name":"gauge1","tab":"4547c407.e05b5c","disp":true,"width":"6","collapse":false},{"id":"90f85ca.c6978a","type":"ui_group","z":"85528abd.1ee708","name":"gaugemain2","tab":"4547c407.e05b5c","disp":true,"width":"6","collapse":false},{"id":"de449a41.489888","type":"ui_group","z":"85528abd.1ee708","name":"gaugemain3","tab":"4547c407.e05b5c","disp":true,"width":"6","collapse":false},{"id":"aab11cfc.4a20a","type":"ui_group","z":"85528abd.1ee708","name":"gaugemain4","tab":"4547c407.e05b5c","disp":true,"width":"6","collapse":false},{"id":"a2a723ad.02976","type":"ui_group","z":"85528abd.1ee708","name":"gaugemain5","tab":"4547c407.e05b5c","disp":true,"width":"6","collapse":false},{"id":"c784f59f.5e18d8","type":"ui_group","z":"85528abd.1ee708","name":"cavity","tab":"4547c407.e05b5c","disp":true,"width":"6","collapse":false},{"id":"d1800f69.7657e","type":"ui_group","z":"85528abd.1ee708","name":"chartmain1","tab":"ee743636.186478","disp":true,"width":"6","collapse":false},{"id":"8772e523.64b6d8","type":"ui_group","z":"85528abd.1ee708","name":"chartmain2","tab":"ee743636.186478","disp":true,"width":"6","collapse":false},{"id":"638f666b.97bf88","type":"ui_group","z":"85528abd.1ee708","name":"chartmain3","tab":"ee743636.186478","disp":true,"width":"6","collapse":false},{"id":"196c65fc.09bd3a","type":"ui_group","z":"85528abd.1ee708","name":"chartmain4","tab":"ee743636.186478","disp":true,"width":"6","collapse":false},{"id":"43bf7873.74cda8","type":"ui_group","z":"85528abd.1ee708","name":"chartmain5","tab":"ee743636.186478","disp":true,"width":"6","collapse":false},{"id":"98cb3184.9737b","type":"ui_group","z":"85528abd.1ee708","name":"","tab":"ee743636.186478","disp":true,"width":"6","collapse":false},{"id":"53519f10.f8255","type":"ui_tab","z":"85528abd.1ee708","name":"tab1","icon":"dashboard","disabled":false,"hidden":false},{"id":"223211d4.2f831e","type":"ui_tab","z":"85528abd.1ee708","name":"tab2","icon":"dashboard","disabled":false,"hidden":false},{"id":"eae34b37.171748","type":"ui_group","z":"","name":"gauge1","tab":"fc1da096.51dce","order":1,"disp":false,"width":"6","collapse":false},{"id":"789dd9f.aa3c728","type":"ui_group","z":"","name":"cavity","tab":"fc1da096.51dce","order":11,"disp":true,"width":"6","collapse":false},{"id":"ac9d0284.43283","type":"ui_group","z":"","name":"chartmain1","tab":"24e08e9.9149572","disp":true,"width":"6","collapse":false},{"id":"81b20455.cb6bc8","type":"ui_group","z":"","name":"chartmain2","tab":"24e08e9.9149572","disp":true,"width":"6","collapse":false},{"id":"4bcba4ce.7d9dac","type":"ui_group","z":"","name":"chartmain3","tab":"24e08e9.9149572","disp":true,"width":"6","collapse":false},{"id":"ad98a6d0.152e48","type":"ui_group","z":"","name":"chartmain4","tab":"24e08e9.9149572","disp":true,"width":"6","collapse":false},{"id":"fa89f239.ba7c8","type":"ui_group","z":"","name":"chartmain5","tab":"24e08e9.9149572","disp":true,"width":"6","collapse":false},{"id":"f9e7f15d.f3344","type":"ui_group","z":"","name":"","tab":"24e08e9.9149572","disp":true,"width":"6","collapse":false},{"id":"56410aab.07cf74","type":"ui_group","z":"","name":"gaugemain2","tab":"fc1da096.51dce","order":2,"disp":true,"width":"6","collapse":false},{"id":"1e6fc764.7466d9","type":"ui_group","z":"","name":"gaugemain3","tab":"fc1da096.51dce","order":3,"disp":true,"width":"6","collapse":false},{"id":"7c31c468.c2299c","type":"ui_group","z":"","name":"gaugemain4","tab":"fc1da096.51dce","order":4,"disp":true,"width":"6","collapse":false},{"id":"3fc002bb.fca0fe","type":"ui_group","z":"","name":"gaugemain5","tab":"fc1da096.51dce","order":5,"disp":true,"width":"6","collapse":false},{"id":"e2bbf342.b16cd","type":"ui_group","z":"","name":"gaugemain6","tab":"fc1da096.51dce","order":6,"disp":true,"width":"6","collapse":false},{"id":"bd1f1ac1.0bec58","type":"ui_group","z":"","name":"gaugemain7","tab":"fc1da096.51dce","order":7,"disp":true,"width":"6","collapse":false},{"id":"ce652b23.b57588","type":"ui_group","z":"","name":"gaugemain8","tab":"fc1da096.51dce","order":8,"disp":true,"width":"6","collapse":false},{"id":"3d215e9d.798c82","type":"ui_group","z":"","name":"gaugemain9","tab":"fc1da096.51dce","order":9,"disp":true,"width":"6","collapse":false},{"id":"8a1a58f3.328f68","type":"ui_group","z":"","name":"gaugemain10","tab":"fc1da096.51dce","order":10,"disp":true,"width":"6","collapse":false},{"id":"fc1da096.51dce","type":"ui_tab","z":"","name":"tab1","icon":"dashboard","disabled":false,"hidden":false},{"id":"24e08e9.9149572","type":"ui_tab","z":"","name":"tab2","icon":"dashboard","disabled":false,"hidden":false},{"id":"5434b555.7a8f4c","type":"mqtt-broker","z":"","name":"","broker":"e7217.synology.me","port":"1884","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"13ab0c8c.8f8923","type":"ui_base","theme":{"name":"theme-light","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#097479","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":false},"customTheme":{"name":"Untitled Theme 1","default":"#4B7930","baseColor":"#4B7930","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"},"themeState":{"base-color":{"default":"#0094CE","value":"#0094CE","edited":false},"page-titlebar-backgroundColor":{"value":"#0094CE","edited":false},"page-backgroundColor":{"value":"#fafafa","edited":false},"page-sidebar-backgroundColor":{"value":"#ffffff","edited":false},"group-textColor":{"value":"#1bbfff","edited":false},"group-borderColor":{"value":"#ffffff","edited":false},"group-backgroundColor":{"value":"#ffffff","edited":false},"widget-textColor":{"value":"#111111","edited":false},"widget-backgroundColor":{"value":"#0094ce","edited":false},"widget-borderColor":{"value":"#ffffff","edited":false},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey"}},"site":{"name":"Node-RED Dashboard","hideToolbar":"false","allowSwipe":"false","lockMenu":"false","allowTempTheme":"true","dateFormat":"DD/MM/YYYY","sizes":{"sx":48,"sy":48,"gx":6,"gy":6,"cx":6,"cy":6,"px":0,"py":0}}},{"id":"15e03d85.cf2df2","type":"ui_group","z":"","name":"zone2","tab":"8a42782c.a63e58","order":2,"disp":true,"width":10,"collapse":false},{"id":"a475e1da.9665d","type":"ui_group","z":"","name":"zone3","tab":"8a42782c.a63e58","order":3,"disp":true,"width":10,"collapse":false},{"id":"32d7fd07.521b72","type":"ui_group","z":"","name":"zone4","tab":"8a42782c.a63e58","order":4,"disp":true,"width":10,"collapse":false},{"id":"91d99c0f.65bd7","type":"ui_group","z":"","name":"zone5","tab":"8a42782c.a63e58","order":5,"disp":true,"width":10,"collapse":false},{"id":"4fecdbda.75ea04","type":"ui_group","z":"","name":"zone6","tab":"8a42782c.a63e58","order":6,"disp":true,"width":10,"collapse":false},{"id":"b9a364cf.72f4b8","type":"ui_group","z":"","name":"zone1","tab":"8a42782c.a63e58","order":1,"disp":true,"width":10,"collapse":false},{"id":"e8ab483d.e06cf8","type":"ui_group","z":"","name":"zone7","tab":"8a42782c.a63e58","disp":true,"width":"6","collapse":false},{"id":"74f13e4c.7d82c","type":"ui_group","z":"","name":"zone8","tab":"8a42782c.a63e58","disp":true,"width":"6","collapse":false},{"id":"8a42782c.a63e58","type":"ui_tab","z":"","name":"hot runner 1","icon":"dashboard","order":6,"disabled":false,"hidden":false},{"id":"b5da1832.e32f98","type":"modbus-client","z":"","name":"","clienttype":"tcp","bufferCommands":true,"stateLogEnabled":false,"tcpHost":"127.0.0.1","tcpPort":"10503","tcpType":"DEFAULT","serialPort":"COM3","serialType":"RTU","serialBaudrate":"19200","serialDatabits":"8","serialStopbits":"1","serialParity":"none","serialConnectionDelay":"100","unit_id":"1","commandDelay":"1","clientTimeout":"1000","reconnectOnTimeout":false,"reconnectTimeout":"2000","parallelUnitIdsAllowed":false},{"id":"42ed54d0.d57ddc","type":"ui_group","z":"","name":"Modbus Test","tab":"9858a885.2a76b8","disp":true,"width":"6"},{"id":"9858a885.2a76b8","type":"ui_tab","z":"","name":"Modbus","icon":"dashboard"},{"id":"bb6b54c9.e10348","type":"modbus-client","z":"","name":"","clienttype":"simpleser","bufferCommands":true,"stateLogEnabled":true,"tcpHost":"127.0.0.1","tcpPort":"10502","tcpType":"DEFAULT","serialPort":"COM8","serialType":"RTU","serialBaudrate":"19200","serialDatabits":"8","serialStopbits":"1","serialParity":"none","serialConnectionDelay":"100","unit_id":"1","commandDelay":"100","clientTimeout":"100","reconnectOnTimeout":false,"reconnectTimeout":"100","parallelUnitIdsAllowed":true},{"id":"d035e006.0c4a9","type":"ui_group","z":"","name":"Modbus Test","tab":"7c892676.07ebe8","disp":true,"width":"6"},{"id":"967edffa.aa3e7","type":"modbus-client","z":"","name":"","clienttype":"simpleser","bufferCommands":true,"stateLogEnabled":false,"tcpHost":"127.0.0.1","tcpPort":"10502","tcpType":"TPC-RTU-BUFFERED","serialPort":"COM7","serialType":"RTU","serialBaudrate":"9600","serialDatabits":"8","serialStopbits":"1","serialParity":"none","serialConnectionDelay":"100","unit_id":"1","commandDelay":"200","clientTimeout":"200","reconnectOnTimeout":false,"reconnectTimeout":"200","parallelUnitIdsAllowed":false},{"id":"7c892676.07ebe8","type":"ui_tab","z":"","name":"Modbus","icon":"dashboard"},{"id":"47444b5c.6689f4","type":"ui_group","z":"","name":"graph","tab":"ccfc2893.53f1c8","order":2,"disp":true,"width":"6","collapse":false},{"id":"c22857b4.2c58c8","type":"ui_group","z":"","name":"text","tab":"ccfc2893.53f1c8","order":1,"disp":true,"width":"6","collapse":false},{"id":"ccfc2893.53f1c8","type":"ui_tab","z":"","name":"OC","icon":"dashboard","disabled":false,"hidden":false},{"id":"b6794a25.4bf2e8","type":"ui_group","z":"","name":"zone2","tab":"68bb7ed3.1a7d1","order":2,"disp":true,"width":10,"collapse":false},{"id":"7c60b204.0fe39c","type":"ui_group","z":"","name":"zone3","tab":"68bb7ed3.1a7d1","order":3,"disp":true,"width":10,"collapse":false},{"id":"c07dd215.08207","type":"ui_group","z":"","name":"zone4","tab":"68bb7ed3.1a7d1","order":4,"disp":true,"width":10,"collapse":false},{"id":"36736315.a6470c","type":"ui_group","z":"","name":"zone5","tab":"68bb7ed3.1a7d1","order":5,"disp":true,"width":10,"collapse":false},{"id":"91cef6cf.eeaa88","type":"ui_group","z":"","name":"zone6","tab":"68bb7ed3.1a7d1","order":6,"disp":true,"width":10,"collapse":false},{"id":"1e14f174.3459af","type":"ui_group","z":"","name":"zone1","tab":"68bb7ed3.1a7d1","order":1,"disp":true,"width":"10","collapse":false},{"id":"b6cd0072.77b34","type":"ui_group","z":"","name":"zone7","tab":"68bb7ed3.1a7d1","order":7,"disp":true,"width":10,"collapse":false},{"id":"b737e240.25571","type":"ui_group","z":"","name":"zone8","tab":"68bb7ed3.1a7d1","order":8,"disp":true,"width":10,"collapse":false},{"id":"68bb7ed3.1a7d1","type":"ui_tab","z":"","name":"hot runner 1","icon":"dashboard","order":6,"disabled":false,"hidden":false},{"id":"3ab8e049.aae26","type":"mqtt-broker","z":"","name":"","broker":"localhost","port":"1883","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"fc49f60c.65ee78","type":"ui_group","z":"","name":"D1","tab":"402c7a64.132fb4","disp":true,"width":"6","collapse":false},{"id":"8dcc1a96.ed1308","type":"ui_group","z":"","name":"D연속","tab":"402c7a64.132fb4","disp":true,"width":"6","collapse":false},{"id":"402c7a64.132fb4","type":"ui_tab","z":"","name":"Home","icon":"dashboard","disabled":false,"hidden":false},{"id":"439ec062.b4d0a","type":"mqtt-broker","z":"","name":"","broker":"localhost","port":"1883","clientid":"","usetls":false,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"b097ba48.a36488","type":"inject","z":"b3335886.c50e28","name":"hopper","topic":"","payload":"","payloadType":"date","repeat":"1","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":40,"wires":[["fcecc3d2.dee7e"]]},{"id":"9c0628ce.954088","type":"debug","z":"b3335886.c50e28","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","x":710,"y":40,"wires":[]},{"id":"5c8fe6e0.e03428","type":"function","z":"b3335886.c50e28","name":"Data categorization","func":"var json_res =\n{\n  initial: \"\",\n  ID: \"\",\n  setting : \"\",\n  ErrorNo : \"\",\n  nowtemp : \"\",\n  upper : \"\",\n  lower : \"\",\n  starttime : \"\",\n  starthour : \"\",\n  startminute : \"\",\n  endtime : \"\",\n  endhour : \"\",\n  endminute : \"\",\n  dayofweek : \"\",\n  setdate : \"\",\n  sethour : \"\",\n  nowdate : \"\",\n  nowhour : \"\",\n  resource : \"\",\n  settemp : \"\",\n  resourceNo : \"\",\n  alarm : \"\",\n  BCC : \"\",\n  final : \"\"\n} ;\n// output data = 2,1,177,1,0,22,0,5,0,0,0,9,3,1,1,57,127,0,99,0,0,0,7,0,0,98,18,0,0,3\njson_res.initial = msg.payload[0] ; //0x02\njson_res.ID = msg.payload[1] ; //ID\njson_res.setting = msg.payload[2] ; //0xB1\njson_res.ErrorNo = msg.payload[3] ; //Error No.\njson_res.nowtemp = msg.payload[4]*256+msg.payload[5] ; //현재온도\njson_res.upper = msg.payload[6]*256+msg.payload[7] ; //상한값\njson_res.lower = msg.payload[8]*256+msg.payload[9] ; //하한값\njson_res.starttime = msg.payload[10] ; // AM/PM\njson_res.starthour = msg.payload[11] ; //시\njson_res.startminute = msg.payload[12] ; //분\njson_res.endtime = msg.payload[13] ; // AM/PM\njson_res.endhour = msg.payload[14] ; //시\njson_res.endminute = msg.payload[15] ; //분\njson_res.dayofweek = msg.payload[16] ; //작동요일\njson_res.setdate = msg.payload[17]*256+msg.payload[18] ; //일\njson_res.sethour = msg.payload[19] ; //시\njson_res.nowdate = msg.payload[20]*256+msg.payload[21] ; //일\njson_res.nowhour = msg.payload[22] ; //시\njson_res.resource = msg.payload[23] ; //재료\njson_res.settemp = msg.payload[24]*256+msg.payload[25] ; //세팅온도\njson_res.resourceNo = msg.payload[26] ; //원재료명\njson_res.alarm = msg.payload[27] ; //알람\njson_res.BCC = msg.payload[28] ; //BCC\njson_res.final = msg.payload[29] ; //0x03\n\nmsg.payload = json_res ;\nreturn msg ;","outputs":1,"noerr":0,"x":1850,"y":400,"wires":[["afdd23ba.b9972","61ceca76.190134","c36bf21b.2d8d9","f4aeac5c.d7a83","dba500f2.252ef","fa42a5c5.1e7448","8b142d56.5c1d2","6117bd85.db42a4","6d0c7039.4873d","df732672.f69ce8","27d2f32c.3425dc","6f21832f.9132cc","ad472bcb.bbb828","4fd28ee5.857cf","1aa49020.8a4ee","911ea989.401ce8","ca330610.e16cc8","671c5a01.696c44","35dedef6.d8ef12","8da25fb3.488af","2fce22ff.61313e","5aa46def.bc2a74","8c47e383.a5ad1","dcc196af.1b13e8"]]},{"id":"86470c8e.16fed","type":"serial request","z":"b3335886.c50e28","name":"","serial":"1a302ef9.aa4741","x":410,"y":40,"wires":[["b8a2ac38.a53d"]]},{"id":"f4aeac5c.d7a83","type":"function","z":"b3335886.c50e28","name":"ErrorNo","func":"msg.payload = msg.payload.ErrorNo ;\nreturn msg;","outputs":1,"noerr":0,"x":2120,"y":420,"wires":[["a9a6844f.334588"]]},{"id":"afdd23ba.b9972","type":"function","z":"b3335886.c50e28","name":"0x02","func":"msg.payload = msg.payload.initial ;\nreturn msg;","outputs":1,"noerr":0,"x":2110,"y":240,"wires":[["fce3b089.41f7f"]]},{"id":"61ceca76.190134","type":"function","z":"b3335886.c50e28","name":"ID","func":"msg.payload = msg.payload.ID ;\nreturn msg;","outputs":1,"noerr":0,"x":2110,"y":300,"wires":[["90dd33c3.a8eb9"]]},{"id":"c36bf21b.2d8d9","type":"function","z":"b3335886.c50e28","name":"0xb1","func":"msg.payload = msg.payload.setting ;\nreturn msg;","outputs":1,"noerr":0,"x":2110,"y":360,"wires":[["1e1586e5.385199"]]},{"id":"dba500f2.252ef","type":"function","z":"b3335886.c50e28","name":"현재온도","func":"msg.payload = msg.payload.nowtemp ;\nreturn msg;","outputs":1,"noerr":0,"x":2120,"y":480,"wires":[["b9b05a1c.4c5628"]]},{"id":"fa42a5c5.1e7448","type":"function","z":"b3335886.c50e28","name":"상한값","func":"msg.payload = msg.payload.upper ;\nreturn msg;","outputs":1,"noerr":0,"x":2110,"y":540,"wires":[["d603f58c.5443f8"]]},{"id":"8b142d56.5c1d2","type":"function","z":"b3335886.c50e28","name":"하한값","func":"msg.payload = msg.payload.lower ;\nreturn msg;","outputs":1,"noerr":0,"x":2110,"y":600,"wires":[["da0e196b.a0f408"]]},{"id":"6d0c7039.4873d","type":"function","z":"b3335886.c50e28","name":"설정시간","func":"msg.payload = msg.payload.starttime ;\nreturn msg;","outputs":1,"noerr":0,"x":2120,"y":660,"wires":[["b0ef6612.e64b68"]]},{"id":"df732672.f69ce8","type":"function","z":"b3335886.c50e28","name":"시작시","func":"msg.payload = msg.payload.starthour ;\nreturn msg;","outputs":1,"noerr":0,"x":2410,"y":240,"wires":[["c682842b.c7e848"]]},{"id":"27d2f32c.3425dc","type":"function","z":"b3335886.c50e28","name":"시작분","func":"msg.payload = msg.payload.startminute ;\nreturn msg;","outputs":1,"noerr":0,"x":2410,"y":300,"wires":[["6312ee2b.9b5b3"]]},{"id":"6f21832f.9132cc","type":"function","z":"b3335886.c50e28","name":"종료시간","func":"msg.payload = msg.payload.endtime ;\nreturn msg;","outputs":1,"noerr":0,"x":2420,"y":360,"wires":[["24fe9303.b8590c"]]},{"id":"ad472bcb.bbb828","type":"function","z":"b3335886.c50e28","name":"종료시","func":"msg.payload = msg.payload.endhour ;\nreturn msg;","outputs":1,"noerr":0,"x":2410,"y":420,"wires":[["99c9e5bc.b1ace8"]]},{"id":"ca330610.e16cc8","type":"function","z":"b3335886.c50e28","name":"종료분","func":"msg.payload = msg.payload.endminute ;\nreturn msg;","outputs":1,"noerr":0,"x":2410,"y":480,"wires":[["d54604d1.0d1398"]]},{"id":"671c5a01.696c44","type":"function","z":"b3335886.c50e28","name":"작동요일","func":"msg.payload = msg.payload.dayofweek  ;\nreturn msg;","outputs":1,"noerr":0,"x":2420,"y":540,"wires":[["919d17ba.940428"]]},{"id":"5aa46def.bc2a74","type":"function","z":"b3335886.c50e28","name":"셋팅일","func":"msg.payload = msg.payload.setdate ;\nreturn msg;","outputs":1,"noerr":0,"x":2430,"y":600,"wires":[["60e476.fa7e1b8c"]]},{"id":"4fd28ee5.857cf","type":"function","z":"b3335886.c50e28","name":"셋팅시","func":"msg.payload = msg.payload.sethour ;\nreturn msg;","outputs":1,"noerr":0,"x":2430,"y":660,"wires":[["b6eabd1d.82f2e"]]},{"id":"1aa49020.8a4ee","type":"function","z":"b3335886.c50e28","name":"현재일","func":"msg.payload = msg.payload.nowdate ;\nreturn msg;","outputs":1,"noerr":0,"x":2730,"y":240,"wires":[["913559d1.9b1628"]]},{"id":"911ea989.401ce8","type":"function","z":"b3335886.c50e28","name":"현재시","func":"msg.payload = msg.payload.nowhour ;\nreturn msg;","outputs":1,"noerr":0,"x":2730,"y":300,"wires":[["479256c1.53b128"]]},{"id":"dcc196af.1b13e8","type":"function","z":"b3335886.c50e28","name":"재료","func":"msg.payload = msg.payload.resource ;\nreturn msg;","outputs":1,"noerr":0,"x":2730,"y":360,"wires":[["ec837e74.5bb0c"]]},{"id":"8c47e383.a5ad1","type":"function","z":"b3335886.c50e28","name":"설정온도","func":"msg.payload = msg.payload.settemp ;\nreturn msg;","outputs":1,"noerr":0,"x":2740,"y":420,"wires":[["d61ee8fa.490d08"]]},{"id":"2fce22ff.61313e","type":"function","z":"b3335886.c50e28","name":"원재료명","func":"msg.payload = msg.payload.resourceNo ;\nreturn msg;","outputs":1,"noerr":0,"x":2740,"y":480,"wires":[["6e5aad70.db3ad4"]]},{"id":"6117bd85.db42a4","type":"function","z":"b3335886.c50e28","name":"알람","func":"msg.payload = msg.payload.alarm ;\nreturn msg;","outputs":1,"noerr":0,"x":2730,"y":540,"wires":[["63aabedf.eafd5"]]},{"id":"35dedef6.d8ef12","type":"function","z":"b3335886.c50e28","name":"BCC","func":"msg.payload = msg.payload.BCC ;\nreturn msg;","outputs":1,"noerr":0,"x":2730,"y":600,"wires":[["f236a76d.e8f5e8"]]},{"id":"8da25fb3.488af","type":"function","z":"b3335886.c50e28","name":"0x03","func":"msg.payload = msg.payload.final ;\nreturn msg;","outputs":1,"noerr":0,"x":2730,"y":660,"wires":[["7bdb8e2c.4804c"]]},{"id":"fce3b089.41f7f","type":"debug","z":"b3335886.c50e28","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2250,"y":240,"wires":[]},{"id":"90dd33c3.a8eb9","type":"debug","z":"b3335886.c50e28","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2250,"y":300,"wires":[]},{"id":"1e1586e5.385199","type":"debug","z":"b3335886.c50e28","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2250,"y":360,"wires":[]},{"id":"a9a6844f.334588","type":"debug","z":"b3335886.c50e28","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2270,"y":420,"wires":[]},{"id":"b9b05a1c.4c5628","type":"debug","z":"b3335886.c50e28","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2270,"y":480,"wires":[]},{"id":"d603f58c.5443f8","type":"debug","z":"b3335886.c50e28","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2250,"y":540,"wires":[]},{"id":"da0e196b.a0f408","type":"debug","z":"b3335886.c50e28","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2250,"y":600,"wires":[]},{"id":"63aabedf.eafd5","type":"debug","z":"b3335886.c50e28","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2890,"y":540,"wires":[]},{"id":"b0ef6612.e64b68","type":"debug","z":"b3335886.c50e28","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2270,"y":660,"wires":[]},{"id":"c682842b.c7e848","type":"debug","z":"b3335886.c50e28","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2550,"y":240,"wires":[]},{"id":"6312ee2b.9b5b3","type":"debug","z":"b3335886.c50e28","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2550,"y":300,"wires":[]},{"id":"24fe9303.b8590c","type":"debug","z":"b3335886.c50e28","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2570,"y":360,"wires":[]},{"id":"99c9e5bc.b1ace8","type":"debug","z":"b3335886.c50e28","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2550,"y":420,"wires":[]},{"id":"d54604d1.0d1398","type":"debug","z":"b3335886.c50e28","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2550,"y":480,"wires":[]},{"id":"919d17ba.940428","type":"debug","z":"b3335886.c50e28","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2570,"y":540,"wires":[]},{"id":"f236a76d.e8f5e8","type":"debug","z":"b3335886.c50e28","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2890,"y":600,"wires":[]},{"id":"b6eabd1d.82f2e","type":"debug","z":"b3335886.c50e28","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2570,"y":660,"wires":[]},{"id":"913559d1.9b1628","type":"debug","z":"b3335886.c50e28","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2890,"y":240,"wires":[]},{"id":"479256c1.53b128","type":"debug","z":"b3335886.c50e28","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2890,"y":300,"wires":[]},{"id":"ec837e74.5bb0c","type":"debug","z":"b3335886.c50e28","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2890,"y":360,"wires":[]},{"id":"d61ee8fa.490d08","type":"debug","z":"b3335886.c50e28","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2910,"y":420,"wires":[]},{"id":"60e476.fa7e1b8c","type":"debug","z":"b3335886.c50e28","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2570,"y":600,"wires":[]},{"id":"6e5aad70.db3ad4","type":"debug","z":"b3335886.c50e28","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2910,"y":480,"wires":[]},{"id":"7bdb8e2c.4804c","type":"debug","z":"b3335886.c50e28","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2890,"y":660,"wires":[]},{"id":"fcecc3d2.dee7e","type":"function","z":"b3335886.c50e28","name":"msg maker","func":"var status = global.get('status') || 'ok'; //ok is loop, no is http\nif (!!msg.res) {\n  status = 'no' ;\n  global.set('status', status);\n}\nif (status == 'ok') {\n  msg.payload = Buffer.from(String.fromCharCode(0x02, 0x01, 0xB1, 0x00, 0x00, 0x00, 0x00, 0x03),\"ascii\");\n  return msg ;\n}","outputs":1,"noerr":0,"x":270,"y":40,"wires":[["86470c8e.16fed"]]},{"id":"1797a7fa.94d4a8","type":"http in","z":"d5617ede.93e9e","name":"","url":"/iot/blanket","method":"post","upload":false,"swaggerDoc":"","x":180,"y":520,"wires":[["abf36745.89fdd8","ae7a29c6.3caaf8"]]},{"id":"49f98ab0.30c5f4","type":"http response","z":"d5617ede.93e9e","name":"","statusCode":"","headers":{},"x":730,"y":520,"wires":[]},{"id":"4cccc625.f8bbd8","type":"inject","z":"d5617ede.93e9e","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1120,"y":80,"wires":[["d9f4cdb9.a912a"]]},{"id":"d9f4cdb9.a912a","type":"function","z":"d5617ede.93e9e","name":"global reset","func":"global.set('status', 'off') ;\nglobal.set('temp', 0) ;\nglobal.set('time', 'off') ;\nreturn msg;","outputs":1,"noerr":0,"x":1290,"y":80,"wires":[[]]},{"id":"f0eb12cb.b5bce","type":"mqtt in","z":"d5617ede.93e9e","d":true,"name":"","topic":"blanket/out","qos":"2","datatype":"auto","broker":"5434b555.7a8f4c","x":1120,"y":120,"wires":[["f98289a1.410238"]]},{"id":"f98289a1.410238","type":"debug","z":"d5617ede.93e9e","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","x":1290,"y":120,"wires":[]},{"id":"abf36745.89fdd8","type":"function","z":"d5617ede.93e9e","name":"Main Function","func":"\nvar temp = global.get('temp') || 0;\n  //gpio 온도 상승 스위치 1회 누름\n  msg.topic = 'tempup' ;\n  global.set('temp', msg.payload.temp) ;\n  msg.payload = msg.payload.temp - temp ;\n  return msg ;\n","outputs":1,"noerr":0,"x":360,"y":520,"wires":[["d99c4b32.6f9188","f39c2280.c1d4","450c3f76.1e984"]]},{"id":"7dc32c5f.e81424","type":"inject","z":"d5617ede.93e9e","name":"once a hour","topic":"","payload":"","payloadType":"date","repeat":"3600","crontab":"","once":false,"onceDelay":0.1,"x":170,"y":160,"wires":[["3d7bd1d7.5a67be"]]},{"id":"3d7bd1d7.5a67be","type":"function","z":"d5617ede.93e9e","name":"push if time steady","func":"var time = global.get('time');\nif (time == 'steady'){\n    return msg; //gpio 시간 상승 스위치 1회 누름\n}","outputs":1,"noerr":0,"x":370,"y":160,"wires":[[]]},{"id":"d99c4b32.6f9188","type":"function","z":"d5617ede.93e9e","name":"data for response","func":"var status = global.get('status')\nvar temp = global.get('temp')\nvar time = global.get('time')\nmsg.payload = [status, temp, time]\nreturn msg;","outputs":1,"noerr":0,"x":570,"y":520,"wires":[["49f98ab0.30c5f4"]]},{"id":"bf422eb7.8c49f","type":"inject","z":"d5617ede.93e9e","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":320,"y":280,"wires":[["2f39f294.a00eae"]]},{"id":"2f39f294.a00eae","type":"function","z":"d5617ede.93e9e","name":"1","func":"msg.payload = 1\nreturn msg;","outputs":1,"noerr":0,"x":510,"y":280,"wires":[[]]},{"id":"c0090ca1.25285","type":"function","z":"d5617ede.93e9e","name":"0","func":"msg.payload = 0\nreturn msg;","outputs":1,"noerr":0,"x":510,"y":320,"wires":[[]]},{"id":"f73fb230.2737a","type":"complete","z":"d5617ede.93e9e","name":"","scope":["2f39f294.a00eae"],"uncaught":false,"x":310,"y":320,"wires":[["c0090ca1.25285"]]},{"id":"cf49fdf1.2f678","type":"function","z":"d5617ede.93e9e","name":"온도 상승","func":"var pushnum = '' ; //온도상승 버튼 눌러야 하는 횟수\nif (msg.topic == 'tempup') { //처음 명령을 받았을 때, msg.payload는 온도상승 버튼 눌러야 하는 횟수\n  pushnum = msg.payload ;\n} else { //msg.complete로 부터 받은 명령\n  pushnum = global.get('pushnum') || 0; //남은 온도상승 버튼 눌러야 하는 횟수\n}\nif (pushnum !== 0) { //남은 온도상승 버튼 눌러야 하는 횟수가 0이 아닐 때\n  pushnum-- ; //남은 온도상승 버튼 눌러야 하는 횟수 1 빼기\n  global.set('pushnum', pushnum) ; //1 뺀 남은 온도상승 버튼 눌러야 하는 횟수 저장\n  msg.payload = '' ;\n  return msg ; // 온도상승 버튼 누르기\n}\n","outputs":1,"noerr":0,"x":660,"y":420,"wires":[["cb8a0086.41da1","7cf53974.ee3a48"]]},{"id":"c2ae4b7f.555b88","type":"inject","z":"d5617ede.93e9e","name":"","topic":"tempup","payload":"5","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":520,"y":420,"wires":[["cf49fdf1.2f678"]]},{"id":"98521890.7215e8","type":"complete","z":"d5617ede.93e9e","name":"","scope":["3c7ca52f.7b8aea"],"uncaught":false,"x":370,"y":460,"wires":[["cf33fa1a.c624b8"]]},{"id":"18a8e085.90937f","type":"inject","z":"d5617ede.93e9e","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1100,"y":300,"wires":[["5f8955bf.88524c"]]},{"id":"5f8955bf.88524c","type":"function","z":"d5617ede.93e9e","name":"","func":"global.set('temp', 0) ;\nglobal.set('pushnum', 0) ;\nmsg.payload = [global.get('temp'), global.get('pushnum')] ;\nreturn msg;","outputs":1,"noerr":0,"x":1250,"y":300,"wires":[["1fd0a0b2.c29b6f"]]},{"id":"1fd0a0b2.c29b6f","type":"debug","z":"d5617ede.93e9e","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","x":1420,"y":300,"wires":[]},{"id":"b4f053e9.9e1d4","type":"function","z":"d5617ede.93e9e","name":"1","func":"msg.payload = 1\nreturn msg;","outputs":1,"noerr":0,"x":950,"y":420,"wires":[["9f337fd.01dff8"]]},{"id":"3c7ca52f.7b8aea","type":"function","z":"d5617ede.93e9e","name":"0","func":"msg.payload = 0\nreturn msg;","outputs":1,"noerr":0,"x":950,"y":460,"wires":[["9f337fd.01dff8"]]},{"id":"cb8a0086.41da1","type":"delay","z":"d5617ede.93e9e","name":"","pauseType":"delay","timeout":"1.5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":810,"y":460,"wires":[["3c7ca52f.7b8aea"]]},{"id":"9f337fd.01dff8","type":"debug","z":"d5617ede.93e9e","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","x":1110,"y":480,"wires":[]},{"id":"cf33fa1a.c624b8","type":"function","z":"d5617ede.93e9e","name":"topic 제거","func":"msg.topic = '' ;\nreturn msg;","outputs":1,"noerr":0,"x":520,"y":460,"wires":[["cf49fdf1.2f678"]]},{"id":"7cf53974.ee3a48","type":"delay","z":"d5617ede.93e9e","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":800,"y":420,"wires":[["b4f053e9.9e1d4"]]},{"id":"f39c2280.c1d4","type":"function","z":"d5617ede.93e9e","name":"온도 상승","func":"var pushnum = '' ; //온도상승 버튼 눌러야 하는 횟수\nif (msg.topic == 'tempup') { //처음 명령을 받았을 때, msg.payload는 온도상승 버튼 눌러야 하는 횟수\n  pushnum = msg.payload ;\n} else { //msg.complete로 부터 받은 명령\n  pushnum = global.get('pushnum') || 0; //남은 온도상승 버튼 눌러야 하는 횟수\n}\nif (pushnum !== 0) { //남은 온도상승 버튼 눌러야 하는 횟수가 0이 아닐 때\n  pushnum-- ; //남은 온도상승 버튼 눌러야 하는 횟수 1 빼기\n  global.set('pushnum', pushnum) ; //1 뺀 남은 온도상승 버튼 눌러야 하는 횟수 저장\n  msg.payload = '' ;\n  return msg ; // 온도상승 버튼 누르기\n}\n","outputs":1,"noerr":0,"x":460,"y":580,"wires":[["d03e2c69.65d96","b1db80e.8bda38"]]},{"id":"e26e28da.2c7b18","type":"complete","z":"d5617ede.93e9e","name":"","scope":["ce99fc2b.a571d"],"uncaught":false,"x":170,"y":620,"wires":[["efb8edfc.a625d"]]},{"id":"efb8edfc.a625d","type":"function","z":"d5617ede.93e9e","name":"topic 제거","func":"msg.topic = '' ;\nreturn msg;","outputs":1,"noerr":0,"x":320,"y":620,"wires":[["f39c2280.c1d4"]]},{"id":"b1db80e.8bda38","type":"delay","z":"d5617ede.93e9e","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":600,"y":580,"wires":[["1d482608.c2aa1a"]]},{"id":"d03e2c69.65d96","type":"delay","z":"d5617ede.93e9e","name":"","pauseType":"delay","timeout":"1.5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":610,"y":620,"wires":[["ce99fc2b.a571d"]]},{"id":"ce99fc2b.a571d","type":"function","z":"d5617ede.93e9e","name":"0","func":"msg.payload = 0\nreturn msg;","outputs":1,"noerr":0,"x":750,"y":620,"wires":[["51c7bb04.da49c4"]]},{"id":"1d482608.c2aa1a","type":"function","z":"d5617ede.93e9e","name":"1","func":"msg.payload = 1\nreturn msg;","outputs":1,"noerr":0,"x":750,"y":580,"wires":[["51c7bb04.da49c4"]]},{"id":"51c7bb04.da49c4","type":"debug","z":"d5617ede.93e9e","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","x":910,"y":580,"wires":[]},{"id":"ae7a29c6.3caaf8","type":"debug","z":"d5617ede.93e9e","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","x":270,"y":400,"wires":[]},{"id":"450c3f76.1e984","type":"debug","z":"d5617ede.93e9e","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","x":530,"y":700,"wires":[]},{"id":"a421229f.0a61e","type":"http in","z":"d5617ede.93e9e","d":true,"name":"","url":"/iot/blanket","method":"post","upload":false,"swaggerDoc":"","x":160,"y":60,"wires":[["2e0d1f09.9f41d"]]},{"id":"e4acfdf.c0fa4","type":"http response","z":"d5617ede.93e9e","name":"","statusCode":"","headers":{},"x":710,"y":60,"wires":[]},{"id":"2e0d1f09.9f41d","type":"function","z":"d5617ede.93e9e","name":"Main Function","func":"//http response를 위한 변수(휴대폰으로 현재상태 확인)\nvar status = global.get('status') || 'off';\nvar temp = global.get('temp') || 0;\nvar time = global.get('time') || 'off';\n\nif (status == 'off') {\n  if (msg.payload.status == 'on') {\n    //gpio 스위치 1회 누름\n    status = 'on' ;\n    global.set('status', status) ;\n    return msg ;\n  }\n} else if (msg.payload.status == 'off') {\n  //gpio 스위치 1회 누름\n  status = 'off' ;\n  global.set('status', status) ;\n  temp = 0 ;\n  global.set('temp', temp) ;\n  time = 'off' ;\n  global.set('time', time) ;\n  return msg ;\n} else if (msg.payload.temp !== 0) {\n  //gpio 온도 상승 스위치 1회 누름\n  msg.topic = 'tempup' ;\n  msg.payload = msg.payload.temp - temp - 2 ;\n  return msg ;\n} else if (msg.payload.temp == 'down') {\n  if (temp !== 0) {\n    //gpio 온도 하강 스위치 1회 누름\n    temp-- ;\n    global.set('temp', temp) ;\n    return msg ;\n  }\n} else if (msg.payload.time == 'steady') {\n  time = 'steady' ;\n  global.set('time', time) ;\n}\n","outputs":1,"noerr":0,"x":340,"y":60,"wires":[["99f29973.d0c078"]]},{"id":"99f29973.d0c078","type":"function","z":"d5617ede.93e9e","name":"data for response","func":"var status = global.get('status')\nvar temp = global.get('temp')\nvar time = global.get('time')\nmsg.payload = [status, temp, time]\nreturn msg;","outputs":1,"noerr":0,"x":550,"y":60,"wires":[["e4acfdf.c0fa4"]]},{"id":"77cbd310.2ef08c","type":"function","z":"85528abd.1ee708","name":"data split & convert to buffer","func":"var com_obj = flow.get('command') || [] ;\nvar com_str = com_obj[0] ;\nvar hex = '' ;\n\nif (msg.payload==='') {\n  flow.set('error', 'authorize error') ;\n}\n\nif (com_obj.length == 1) {\n  msg.complete = true ;\n  flow.set('command', []) ;\n} else {\n  com_obj.splice(0,1) ;\n  flow.set('command', com_obj) ;\n}\nif (com_str !== undefined) {\n  for (var i = 0; (i < com_str.length); i += 2) {\n    hex += String.fromCharCode('0x' + com_str.substr(i, 2)) ;\n  }\n  msg.payload = Buffer.from(hex,\"ascii\") ;\n  return msg ;\n}\n","outputs":1,"noerr":0,"x":460,"y":240,"wires":[["f391e69a.023ed8"]]},{"id":"65091c47.35bce4","type":"inject","z":"85528abd.1ee708","name":"XFPTRT","topic":"Xenon_Foolproof_Temperature_Request_Timer","payload":"","payloadType":"date","repeat":"1","crontab":"","once":false,"onceDelay":0.1,"x":80,"y":80,"wires":[["74d354cc.ae529c"]]},{"id":"74d354cc.ae529c","type":"function","z":"85528abd.1ee708","name":"msg maker","func":"var status = flow.get('status') || 'ok'; //ok is loop, no is http\nif (!!msg.res) {\n  status = 'no' ;\n  flow.set('status', status);\n}\nif (status == 'ok') {\n  var count = flow.get('count') || 0;\n  count += 1 ;\n  flow.set('count',count);\n\n  if((count%6)===0) {\n    msg.payload = Buffer.from(String.fromCharCode(0x02, 0x01, 0x31, 0x00, 0x00, 0x00, 0x00, 0x03),\"ascii\");\n  } else if((count%6)===1) {\n    msg.payload = Buffer.from(String.fromCharCode(0x02, 0x02, 0x31, 0x00, 0x00, 0x00, 0x00, 0x03),\"ascii\");\n  } else if((count%6)===2) {\n    msg.payload = Buffer.from(String.fromCharCode(0x02, 0x03, 0x31, 0x00, 0x00, 0x00, 0x00, 0x03),\"ascii\");\n  } else if((count%6)===3) {\n    msg.payload = Buffer.from(String.fromCharCode(0x02, 0x04, 0x31, 0x00, 0x00, 0x00, 0x00, 0x03),\"ascii\");\n  } else if((count%6)===4) {\n    msg.payload = Buffer.from(String.fromCharCode(0x02, 0x05, 0x31, 0x00, 0x00, 0x00, 0x00, 0x03),\"ascii\");\n  } else if((count%6)===5) {\n    msg.payload = Buffer.from(String.fromCharCode(0x02, 0x06, 0x41, 0x00, 0x00, 0x00, 0x00, 0x03),\"ascii\");\n  }\n  return msg ;\n}\n","outputs":1,"noerr":0,"x":230,"y":80,"wires":[["1a02d84d.2dc378"]]},{"id":"cbb805b4.f8d388","type":"http in","z":"85528abd.1ee708","name":"http in (/foolproof)","url":"/foolproof","method":"post","upload":false,"swaggerDoc":"","x":100,"y":240,"wires":[["74d354cc.ae529c","1bf8f992.22f1d6"]]},{"id":"f391e69a.023ed8","type":"serial request","z":"85528abd.1ee708","name":"","serial":"1a302ef9.aa4741","x":670,"y":240,"wires":[["de0aae55.97d1e"]]},{"id":"a27eaf35.0c21b","type":"join","z":"85528abd.1ee708","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"num","reduceFixup":"","x":970,"y":240,"wires":[["6c7bb953.a69cf8"]]},{"id":"7eec505e.8776","type":"complete","z":"85528abd.1ee708","name":"when one request finish","scope":["de0aae55.97d1e"],"uncaught":false,"x":200,"y":280,"wires":[["77cbd310.2ef08c"]]},{"id":"42cd753d.7cfa8c","type":"http response","z":"85528abd.1ee708","name":"http response","statusCode":"","headers":{},"x":1280,"y":240,"wires":[]},{"id":"1a02d84d.2dc378","type":"serial request","z":"85528abd.1ee708","name":"","serial":"1a302ef9.aa4741","x":390,"y":80,"wires":[["3c2f26a4.daf4ca"]]},{"id":"f4cbd958.13e4b8","type":"comment","z":"85528abd.1ee708","name":"data refresher","info":"","x":90,"y":40,"wires":[]},{"id":"56ce6570.b7580c","type":"comment","z":"85528abd.1ee708","name":"http comunication","info":"","x":100,"y":200,"wires":[]},{"id":"38eae536.a5252a","type":"link out","z":"85528abd.1ee708","name":"","links":["a91cafdb.08c1e","8c47b8ec.f61c08","f38d4101.0a037","72230848.f8e8e8"],"x":875,"y":80,"wires":[]},{"id":"3c2f26a4.daf4ca","type":"function","z":"85528abd.1ee708","name":"Datastore","func":"var count = flow.get('count') || 0;\nvar json_obj = flow.get('json_obj')\n\nif((count%6)===0) { //count를 6으로 나눈 나머지가 0일 경우\n  json_obj = {} ;\n  json_obj.result1 = msg.payload ;\n  flow.set('json_obj',json_obj) ;\n} else if((count%6)===1) { //count를 6으로 나눈 나머지가 1일 경우\n  json_obj.result2 = msg.payload ;\n  flow.set('json_obj',json_obj) ;\n} else if((count%6)===2) { //count를 6으로 나눈 나머지가 2일 경우\n  json_obj.result3 = msg.payload ;\n  flow.set('json_obj',json_obj) ;\n} else if((count%6)===3) { //count를 6으로 나눈 나머지가 3일 경우\n  json_obj.result4 = msg.payload ;\n  flow.set('json_obj',json_obj) ;\n} else if((count%6)===4) { //count를 6으로 나눈 나머지가 4일 경우\n  json_obj.result5 = msg.payload ;\n  flow.set('json_obj',json_obj) ;\n} else if((count%6)===5) { //count를 6으로 나눈 나머지가 5일 경우\n  json_obj.result6 = msg.payload ;\n  flow.set('json_obj',json_obj) ;\n  msg.payload = json_obj ;\n  return msg;\n}\n","outputs":1,"noerr":0,"x":540,"y":80,"wires":[["ef48c3d7.2abb9"]]},{"id":"ef48c3d7.2abb9","type":"function","z":"85528abd.1ee708","name":"data transfer json short","func":"var json_data = {} ;\nfor (i = 1; i<12; i++) {\n  json_data[\"zone\" + String(i)] = {} ;\n}\n\njson_data.zone1.nowtemp = (msg.payload.result1[5]*256+msg.payload.result1[6])/10 ;\njson_data.zone1.settemp = (msg.payload.result1[7]*256+msg.payload.result1[8])/10 ;\njson_data.zone1.upper = (msg.payload.result1[9]*256+msg.payload.result1[10])/10 ;\njson_data.zone1.lower = (msg.payload.result1[11]*256+msg.payload.result1[12])/10 ;\njson_data.zone2.nowtemp = (msg.payload.result1[16]*256+msg.payload.result1[17])/10 ;\njson_data.zone2.settemp = (msg.payload.result1[18]*256+msg.payload.result1[19])/10 ;\njson_data.zone2.upper = (msg.payload.result1[20]*256+msg.payload.result1[21])/10 ;\njson_data.zone2.lower = (msg.payload.result1[22]*256+msg.payload.result1[23])/10 ;\n\njson_data.zone3.nowtemp = (msg.payload.result2[5]*256+msg.payload.result2[6])/10 ;\njson_data.zone3.settemp = (msg.payload.result2[7]*256+msg.payload.result2[8])/10 ;\njson_data.zone3.upper = (msg.payload.result2[9]*256+msg.payload.result2[10])/10 ;\njson_data.zone3.lower = (msg.payload.result2[11]*256+msg.payload.result2[12])/10 ;\njson_data.zone4.nowtemp = (msg.payload.result2[16]*256+msg.payload.result2[17])/10 ;\njson_data.zone4.settemp = (msg.payload.result2[18]*256+msg.payload.result2[19])/10 ;\njson_data.zone4.upper = (msg.payload.result2[20]*256+msg.payload.result2[21])/10 ;\njson_data.zone4.lower = (msg.payload.result2[22]*256+msg.payload.result2[23])/10 ;\n\njson_data.zone5.nowtemp = (msg.payload.result3[5]*256+msg.payload.result3[6])/10 ;\njson_data.zone5.settemp = (msg.payload.result3[7]*256+msg.payload.result3[8])/10 ;\njson_data.zone5.upper = (msg.payload.result3[9]*256+msg.payload.result3[10])/10 ;\njson_data.zone5.lower = (msg.payload.result3[11]*256+msg.payload.result3[12])/10 ;\njson_data.zone6.nowtemp = (msg.payload.result3[16]*256+msg.payload.result3[17])/10 ;\njson_data.zone6.settemp = (msg.payload.result3[18]*256+msg.payload.result3[19])/10 ;\njson_data.zone6.upper = (msg.payload.result3[20]*256+msg.payload.result3[21])/10 ;\njson_data.zone6.lower = (msg.payload.result3[22]*256+msg.payload.result3[23])/10 ;\n\njson_data.zone7.nowtemp = (msg.payload.result4[5]*256+msg.payload.result4[6])/10 ;\njson_data.zone7.settemp = (msg.payload.result4[7]*256+msg.payload.result4[8])/10 ;\njson_data.zone7.upper = (msg.payload.result4[9]*256+msg.payload.result4[10])/10 ;\njson_data.zone7.lower = (msg.payload.result4[11]*256+msg.payload.result4[12])/10 ;\njson_data.zone8.nowtemp = (msg.payload.result4[16]*256+msg.payload.result4[17])/10 ;\njson_data.zone8.settemp = (msg.payload.result4[18]*256+msg.payload.result4[19])/10 ;\njson_data.zone8.upper = (msg.payload.result4[20]*256+msg.payload.result4[21])/10 ;\njson_data.zone8.lower = (msg.payload.result4[22]*256+msg.payload.result4[23])/10 ;\n\njson_data.zone9.nowtemp = (msg.payload.result5[5]*256+msg.payload.result5[6])/10 ;\njson_data.zone9.settemp = (msg.payload.result5[7]*256+msg.payload.result5[8])/10 ;\njson_data.zone9.upper = (msg.payload.result5[9]*256+msg.payload.result5[10])/10 ;\njson_data.zone9.lower = (msg.payload.result5[11]*256+msg.payload.result5[12])/10 ;\njson_data.zone10.nowtemp = (msg.payload.result5[16]*256+msg.payload.result5[17])/10 ;\njson_data.zone10.settemp = (msg.payload.result5[18]*256+msg.payload.result5[19])/10 ;\njson_data.zone10.upper = (msg.payload.result5[20]*256+msg.payload.result5[21])/10 ;\njson_data.zone10.lower = (msg.payload.result5[22]*256+msg.payload.result5[23])/10 ;\n\njson_data.zone11.planqty = msg.payload.result6[3]*256+msg.payload.result6[4] ;\njson_data.zone11.prodqty = msg.payload.result6[6]*256+msg.payload.result6[7] ;\njson_data.zone11.goodqty = msg.payload.result6[10]*256+msg.payload.result6[11] ;\njson_data.zone11.cavity = msg.payload.result6[5] ;\n\nmsg.payload = json_data ;\nreturn msg ;\n","outputs":1,"noerr":0,"x":720,"y":80,"wires":[["38eae536.a5252a"]]},{"id":"1bf8f992.22f1d6","type":"function","z":"85528abd.1ee708","name":"authorize","func":"if (msg.payload.name == 'CTFadmin') { //'CTFadmin'일 경우\n  var obj = Object.values(msg.payload) ;\n  obj.splice(0,1) ;\n  flow.set('command', obj) ;\n  msg.payload = obj ;\n} else {\n  flow.set('command', ['authorize error']) ;\n  msg.payload = '' ;\n}\nreturn msg;\n","outputs":1,"noerr":0,"x":260,"y":240,"wires":[["77cbd310.2ef08c"]]},{"id":"de0aae55.97d1e","type":"function","z":"85528abd.1ee708","name":"check error","func":"if ( msg.payload === undefined ) {\n  msg.payload = 'command error' ;\n}\nreturn msg ;","outputs":1,"noerr":0,"x":830,"y":240,"wires":[["a27eaf35.0c21b"]]},{"id":"6c7bb953.a69cf8","type":"function","z":"85528abd.1ee708","name":"data output","func":"var error = flow.get('error') || ''\nvar json_res = {} ;\nfor (i = 1; i<msg.payload.length+1; i++) {\n  json_res[\"response\" + String(i)] = msg.payload[i-1] ;\n}\nmsg.payload = json_res ;\nflow.set('status','ok') ;\n\nif (error !== '') {\n  msg.payload = error ;\n  flow.set('error', '') ;\n}\n\nreturn msg ;\n","outputs":1,"noerr":0,"x":1110,"y":240,"wires":[["42cd753d.7cfa8c"]]},{"id":"b8a2ac38.a53d","type":"function","z":"b3335886.c50e28","name":"data to json","func":"var json_res = {} ;\n// output data = 2,1,177,1,0,22,0,5,0,0,0,9,3,1,1,57,127,0,99,0,0,0,7,0,0,98,18,0,0,3\njson_res.initial = msg.payload[0] ; //0x02\njson_res.ID = msg.payload[1] ; //ID\njson_res.setting = msg.payload[2] ; //0xB1\njson_res.ErrorNo = msg.payload[3] ; //Error No.\njson_res.nowtemp = msg.payload[4]*256+msg.payload[5] ; //현재온도\njson_res.upper = msg.payload[6]*256+msg.payload[7] ; //상한값\njson_res.lower = msg.payload[8]*256+msg.payload[9] ; //하한값\njson_res.starttime = msg.payload[10] ; // AM/PM\njson_res.starthour = msg.payload[11] ; //시\njson_res.startminute = msg.payload[12] ; //분\njson_res.endtime = msg.payload[13] ; // AM/PM\njson_res.endhour = msg.payload[14] ; //시\njson_res.endminute = msg.payload[15] ; //분\njson_res.dayofweek = msg.payload[16] ; //작동요일\njson_res.setdate = msg.payload[17]*256+msg.payload[18] ; //일\njson_res.sethour = msg.payload[19] ; //시\njson_res.nowdate = msg.payload[20]*256+msg.payload[21] ; //일\njson_res.nowhour = msg.payload[22] ; //시\njson_res.resource = msg.payload[23] ; //재료\njson_res.settemp = msg.payload[24]*256+msg.payload[25] ; //세팅온도\njson_res.resourceNo = msg.payload[26] ; //원재료명\njson_res.alarm = msg.payload[27] ; //알람\njson_res.BCC = msg.payload[28] ; //BCC\njson_res.final = msg.payload[29] ; //0x03\n\nmsg.payload = json_res ;\nreturn msg ;\n","outputs":1,"noerr":0,"x":550,"y":40,"wires":[["9c0628ce.954088"]]},{"id":"9a09ecf9.fb689","type":"function","z":"b3335886.c50e28","name":"data split & convert to buffer","func":"var com_obj = flow.get('command') || [] ;\nvar com_str = com_obj[0] ;\nvar hex = '' ;\n\nif (msg.payload==='') {\n  flow.set('error', 'authorize error') ;\n}\n\nif (com_obj.length == 1) {\n  msg.complete = true ;\n  flow.set('command', []) ;\n} else {\n  com_obj.splice(0,1) ;\n  flow.set('command', com_obj) ;\n}\nif (com_str !== undefined) {\n  for (var i = 0; (i < com_str.length); i += 2) {\n    hex += String.fromCharCode('0x' + com_str.substr(i, 2)) ;\n  }\n  msg.payload = Buffer.from(hex,\"ascii\") ;\n  return msg ;\n}\n","outputs":1,"noerr":0,"x":460,"y":80,"wires":[["575887d7.ce6e08"]]},{"id":"26c3d609.aa4b9a","type":"http in","z":"b3335886.c50e28","name":"http in (/hopper)","url":"/hopper","method":"post","upload":false,"swaggerDoc":"","x":100,"y":80,"wires":[["da7bbdd3.f436c","fcecc3d2.dee7e"]]},{"id":"575887d7.ce6e08","type":"serial request","z":"b3335886.c50e28","name":"","serial":"1a302ef9.aa4741","x":670,"y":80,"wires":[["801b7590.365a18"]]},{"id":"5875ce9.32e473","type":"join","z":"b3335886.c50e28","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"num","reduceFixup":"","x":970,"y":80,"wires":[["ef4208e4.d3a838"]]},{"id":"d6921b08.c54098","type":"complete","z":"b3335886.c50e28","name":"when one request finish","scope":["801b7590.365a18"],"uncaught":false,"x":200,"y":120,"wires":[["9a09ecf9.fb689"]]},{"id":"e50ee66c.528178","type":"http response","z":"b3335886.c50e28","name":"http response","statusCode":"","headers":{},"x":1280,"y":80,"wires":[]},{"id":"da7bbdd3.f436c","type":"function","z":"b3335886.c50e28","name":"authorize","func":"if (msg.payload.name == 'CTFadmin') { //'CTFadmin'일 경우\n  var obj = Object.values(msg.payload) ;\n  obj.splice(0,1) ;\n  flow.set('command', obj) ;\n  msg.payload = obj ;\n} else {\n  flow.set('command', ['authorize error']) ;\n  msg.payload = '' ;\n}\nreturn msg;\n","outputs":1,"noerr":0,"x":260,"y":80,"wires":[["9a09ecf9.fb689"]]},{"id":"801b7590.365a18","type":"function","z":"b3335886.c50e28","name":"check error","func":"if ( msg.payload === undefined ) {\n  msg.payload = 'command error' ;\n}\nreturn msg ;","outputs":1,"noerr":0,"x":830,"y":80,"wires":[["5875ce9.32e473"]]},{"id":"ef4208e4.d3a838","type":"function","z":"b3335886.c50e28","name":"data output","func":"var error = flow.get('error') || ''\nvar json_res = {} ;\nfor (i = 1; i<msg.payload.length+1; i++) {\n  json_res[\"response\" + String(i)] = msg.payload[i-1] ;\n}\nmsg.payload = json_res ;\nflow.set('status','ok') ;\n\nif (error !== '') {\n  msg.payload = error ;\n  flow.set('error', '') ;\n}\n\nreturn msg ;\n","outputs":1,"noerr":0,"x":1110,"y":80,"wires":[["e50ee66c.528178"]]},{"id":"17a404d.fa375fb","type":"mosca in","z":"59148a18.8a7b24","mqtt_port":1883,"mqtt_ws_port":8080,"name":"","username":"","password":"","dburl":"","x":170,"y":80,"wires":[[]]},{"id":"96cc4ff9.36d4e","type":"mqtt in","z":"59148a18.8a7b24","name":"","topic":"mybroker","qos":"2","datatype":"auto","broker":"5434b555.7a8f4c","x":140,"y":200,"wires":[["38b47312.f562ac"]]},{"id":"5e9d8347.a4135c","type":"mqtt out","z":"59148a18.8a7b24","name":"","topic":"mybroker","qos":"","retain":"","broker":"5434b555.7a8f4c","x":360,"y":340,"wires":[]},{"id":"cd03fd03.c5833","type":"inject","z":"59148a18.8a7b24","name":"","topic":"","payload":"hello world from node","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":180,"y":340,"wires":[["5e9d8347.a4135c"]]},{"id":"38b47312.f562ac","type":"debug","z":"59148a18.8a7b24","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","x":290,"y":200,"wires":[]},{"id":"bddb5589.87efa8","type":"function","z":"59148a18.8a7b24","name":"mqtt publish","func":"var require = global.get('require');\nvar mqtt = require('mqtt');\n\nvar options = {\n  host: '127.0.0.1',\n  port: 1883\n  //protocol: 'mqtts',\n  //username:\"steve\",\n  //password:\"password\"\n};\n\nvar client = mqtt.connect(options);\n\n//connected\nclient.on(\"connect\", () => {\t\n  console.log(\"connected\\n\"+ client.connected);\n}) ;\n\n//error\nclient.on(\"error\", (error) => { \n  console.log(\"Can't connect\\n\" + error);\n}) ;\n\nvar topic = msg.topic ;\nvar message = msg.payload ;\n\nclient.publish(topic, message) ;","outputs":1,"noerr":0,"x":430,"y":400,"wires":[[]]},{"id":"16545c57.57c664","type":"inject","z":"59148a18.8a7b24","name":"","topic":"mybroker","payload":"hello world from code","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":210,"y":400,"wires":[["bddb5589.87efa8"]]},{"id":"c290107.924abf","type":"comment","z":"59148a18.8a7b24","name":"mqtt broker(/mybroker)","info":"","x":180,"y":40,"wires":[]},{"id":"a2e10d8c.7f2fa","type":"comment","z":"59148a18.8a7b24","name":"mqtt subscriber","info":"","x":160,"y":160,"wires":[]},{"id":"2ab4636a.876c3c","type":"comment","z":"59148a18.8a7b24","name":"mqtt publisher","info":"","x":150,"y":300,"wires":[]},{"id":"83061e7d.95d31","type":"inject","z":"91ff2fa4.75554","name":"","topic":"","payload":"1","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":80,"wires":[["5667ca17.74dc44"]]},{"id":"5667ca17.74dc44","type":"modbus-getter","z":"91ff2fa4.75554","name":"","showStatusActivities":false,"showErrors":false,"logIOActivities":false,"unitid":"1","dataType":"HoldingRegister","adr":"256","quantity":"1","server":"bb6b54c9.e10348","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":280,"y":80,"wires":[[],[]]},{"id":"465e9c4.ec07964","type":"debug","z":"91ff2fa4.75554","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1150,"y":540,"wires":[]},{"id":"c6c01350.2a20f","type":"catch","z":"91ff2fa4.75554","name":"","scope":null,"uncaught":false,"x":970,"y":540,"wires":[["465e9c4.ec07964"]]},{"id":"188730f.e6cd5cf","type":"modbus-write","z":"91ff2fa4.75554","name":"","showStatusActivities":false,"showErrors":false,"unitid":"1","dataType":"HoldingRegister","adr":"270","quantity":"1","server":"bb6b54c9.e10348","x":280,"y":140,"wires":[[],[]]},{"id":"e473a713.19fa98","type":"inject","z":"91ff2fa4.75554","name":"","topic":"","payload":"0","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":140,"wires":[["188730f.e6cd5cf"]]},{"id":"c1f70c00.c254e","type":"inject","z":"85528abd.1ee708","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1600,"y":100,"wires":[["9b6b642.492f098"]]},{"id":"9b6b642.492f098","type":"function","z":"85528abd.1ee708","name":"1","func":"msg.payload = String.fromCharCode(0x02, 0x01, 0x31, 0x00, 0x00, 0x00, 0x00, 0x03);\nreturn msg ;\n","outputs":1,"noerr":0,"x":1730,"y":100,"wires":[["87cc97d2.3505c8"]]},{"id":"7bb44768.6f7db8","type":"function","z":"85528abd.1ee708","name":"2","func":"msg.payload = String.fromCharCode(0x02, 0x02, 0x31, 0x00, 0x00, 0x00, 0x00, 0x03);\nreturn msg ;\n","outputs":1,"noerr":0,"x":1730,"y":140,"wires":[["87cc97d2.3505c8"]]},{"id":"cda5257f.823558","type":"function","z":"85528abd.1ee708","name":"3","func":"msg.payload = String.fromCharCode(0x02, 0x03, 0x31, 0x00, 0x00, 0x00, 0x00, 0x03);\nreturn msg ;\n","outputs":1,"noerr":0,"x":1730,"y":180,"wires":[["87cc97d2.3505c8"]]},{"id":"3b0b611a.f9a50e","type":"function","z":"85528abd.1ee708","name":"4","func":"msg.payload = String.fromCharCode(0x02, 0x04, 0x31, 0x00, 0x00, 0x00, 0x00, 0x03);\nreturn msg ;\n","outputs":1,"noerr":0,"x":1730,"y":220,"wires":[["87cc97d2.3505c8"]]},{"id":"5216a94a.1f1638","type":"function","z":"85528abd.1ee708","name":"5","func":"msg.payload = String.fromCharCode(0x02, 0x05, 0x31, 0x00, 0x00, 0x00, 0x00, 0x03);\nreturn msg ;\n","outputs":1,"noerr":0,"x":1730,"y":260,"wires":[["87cc97d2.3505c8"]]},{"id":"9886d5e3.9dcb78","type":"function","z":"85528abd.1ee708","name":"6","func":"msg.payload = String.fromCharCode(0x02, 0x06, 0x41, 0x00, 0x00, 0x00, 0x00, 0x03);\nreturn msg ;\n","outputs":1,"noerr":0,"x":1730,"y":300,"wires":[["87cc97d2.3505c8"]]},{"id":"543ccd3e.056d24","type":"inject","z":"85528abd.1ee708","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1600,"y":140,"wires":[["7bb44768.6f7db8"]]},{"id":"762dbf75.b956","type":"inject","z":"85528abd.1ee708","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1600,"y":180,"wires":[["cda5257f.823558"]]},{"id":"5f5956fb.3111e8","type":"inject","z":"85528abd.1ee708","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1600,"y":220,"wires":[["3b0b611a.f9a50e"]]},{"id":"b765ab3c.6b4688","type":"inject","z":"85528abd.1ee708","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1600,"y":260,"wires":[["5216a94a.1f1638"]]},{"id":"d8776260.bf5fc","type":"inject","z":"85528abd.1ee708","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1600,"y":300,"wires":[["9886d5e3.9dcb78"]]},{"id":"87cc97d2.3505c8","type":"serial out","z":"85528abd.1ee708","d":true,"name":"","serial":"1a302ef9.aa4741","x":1930,"y":100,"wires":[]},{"id":"f173995d.9f1288","type":"function","z":"85528abd.1ee708","name":"SMART-Q Data Array","func":"var str = msg.payload ;\nvar resultlist = [] ;\n\nfor (i = 0; i<str.length; i++) {\n  hex = str.charCodeAt(i).toString(16);\n  resultlist.push((\"0\"+hex).slice(-2)) ;\n}\nif (resultlist[1] != \"06\") {\n    msg.payload = resultlist ;\n     return msg;\n}","outputs":1,"noerr":0,"x":1780,"y":340,"wires":[["f8bcd71c.0f0908","e98c01ae.7ab08","cae4319b.69203","8ab974ba.6fc768","f7abe124.150f2","77533cc.f2b22c4","c69979a8.98b0e8","44faea81.c02314"]]},{"id":"f8bcd71c.0f0908","type":"function","z":"85528abd.1ee708","name":"6, 7(현재온도)","func":"var result = parseInt(msg.payload[5].concat(msg.payload[6]), 16) ;\nmsg.payload = result ;\nreturn msg ;\n","outputs":1,"noerr":0,"x":2080,"y":140,"wires":[["c602d79f.d53728"]]},{"id":"c602d79f.d53728","type":"debug","z":"85528abd.1ee708","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","x":2270,"y":140,"wires":[]},{"id":"e98c01ae.7ab08","type":"function","z":"85528abd.1ee708","name":"8, 9(세팅온도)","func":"var result = parseInt(msg.payload[7].concat(msg.payload[8]), 16) ;\nmsg.payload = result ;\nreturn msg ;\n","outputs":1,"noerr":0,"x":2080,"y":200,"wires":[["eef23183.0aee6"]]},{"id":"eef23183.0aee6","type":"debug","z":"85528abd.1ee708","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","x":2270,"y":200,"wires":[]},{"id":"cae4319b.69203","type":"function","z":"85528abd.1ee708","name":"10, 11(상한값)","func":"var result = parseInt(msg.payload[9].concat(msg.payload[10]), 16) ;\nmsg.payload = result ;\nreturn msg ;\n","outputs":1,"noerr":0,"x":2080,"y":260,"wires":[["1ca06e72.505832"]]},{"id":"1ca06e72.505832","type":"debug","z":"85528abd.1ee708","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","x":2270,"y":260,"wires":[]},{"id":"8ab974ba.6fc768","type":"function","z":"85528abd.1ee708","name":"12, 13(하한값)","func":"var result = parseInt(msg.payload[11].concat(msg.payload[12]), 16) ;\nmsg.payload = result ;\nreturn msg ;\n","outputs":1,"noerr":0,"x":2080,"y":320,"wires":[["ef14faf2.2c4128"]]},{"id":"ef14faf2.2c4128","type":"debug","z":"85528abd.1ee708","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","x":2270,"y":320,"wires":[]},{"id":"f7abe124.150f2","type":"function","z":"85528abd.1ee708","name":"17, 18(현재온도)","func":"var result = parseInt(msg.payload[16].concat(msg.payload[17]), 16) ;\nmsg.payload = result ;\nreturn msg ;\n","outputs":1,"noerr":0,"x":2090,"y":380,"wires":[["1523b01c.242ba"]]},{"id":"1523b01c.242ba","type":"debug","z":"85528abd.1ee708","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","x":2270,"y":380,"wires":[]},{"id":"77533cc.f2b22c4","type":"function","z":"85528abd.1ee708","name":"19, 20(세팅온도)","func":"var result = parseInt(msg.payload[18].concat(msg.payload[19]), 16) ;\nmsg.payload = result ;\nreturn msg ;\n","outputs":1,"noerr":0,"x":2090,"y":440,"wires":[["15c3e610.1515fa"]]},{"id":"15c3e610.1515fa","type":"debug","z":"85528abd.1ee708","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","x":2270,"y":440,"wires":[]},{"id":"c69979a8.98b0e8","type":"function","z":"85528abd.1ee708","name":"21, 22(상한값)","func":"var result = parseInt(msg.payload[20].concat(msg.payload[21]), 16) ;\nmsg.payload = result ;\nreturn msg ;\n","outputs":1,"noerr":0,"x":2080,"y":500,"wires":[["c2e11e23.b4ef1"]]},{"id":"c2e11e23.b4ef1","type":"debug","z":"85528abd.1ee708","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","x":2270,"y":500,"wires":[]},{"id":"44faea81.c02314","type":"function","z":"85528abd.1ee708","name":"23, 24(하한값)","func":"var result = parseInt(msg.payload[22].concat(msg.payload[23]), 16) ;\nmsg.payload = result ;\nreturn msg ;\n","outputs":1,"noerr":0,"x":2080,"y":560,"wires":[["ac896255.79227"]]},{"id":"ac896255.79227","type":"debug","z":"85528abd.1ee708","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","x":2270,"y":560,"wires":[]},{"id":"744bbdf.6749744","type":"function","z":"85528abd.1ee708","name":"4, 5(목표수량)","func":"var result = parseInt(msg.payload[3].concat(msg.payload[4]), 16) ;\nmsg.payload = result ;\nreturn msg ;\n","outputs":1,"noerr":0,"x":2080,"y":620,"wires":[["d212d2f3.ecaa6"]]},{"id":"d212d2f3.ecaa6","type":"debug","z":"85528abd.1ee708","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","x":2270,"y":620,"wires":[]},{"id":"aa54ecfe.5b89a","type":"function","z":"85528abd.1ee708","name":"7, 8(생산수량)","func":"var result = parseInt(msg.payload[5].concat(msg.payload[6]), 16) ;\nmsg.payload = result ;\nreturn msg ;\n","outputs":1,"noerr":0,"x":2080,"y":680,"wires":[["d983af43.b1d6d"]]},{"id":"d983af43.b1d6d","type":"debug","z":"85528abd.1ee708","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","x":2270,"y":680,"wires":[]},{"id":"b857d597.490808","type":"function","z":"85528abd.1ee708","name":"11, 12(양품수량)","func":"var result = parseInt(msg.payload[10].concat(msg.payload[11]), 16) ;\nmsg.payload = result ;\nreturn msg ;\n","outputs":1,"noerr":0,"x":2080,"y":740,"wires":[["7fdd363c.931b18"]]},{"id":"7fdd363c.931b18","type":"debug","z":"85528abd.1ee708","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","x":2270,"y":740,"wires":[]},{"id":"45fea905.a25438","type":"function","z":"85528abd.1ee708","name":"6(캐비티수량)","func":"var result = parseInt(msg.payload[5], 16) ;\nmsg.payload = result ;\nreturn msg ;\n","outputs":1,"noerr":0,"x":2080,"y":800,"wires":[["123ecc51.285e04"]]},{"id":"123ecc51.285e04","type":"debug","z":"85528abd.1ee708","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","x":2270,"y":800,"wires":[]},{"id":"4b235c3a.7b01b4","type":"function","z":"85528abd.1ee708","name":"실적 Data Array","func":"var str = msg.payload ;\nvar resultlist = [] ;\n\nfor (i = 0; i<str.length; i++) {\n  hex = str.charCodeAt(i).toString(16);\n  resultlist.push((\"0\"+hex).slice(-2)) ;\n}\nif (resultlist[1] == \"06\") {\n    msg.payload = resultlist ;\n     return msg;\n}","outputs":1,"noerr":0,"x":1780,"y":620,"wires":[["744bbdf.6749744","45fea905.a25438","aa54ecfe.5b89a","b857d597.490808"]]},{"id":"2dd736ea.673cfa","type":"serial in","z":"85528abd.1ee708","d":true,"name":"","serial":"1a302ef9.aa4741","x":1570,"y":340,"wires":[["f173995d.9f1288","4b235c3a.7b01b4"]]},{"id":"59026303.9d882c","type":"ui_gauge","z":"85528abd.1ee708","name":"gauge1","group":"eae34b37.171748","order":4,"width":0,"height":0,"gtype":"gage","title":"gauge1","label":"units","format":"{{value}}","min":0,"max":"100","colors":["#0000ff","#008040","#ca3838"],"seg1":"","seg2":"","x":370,"y":420,"wires":[]},{"id":"87f15cdd.51643","type":"function","z":"85528abd.1ee708","name":"목표수량","func":"msg.payload=msg.payload.plan\nmsg.topic=\"plan\"\nreturn msg;","outputs":1,"noerr":0,"x":410,"y":1020,"wires":[["f17ab314.44972","a4699baa.d26ae8","c201321a.98a0e"]]},{"id":"5e3cb502.418e4c","type":"function","z":"85528abd.1ee708","name":"생산하지 않은 수량","func":"msg.payload=msg.payload.yet\nmsg.topic=\"yet\"\nreturn msg;","outputs":1,"noerr":0,"x":440,"y":1100,"wires":[["f29b1058.113bb"]]},{"id":"3b9117c5.7d94b8","type":"function","z":"85528abd.1ee708","name":"불량 수량","func":"msg.payload=msg.payload.failure\nmsg.topic=\"failure\"\nreturn msg;\n","outputs":1,"noerr":0,"x":410,"y":980,"wires":[["f733d27c.bd18a","a4699baa.d26ae8"]]},{"id":"19cc2c9.6108dd3","type":"function","z":"85528abd.1ee708","name":"양품 수량","func":"msg.payload=msg.payload.good\nmsg.topic=\"good\"\nreturn msg;","outputs":1,"noerr":0,"x":410,"y":940,"wires":[["a4699baa.d26ae8","f29b1058.113bb"]]},{"id":"465c12f9.5d59cc","type":"function","z":"85528abd.1ee708","name":"생산수량","func":"msg.payload=msg.payload.produce\nmsg.topic=\"produce\"\nreturn msg;","outputs":1,"noerr":0,"x":410,"y":900,"wires":[["4f80ad14.7710e4"]]},{"id":"beea09f2.970a58","type":"function","z":"85528abd.1ee708","name":"생산해야할 수량","func":"msg.payload=msg.payload.toproduce\nmsg.topic=\"toproduce\"\nreturn msg","outputs":1,"noerr":0,"x":430,"y":1060,"wires":[[]]},{"id":"7783991e.f47928","type":"function","z":"85528abd.1ee708","name":"캐비티 계산","func":"var toproduce=msg.payload.toproduce\nvar cavity=msg.payload.cavity\nmsg={payload:(toproduce/cavity)}\nreturn msg;","outputs":1,"noerr":0,"x":420,"y":820,"wires":[[]]},{"id":"f733d27c.bd18a","type":"ui_text","z":"85528abd.1ee708","group":"789dd9f.aa3c728","order":1,"width":0,"height":0,"name":"","label":"불량","format":"{{msg.payload}}개","layout":"row-spread","x":560,"y":980,"wires":[]},{"id":"eaeae8d4.cadcb8","type":"function","z":"85528abd.1ee708","name":"zone 3","func":"var middle = msg.payload.zone3.settemp ;\nvar minus = msg.payload.zone3.lower ;\nvar plus = msg.payload.zone3.upper ;\nvar nowtemp = msg.payload.zone3.nowtemp ;\n\n\nmsg ={payload:nowtemp,ui_control:{min:middle-(minus*2),max:(middle+(plus*2)),seg1:(middle-minus),seg2:(middle+plus)}};\nreturn msg","outputs":1,"noerr":0,"x":220,"y":500,"wires":[["f6455353.bb9f1","7786b131.5d15c"]]},{"id":"9ebaf307.28d4","type":"function","z":"85528abd.1ee708","name":"zone 5","func":"var middle = msg.payload.zone5.settemp ;\nvar minus = msg.payload.zone5.lower ;\nvar plus = msg.payload.zone5.upper ;\nvar nowtemp = msg.payload.zone5.nowtemp ;\n\n\nmsg ={payload:nowtemp,ui_control:{min:middle-(minus*2),max:(middle+(plus*2)),seg1:(middle-minus),seg2:(middle+plus)}};\nreturn msg","outputs":1,"noerr":0,"x":220,"y":580,"wires":[["5f554399.82271c","5d8456ed.cbddf8"]]},{"id":"46fbec66.109f84","type":"function","z":"85528abd.1ee708","name":"zone 7","func":"var middle = msg.payload.zone7.settemp ;\nvar minus = msg.payload.zone7.lower ;\nvar plus = msg.payload.zone7.upper ;\nvar nowtemp = msg.payload.zone7.nowtemp ;\n\n\nmsg ={payload:nowtemp,ui_control:{min:middle-(minus*2),max:(middle+(plus*2)),seg1:(middle-minus),seg2:(middle+plus)}};\nreturn msg","outputs":1,"noerr":0,"x":220,"y":660,"wires":[["5fe08048.52c37","7c7910e2.1064b"]]},{"id":"8589d0bc.0bbe","type":"function","z":"85528abd.1ee708","name":"zone 9","func":"var middle = msg.payload.zone9.settemp ;\nvar minus = msg.payload.zone9.lower ;\nvar plus = msg.payload.zone9.upper ;\nvar nowtemp = msg.payload.zone9.nowtemp ;\n\n\nmsg ={payload:nowtemp,ui_control:{min:middle-(minus*2),max:(middle+(plus*2)),seg1:(middle-minus),seg2:(middle+plus)}};\nreturn msg","outputs":1,"noerr":0,"x":220,"y":740,"wires":[["d3b7a2d8.2face","dbda4b5a.cf2718"]]},{"id":"9201d8a3.5509e8","type":"function","z":"85528abd.1ee708","name":"zone 1","func":"var middle = msg.payload.zone1.settemp ;\nvar minus = msg.payload.zone1.lower ;\nvar plus = msg.payload.zone1.upper ;\nvar nowtemp = msg.payload.zone1.nowtemp ;\n\n\nmsg ={payload:nowtemp,ui_control:{min:middle-(minus*2),max:(middle+(plus*2)),seg1:(middle-minus),seg2:(middle+plus)}};\nreturn msg","outputs":1,"noerr":0,"x":220,"y":419,"wires":[["59026303.9d882c","6d3ed153.2fa3"]]},{"id":"ce0942fd.00737","type":"function","z":"85528abd.1ee708","name":"zone 4","func":"var middle = msg.payload.zone4.settemp ;\nvar minus = msg.payload.zone4.lower ;\nvar plus = msg.payload.zone4.upper ;\nvar nowtemp = msg.payload.zone4.nowtemp ;\n\n\nmsg ={payload:nowtemp,ui_control:{min:middle-(minus*2),max:(middle+(plus*2)),seg1:(middle-minus),seg2:(middle+plus)}};\nreturn msg","outputs":1,"noerr":0,"x":220,"y":540,"wires":[["6560e777.ef1588","5c96436e.61799c"]]},{"id":"72740956.530ec8","type":"function","z":"85528abd.1ee708","name":"zone 6","func":"var middle = msg.payload.zone6.settemp ;\nvar minus = msg.payload.zone6.lower ;\nvar plus = msg.payload.zone6.upper ;\nvar nowtemp = msg.payload.zone6.nowtemp ;\n\n\nmsg ={payload:nowtemp,ui_control:{min:middle-(minus*2),max:(middle+(plus*2)),seg1:(middle-minus),seg2:(middle+plus)}};\nreturn msg","outputs":1,"noerr":0,"x":220,"y":620,"wires":[["236cac33.8ebef4","513b2ea1.013c4"]]},{"id":"15660953.20d3a7","type":"function","z":"85528abd.1ee708","name":"zone 8","func":"var middle = msg.payload.zone8.settemp ;\nvar minus = msg.payload.zone8.lower ;\nvar plus = msg.payload.zone8.upper ;\nvar nowtemp = msg.payload.zone8.nowtemp ;\n\n\nmsg ={payload:nowtemp,ui_control:{min:middle-(minus*2),max:(middle+(plus*2)),seg1:(middle-minus),seg2:(middle+plus)}};\nreturn msg","outputs":1,"noerr":0,"x":220,"y":700,"wires":[["e056cf39.d5636","af6e050.5e9a7f8"]]},{"id":"99678dfd.52155","type":"function","z":"85528abd.1ee708","name":"zone 10","func":"var middle = msg.payload.zone10.settemp ;\nvar minus = msg.payload.zone10.lower ;\nvar plus = msg.payload.zone10.upper ;\nvar nowtemp = msg.payload.zone10.nowtemp ;\n\n\nmsg ={payload:nowtemp,ui_control:{min:middle-(minus*2),max:(middle+(plus*2)),seg1:(middle-minus),seg2:(middle+plus)}};\nreturn msg","outputs":1,"noerr":0,"x":230,"y":780,"wires":[["1c9ba65f.d9094a","14422f8b.c9964"]]},{"id":"4c78b381.a6695c","type":"function","z":"85528abd.1ee708","name":"zone 2","func":"var middle = msg.payload.zone2.settemp ;\nvar minus = msg.payload.zone2.lower ;\nvar plus = msg.payload.zone2.upper ;\nvar nowtemp = msg.payload.zone2.nowtemp ;\n\n\nmsg ={payload:nowtemp,ui_control:{min:middle-(minus*2),max:(middle+(plus*2)),seg1:(middle-minus),seg2:(middle+plus)}};\nreturn msg","outputs":1,"noerr":0,"x":220,"y":460,"wires":[["288fe048.5850c","9dcf8097.6d211"]]},{"id":"371935c4.d5a90a","type":"function","z":"85528abd.1ee708","name":"zone 11","func":"var myjson={\n  \"yet\": \"\",\n  \"failure\": \"\",\n  \"toproduce\": \"\",\n  \"good\": \"\",\n  \"produce\": \"\",\n  \"plan\": \"\",\n  \"cavity\": \"\"\n};\n\nvar plan=msg.payload.zone11.planqty;\nvar good=msg.payload.zone11.goodqty;\nvar prod=msg.payload.zone11.prodqty;\nvar cavity=msg.payload.zone11.cavity;\n\nmyjson.yet=plan-prod;\nmyjson.failure=prod-good;\nmyjson.toproduce=myjson.yet+myjson.failure;\nmyjson.good=good;\nmyjson.produce=prod;\nmyjson.plan=plan;\nmyjson.cavity=cavity;\n\nmsg.payload=myjson;\n\nreturn msg;","outputs":1,"noerr":0,"x":230,"y":820,"wires":[["5e3cb502.418e4c","3b9117c5.7d94b8","19cc2c9.6108dd3","465c12f9.5d59cc","87f15cdd.51643","beea09f2.970a58","7783991e.f47928","832df440.dede88"]]},{"id":"f17ab314.44972","type":"ui_text","z":"85528abd.1ee708","group":"789dd9f.aa3c728","order":3,"width":0,"height":0,"name":"","label":"목표","format":"{{msg.payload}}개","layout":"row-spread","x":560,"y":1020,"wires":[]},{"id":"4f80ad14.7710e4","type":"ui_text","z":"85528abd.1ee708","group":"789dd9f.aa3c728","order":4,"width":0,"height":0,"name":"","label":"현재 생산","format":"{{msg.payload}}개","layout":"row-spread","x":570,"y":900,"wires":[]},{"id":"ec9c0ea4.e0038","type":"ui_text","z":"85528abd.1ee708","group":"789dd9f.aa3c728","order":2,"width":0,"height":0,"name":"","label":"캐비티","format":"{{msg.payload}}","layout":"row-spread","x":560,"y":860,"wires":[]},{"id":"832df440.dede88","type":"function","z":"85528abd.1ee708","name":"캐비티","func":"var cavity=msg.payload.cavity\nmsg.payload=cavity\nreturn msg;","outputs":1,"noerr":0,"x":400,"y":860,"wires":[["ec9c0ea4.e0038"]]},{"id":"f27f3d3b.ab61","type":"chartjs-polar","z":"85528abd.1ee708","name":"Population Chart","path":"POL","charttitle":"Population Chart","xaxis":"product","yaxis":"Percentage [%]","x":720,"y":940,"wires":[[]]},{"id":"a4699baa.d26ae8","type":"function","z":"85528abd.1ee708","name":"","func":"\nvar failure = context.get(\"lastinputf\") || \"\";\nvar passed = context.get(\"lastinputp\") || \"\";\nvar goal = context.get(\"lastinputg\")||\"\";\n\nif (msg.topic==\"failure\")   {\n    failure=msg.payload;\n    context.set(\"lastinputf\",failure);\n}\n\nelse if (msg.topic==\"good\")  {\n    passed=msg.payload;\n    context.set(\"lastinputp\",passed);\n}\n\nelse if (msg.topic==\"plan\")   {\n    goal=msg.payload;\n    context.set(\"lastinputg\",goal);\n}\n\nmsg.payload={\"channel\":\"charts\",\"color\":[\"Black\",\"Green\",\"Red\"],\"dataset\":[{\"x\":\"plan\",\"y\":goal},{\"x\":\"good\",\"y\":passed},{\"x\":\"failure\",\"y\":failure}]}\nreturn msg","outputs":1,"noerr":0,"x":560,"y":940,"wires":[["f27f3d3b.ab61"]]},{"id":"72230848.f8e8e8","type":"link in","z":"85528abd.1ee708","name":"","links":["f18b0d1c.f02a1","6073d3a.3db962c","46cad1ba.0acc2","cce47b98.121d48","38eae536.a5252a"],"x":105,"y":420,"wires":[["9201d8a3.5509e8","4c78b381.a6695c","eaeae8d4.cadcb8","ce0942fd.00737","9ebaf307.28d4","72740956.530ec8","46fbec66.109f84","15660953.20d3a7","8589d0bc.0bbe","99678dfd.52155","371935c4.d5a90a","3444d97d.39b596","e56293.575fbd7","cc40bdf1.f5f7d","40fa7e6b.d6571","f7ffdcf7.cb3e4","7d8dbd95.92fba4","b68d90f4.99c65","597dc448.082a4c","55323176.2ef22","81be331c.61c2","ff0dfe57.041eb","f7b05112.0f962","fecfddec.e61db","c375f994.516dd8","d848e7cc.0d71c8","2b4fde61.ba4b42","5220652.97fc19c","f8dac53e.7a5478","193932e3.97c50d","7a28708e.41d52","2ee563bc.9561cc","c67e2780.e53f68","c19cf2a4.2186","9d1fa85c.197398","7c5dfb4f.c35ee4","309fc0e.437c14","a19d46c5.e06fc8","a9fd8b79.bfe0b8","a1ea384b.f7d748","77126ee3.58b99"]]},{"id":"9dcf8097.6d211","type":"ui_chart","z":"85528abd.1ee708","name":"chart2","group":"ac9d0284.43283","order":3,"width":0,"height":0,"label":"chart2","chartType":"line","legend":"false","xformat":"auto","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"100","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":1320,"y":1000,"wires":[[]]},{"id":"7786b131.5d15c","type":"ui_chart","z":"85528abd.1ee708","name":"chart3","group":"81b20455.cb6bc8","order":4,"width":0,"height":0,"label":"chart3","chartType":"line","legend":"false","xformat":"auto","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"100","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":1320,"y":1040,"wires":[[]]},{"id":"5c96436e.61799c","type":"ui_chart","z":"85528abd.1ee708","name":"chart4","group":"81b20455.cb6bc8","order":8,"width":0,"height":0,"label":"chart4","chartType":"line","legend":"false","xformat":"auto","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"100","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":1320,"y":1080,"wires":[[]]},{"id":"5d8456ed.cbddf8","type":"ui_chart","z":"85528abd.1ee708","name":"chart5","group":"4bcba4ce.7d9dac","order":4,"width":0,"height":0,"label":"chart5","chartType":"line","legend":"false","xformat":"auto","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"100","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":1320,"y":1120,"wires":[[]]},{"id":"513b2ea1.013c4","type":"ui_chart","z":"85528abd.1ee708","name":"chart6","group":"4bcba4ce.7d9dac","order":5,"width":0,"height":0,"label":"chart6","chartType":"line","legend":"false","xformat":"auto","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"100","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":1320,"y":1160,"wires":[[]]},{"id":"7c7910e2.1064b","type":"ui_chart","z":"85528abd.1ee708","name":"chart7","group":"ad98a6d0.152e48","order":6,"width":0,"height":0,"label":"chart7","chartType":"line","legend":"false","xformat":"auto","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":1320,"y":1200,"wires":[[]]},{"id":"af6e050.5e9a7f8","type":"ui_chart","z":"85528abd.1ee708","name":"chart8","group":"ad98a6d0.152e48","order":7,"width":0,"height":0,"label":"chart8","chartType":"line","legend":"false","xformat":"auto","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"100","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":1320,"y":1240,"wires":[[]]},{"id":"dbda4b5a.cf2718","type":"ui_chart","z":"85528abd.1ee708","name":"chart9","group":"fa89f239.ba7c8","order":8,"width":0,"height":0,"label":"chart9","chartType":"line","legend":"false","xformat":"auto","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"100","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":1320,"y":1280,"wires":[[]]},{"id":"14422f8b.c9964","type":"ui_chart","z":"85528abd.1ee708","name":"chart10","group":"fa89f239.ba7c8","order":9,"width":0,"height":0,"label":"chart10","chartType":"line","legend":"false","xformat":"auto","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"100","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":1330,"y":1320,"wires":[[]]},{"id":"d032ec3f.85ab5","type":"ui_dropdown","z":"85528abd.1ee708","name":"","label":"","tooltip":"","place":"Select option","group":"ac9d0284.43283","order":0,"width":0,"height":0,"passthru":true,"options":[{"label":"초","value":"s","type":"str"},{"label":"분","value":"mm","type":"str"},{"label":"시간","value":"HH","type":"str"},{"label":"일/달","value":"D/M","type":"str"},{"label":"년","value":"YYYY","type":"str"}],"payload":"","topic":"dropdown","x":970,"y":960,"wires":[["a02d1a3a.a2c678","3a9ef5ef.e0114a"]]},{"id":"6d3ed153.2fa3","type":"ui_chart","z":"85528abd.1ee708","name":"chart1","group":"ac9d0284.43283","order":1,"width":0,"height":0,"label":"chart1","chartType":"line","legend":"false","xformat":"auto","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"100","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":1320,"y":960,"wires":[[]]},{"id":"a02d1a3a.a2c678","type":"function","z":"85528abd.1ee708","name":"","func":"var xaxis = context.get(\"lastinputx\") || \"\";\n\nif(msg.topic == \"dropdown\"){\n    xaxis=msg.payload;\n    context.set(\"lastinputx\",xaxis);\n}\n\n\n\nmsg={ui_control:{xformat:xaxis}};\nreturn msg;","outputs":1,"noerr":0,"x":1140,"y":960,"wires":[["6d3ed153.2fa3"]]},{"id":"3a9ef5ef.e0114a","type":"function","z":"85528abd.1ee708","name":"","func":"var xaxis = context.get(\"lastinputx\") || \"\";\n\nif(msg.topic == \"dropdown\"){\n    xaxis=msg.payload;\n    context.set(\"lastinputx\",xaxis);\n}\n\n\n\n\nmsg={ui_control:{xformat:xaxis}};\nreturn msg;","outputs":1,"noerr":0,"x":1140,"y":1000,"wires":[["9dcf8097.6d211"]]},{"id":"36f4fd59.57cab2","type":"function","z":"85528abd.1ee708","name":"","func":"var xaxis = context.get(\"lastinputx\") || \"\";\n\nif(msg.topic == \"dropdown\"){\n    xaxis=msg.payload;\n    context.set(\"lastinputx\",xaxis);\n}\n\n\nmsg={ui_control:{xformat:xaxis}};\nreturn msg;","outputs":1,"noerr":0,"x":1140,"y":1040,"wires":[["7786b131.5d15c"]]},{"id":"85e7b513.958f78","type":"ui_dropdown","z":"85528abd.1ee708","name":"","label":"","tooltip":"","place":"Select option","group":"81b20455.cb6bc8","order":0,"width":0,"height":0,"passthru":true,"options":[{"label":"초","value":"s","type":"str"},{"label":"분","value":"mm","type":"str"},{"label":"시간","value":"HH","type":"str"},{"label":"일/달","value":"D/M","type":"str"},{"label":"년","value":"YYYY","type":"str"}],"payload":"","topic":"dropdown","x":970,"y":1040,"wires":[["36f4fd59.57cab2","8256eee6.1a1bf"]]},{"id":"5c40fbdf.4b9374","type":"ui_dropdown","z":"85528abd.1ee708","name":"","label":"","tooltip":"","place":"Select option","group":"4bcba4ce.7d9dac","order":0,"width":0,"height":0,"passthru":true,"options":[{"label":"초","value":"s","type":"str"},{"label":"분","value":"mm","type":"str"},{"label":"시간","value":"HH","type":"str"},{"label":"일/달","value":"D/M","type":"str"},{"label":"년","value":"YYYY","type":"str"}],"payload":"","topic":"dropdown","x":970,"y":1120,"wires":[["da6c5d2.d90afa","98e9e62e.9a2bd8"]]},{"id":"979bae9c.e17d7","type":"ui_dropdown","z":"85528abd.1ee708","name":"","label":"","tooltip":"","place":"Select option","group":"ad98a6d0.152e48","order":0,"width":0,"height":0,"passthru":true,"options":[{"label":"초","value":"s","type":"str"},{"label":"분","value":"mm","type":"str"},{"label":"시간","value":"HH","type":"str"},{"label":"일/달","value":"D/M","type":"str"},{"label":"년","value":"YYYY","type":"str"}],"payload":"","topic":"dropdown","x":970,"y":1200,"wires":[["80ae582c.41b448","83c18337.88a0e"]]},{"id":"6703015a.4960a","type":"ui_dropdown","z":"85528abd.1ee708","name":"","label":"","tooltip":"","place":"Select option","group":"fa89f239.ba7c8","order":0,"width":0,"height":0,"passthru":true,"options":[{"label":"초","value":"s","type":"str"},{"label":"분","value":"mm","type":"str"},{"label":"시간","value":"HH","type":"str"},{"label":"일/달","value":"D/M","type":"str"},{"label":"년","value":"YYYY","type":"str"}],"payload":"","topic":"dropdown","x":970,"y":1280,"wires":[["3dd9487e.2f4c98","d51e0cd6.38132"]]},{"id":"8256eee6.1a1bf","type":"function","z":"85528abd.1ee708","name":"","func":"var xaxis = context.get(\"lastinputx\") || \"\";\n\nif(msg.topic == \"dropdown\"){\n    xaxis=msg.payload;\n    context.set(\"lastinputx\",xaxis);\n}\n\n\nmsg={ui_control:{xformat:xaxis}};\nreturn msg;","outputs":1,"noerr":0,"x":1140,"y":1080,"wires":[["5c96436e.61799c"]]},{"id":"da6c5d2.d90afa","type":"function","z":"85528abd.1ee708","name":"","func":"var xaxis = context.get(\"lastinputx\") || \"\";\n\nif(msg.topic == \"dropdown\"){\n    xaxis=msg.payload;\n    context.set(\"lastinputx\",xaxis);\n}\n\n\nmsg={ui_control:{xformat:xaxis}};\nreturn msg;","outputs":1,"noerr":0,"x":1140,"y":1120,"wires":[["5d8456ed.cbddf8"]]},{"id":"98e9e62e.9a2bd8","type":"function","z":"85528abd.1ee708","name":"","func":"var xaxis = context.get(\"lastinputx\") || \"\";\n\nif(msg.topic == \"dropdown\"){\n    xaxis=msg.payload;\n    context.set(\"lastinputx\",xaxis);\n}\n\n\nmsg={ui_control:{xformat:xaxis}};\nreturn msg;","outputs":1,"noerr":0,"x":1140,"y":1160,"wires":[["513b2ea1.013c4"]]},{"id":"80ae582c.41b448","type":"function","z":"85528abd.1ee708","name":"","func":"var xaxis = context.get(\"lastinputx\") || \"\";\n\nif(msg.topic == \"dropdown\"){\n    xaxis=msg.payload;\n    context.set(\"lastinputx\",xaxis);\n}\n\n\nmsg={ui_control:{xformat:xaxis}};\nreturn msg;","outputs":1,"noerr":0,"x":1140,"y":1200,"wires":[["7c7910e2.1064b"]]},{"id":"83c18337.88a0e","type":"function","z":"85528abd.1ee708","name":"","func":"var xaxis = context.get(\"lastinputx\") || \"\";\n\nif(msg.topic == \"dropdown\"){\n    xaxis=msg.payload;\n    context.set(\"lastinputx\",xaxis);\n}\n\n\nmsg={ui_control:{xformat:xaxis}};\nreturn msg;","outputs":1,"noerr":0,"x":1140,"y":1240,"wires":[["af6e050.5e9a7f8"]]},{"id":"3dd9487e.2f4c98","type":"function","z":"85528abd.1ee708","name":"","func":"var xaxis = context.get(\"lastinputx\") || \"\";\n\nif(msg.topic == \"dropdown\"){\n    xaxis=msg.payload;\n    context.set(\"lastinputx\",xaxis);\n}\n\n\nmsg={ui_control:{xformat:xaxis}};\nreturn msg;","outputs":1,"noerr":0,"x":1140,"y":1280,"wires":[["dbda4b5a.cf2718"]]},{"id":"d51e0cd6.38132","type":"function","z":"85528abd.1ee708","name":"","func":"var xaxis = context.get(\"lastinputx\") || \"\";\n\nif(msg.topic == \"dropdown\"){\n    xaxis=msg.payload;\n    context.set(\"lastinputx\",xaxis);\n}\n\n\nmsg={ui_control:{xformat:xaxis}};\nreturn msg;","outputs":1,"noerr":0,"x":1140,"y":1320,"wires":[["14422f8b.c9964"]]},{"id":"d8720461.91f728","type":"ui_button","z":"85528abd.1ee708","name":"","group":"f9e7f15d.f3344","order":0,"width":0,"height":0,"passthru":false,"label":"clear","tooltip":"","color":"","bgcolor":"","icon":"","payload":"[]","payloadType":"json","topic":"","x":1140,"y":920,"wires":[["6d3ed153.2fa3","9dcf8097.6d211","7786b131.5d15c","5c96436e.61799c","5d8456ed.cbddf8","513b2ea1.013c4","7c7910e2.1064b","af6e050.5e9a7f8","dbda4b5a.cf2718","14422f8b.c9964"]]},{"id":"be9e6f68.26243","type":"inject","z":"85528abd.1ee708","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":360,"wires":[["b99597bf.3a0a28"]]},{"id":"b99597bf.3a0a28","type":"function","z":"85528abd.1ee708","name":"예시데이터","func":"msg.payload = {\n  \"zone1\": {\n    \"nowtemp\": 25.2,\n    \"settemp\": 25.7,\n    \"upper\": 6,\n    \"lower\": 6\n  },\n  \"zone2\": {\n    \"nowtemp\": 24.2,\n    \"settemp\": 25.7,\n    \"upper\": 6,\n    \"lower\": 6\n  },\n  \"zone3\": {\n    \"nowtemp\": 25.5,\n    \"settemp\": 25.7,\n    \"upper\": 3,\n    \"lower\": 3\n  },\n  \"zone4\": {\n    \"nowtemp\": 25.5,\n    \"settemp\": 25.7,\n    \"upper\": 3,\n    \"lower\": 3\n  },\n  \"zone5\": {\n    \"nowtemp\": 26.5,\n    \"settemp\": 25.7,\n    \"upper\": 3,\n    \"lower\": 3\n  },\n  \"zone6\": {\n    \"nowtemp\": 26.5,\n    \"settemp\": 25.7,\n    \"upper\": 3,\n    \"lower\": 3\n  },\n  \"zone7\": {\n    \"nowtemp\": 26.7,\n    \"settemp\": 25.7,\n    \"upper\": 3,\n    \"lower\": 3\n  },\n  \"zone8\": {\n    \"nowtemp\": 27,\n    \"settemp\": 25.7,\n    \"upper\": 3,\n    \"lower\": 3\n  },\n  \"zone9\": {\n    \"nowtemp\": 27.2,\n    \"settemp\": 25.7,\n    \"upper\": 5,\n    \"lower\": 5\n  },\n  \"zone10\": {\n    \"nowtemp\": 27.2,\n    \"settemp\": 25.7,\n    \"upper\": 5,\n    \"lower\": 5\n  },\n  \"zone11\": {\n    \"planqty\": 2000,\n    \"prodqty\": 208,\n    \"goodqty\": 208,\n    \"cavity\": 2\n  }\n} ;\nreturn msg;","outputs":1,"noerr":0,"x":290,"y":360,"wires":[["cce47b98.121d48"]]},{"id":"cce47b98.121d48","type":"link out","z":"85528abd.1ee708","name":"","links":["72230848.f8e8e8"],"x":405,"y":360,"wires":[]},{"id":"40fa7e6b.d6571","type":"ui_text","z":"85528abd.1ee708","group":"56410aab.07cf74","order":1,"width":0,"height":0,"name":"","label":"set : ","format":"{{msg.payload.zone2.settemp}}","layout":"row-center","x":520,"y":460,"wires":[]},{"id":"f7ffdcf7.cb3e4","type":"ui_text","z":"85528abd.1ee708","group":"56410aab.07cf74","order":2,"width":0,"height":0,"name":"","label":"HL : ","format":"{{msg.payload.zone2.upper}}","layout":"row-center","x":640,"y":460,"wires":[]},{"id":"7d8dbd95.92fba4","type":"ui_text","z":"85528abd.1ee708","group":"56410aab.07cf74","order":3,"width":0,"height":0,"name":"","label":"LL : ","format":"{{-msg.payload.zone2.lower}}","layout":"row-center","x":760,"y":460,"wires":[]},{"id":"3444d97d.39b596","type":"ui_text","z":"85528abd.1ee708","group":"eae34b37.171748","order":1,"width":0,"height":0,"name":"","label":"set : ","format":"{{msg.payload.zone1.settemp}}","layout":"row-center","x":520,"y":420,"wires":[]},{"id":"e56293.575fbd7","type":"ui_text","z":"85528abd.1ee708","group":"eae34b37.171748","order":2,"width":0,"height":0,"name":"","label":"HL : ","format":"{{msg.payload.zone1.upper}}","layout":"row-center","x":640,"y":420,"wires":[]},{"id":"cc40bdf1.f5f7d","type":"ui_text","z":"85528abd.1ee708","group":"eae34b37.171748","order":3,"width":0,"height":0,"name":"","label":"LL : ","format":"{{-msg.payload.zone1.lower}}","layout":"row-center","x":760,"y":420,"wires":[]},{"id":"b68d90f4.99c65","type":"ui_text","z":"85528abd.1ee708","group":"1e6fc764.7466d9","order":1,"width":0,"height":0,"name":"","label":"set : ","format":"{{msg.payload.zone3.settemp}}","layout":"row-center","x":520,"y":500,"wires":[]},{"id":"597dc448.082a4c","type":"ui_text","z":"85528abd.1ee708","group":"1e6fc764.7466d9","order":2,"width":0,"height":0,"name":"","label":"HL : ","format":"{{msg.payload.zone3.upper}}","layout":"row-center","x":640,"y":500,"wires":[]},{"id":"55323176.2ef22","type":"ui_text","z":"85528abd.1ee708","group":"1e6fc764.7466d9","order":3,"width":0,"height":0,"name":"","label":"LL : ","format":"{{-msg.payload.zone3.lower}}","layout":"row-center","x":760,"y":500,"wires":[]},{"id":"81be331c.61c2","type":"ui_text","z":"85528abd.1ee708","group":"7c31c468.c2299c","order":1,"width":0,"height":0,"name":"","label":"set : ","format":"{{msg.payload.zone4.settemp}}","layout":"row-center","x":520,"y":540,"wires":[]},{"id":"ff0dfe57.041eb","type":"ui_text","z":"85528abd.1ee708","group":"7c31c468.c2299c","order":2,"width":0,"height":0,"name":"","label":"HL : ","format":"{{msg.payload.zone4.upper}}","layout":"row-center","x":640,"y":540,"wires":[]},{"id":"f7b05112.0f962","type":"ui_text","z":"85528abd.1ee708","group":"7c31c468.c2299c","order":3,"width":0,"height":0,"name":"","label":"LL : ","format":"{{-msg.payload.zone4.lower}}","layout":"row-center","x":760,"y":540,"wires":[]},{"id":"fecfddec.e61db","type":"ui_text","z":"85528abd.1ee708","group":"3fc002bb.fca0fe","order":1,"width":0,"height":0,"name":"","label":"set : ","format":"{{msg.payload.zone5.settemp}}","layout":"row-center","x":520,"y":580,"wires":[]},{"id":"c375f994.516dd8","type":"ui_text","z":"85528abd.1ee708","group":"3fc002bb.fca0fe","order":2,"width":0,"height":0,"name":"","label":"HL : ","format":"{{msg.payload.zone5.upper}}","layout":"row-center","x":640,"y":580,"wires":[]},{"id":"d848e7cc.0d71c8","type":"ui_text","z":"85528abd.1ee708","group":"3fc002bb.fca0fe","order":3,"width":0,"height":0,"name":"","label":"LL : ","format":"{{-msg.payload.zone5.lower}}","layout":"row-center","x":760,"y":580,"wires":[]},{"id":"2b4fde61.ba4b42","type":"ui_text","z":"85528abd.1ee708","group":"e2bbf342.b16cd","order":1,"width":0,"height":0,"name":"","label":"set : ","format":"{{msg.payload.zone6.settemp}}","layout":"row-center","x":520,"y":620,"wires":[]},{"id":"2ee563bc.9561cc","type":"ui_text","z":"85528abd.1ee708","group":"e2bbf342.b16cd","order":2,"width":0,"height":0,"name":"","label":"HL : ","format":"{{msg.payload.zone6.upper}}","layout":"row-center","x":640,"y":620,"wires":[]},{"id":"309fc0e.437c14","type":"ui_text","z":"85528abd.1ee708","group":"e2bbf342.b16cd","order":3,"width":0,"height":0,"name":"","label":"LL : ","format":"{{-msg.payload.zone6.lower}}","layout":"row-center","x":760,"y":620,"wires":[]},{"id":"5220652.97fc19c","type":"ui_text","z":"85528abd.1ee708","group":"bd1f1ac1.0bec58","order":1,"width":0,"height":0,"name":"","label":"set : ","format":"{{msg.payload.zone7.settemp}}","layout":"row-center","x":520,"y":660,"wires":[]},{"id":"c67e2780.e53f68","type":"ui_text","z":"85528abd.1ee708","group":"bd1f1ac1.0bec58","order":2,"width":0,"height":0,"name":"","label":"HL : ","format":"{{msg.payload.zone7.upper}}","layout":"row-center","x":640,"y":660,"wires":[]},{"id":"a19d46c5.e06fc8","type":"ui_text","z":"85528abd.1ee708","group":"bd1f1ac1.0bec58","order":3,"width":0,"height":0,"name":"","label":"LL : ","format":"{{-msg.payload.zone7.lower}}","layout":"row-center","x":760,"y":660,"wires":[]},{"id":"f8dac53e.7a5478","type":"ui_text","z":"85528abd.1ee708","group":"ce652b23.b57588","order":1,"width":0,"height":0,"name":"","label":"set : ","format":"{{msg.payload.zone8.settemp}}","layout":"row-center","x":520,"y":700,"wires":[]},{"id":"c19cf2a4.2186","type":"ui_text","z":"85528abd.1ee708","group":"ce652b23.b57588","order":2,"width":0,"height":0,"name":"","label":"HL : ","format":"{{msg.payload.zone8.upper}}","layout":"row-center","x":640,"y":700,"wires":[]},{"id":"a9fd8b79.bfe0b8","type":"ui_text","z":"85528abd.1ee708","group":"ce652b23.b57588","order":3,"width":0,"height":0,"name":"","label":"LL : ","format":"{{-msg.payload.zone8.lower}}","layout":"row-center","x":760,"y":700,"wires":[]},{"id":"193932e3.97c50d","type":"ui_text","z":"85528abd.1ee708","group":"3d215e9d.798c82","order":1,"width":0,"height":0,"name":"","label":"set : ","format":"{{msg.payload.zone9.settemp}}","layout":"row-center","x":520,"y":740,"wires":[]},{"id":"9d1fa85c.197398","type":"ui_text","z":"85528abd.1ee708","group":"3d215e9d.798c82","order":2,"width":0,"height":0,"name":"","label":"HL : ","format":"{{msg.payload.zone9.upper}}","layout":"row-center","x":640,"y":740,"wires":[]},{"id":"a1ea384b.f7d748","type":"ui_text","z":"85528abd.1ee708","group":"3d215e9d.798c82","order":3,"width":0,"height":0,"name":"","label":"LL : ","format":"{{-msg.payload.zone9.lower}}","layout":"row-center","x":760,"y":740,"wires":[]},{"id":"7a28708e.41d52","type":"ui_text","z":"85528abd.1ee708","group":"8a1a58f3.328f68","order":1,"width":0,"height":0,"name":"","label":"set : ","format":"{{msg.payload.zone10.settemp}}","layout":"row-center","x":520,"y":780,"wires":[]},{"id":"7c5dfb4f.c35ee4","type":"ui_text","z":"85528abd.1ee708","group":"8a1a58f3.328f68","order":2,"width":0,"height":0,"name":"","label":"HL : ","format":"{{msg.payload.zone10.upper}}","layout":"row-center","x":640,"y":780,"wires":[]},{"id":"77126ee3.58b99","type":"ui_text","z":"85528abd.1ee708","group":"8a1a58f3.328f68","order":3,"width":0,"height":0,"name":"","label":"LL : ","format":"{{-msg.payload.zone10.lower}}","layout":"row-center","x":760,"y":780,"wires":[]},{"id":"288fe048.5850c","type":"ui_gauge","z":"85528abd.1ee708","name":"gauge2","group":"56410aab.07cf74","order":4,"width":0,"height":0,"gtype":"gage","title":"gauge2","label":"units","format":"{{value}}","min":"0","max":"100","colors":["#0000a0","#008040","#ca3838"],"seg1":"","seg2":"","x":370,"y":462,"wires":[]},{"id":"f6455353.bb9f1","type":"ui_gauge","z":"85528abd.1ee708","name":"gauge3","group":"1e6fc764.7466d9","order":4,"width":0,"height":0,"gtype":"gage","title":"gauge3","label":"units","format":"{{value}}","min":0,"max":"100","colors":["#0000ff","#008040","#ca3838"],"seg1":"","seg2":"","x":370,"y":500,"wires":[]},{"id":"6560e777.ef1588","type":"ui_gauge","z":"85528abd.1ee708","name":"gauge4","group":"7c31c468.c2299c","order":4,"width":0,"height":0,"gtype":"gage","title":"gauge4","label":"units","format":"{{value}}","min":0,"max":"100","colors":["#0000ff","#008040","#ca3838"],"seg1":"","seg2":"","x":370,"y":540,"wires":[]},{"id":"5f554399.82271c","type":"ui_gauge","z":"85528abd.1ee708","name":"gauge5","group":"3fc002bb.fca0fe","order":4,"width":0,"height":0,"gtype":"gage","title":"gauge5","label":"units","format":"{{value}}","min":0,"max":"100","colors":["#0000ff","#008040","#ca3838"],"seg1":"","seg2":"","x":370,"y":580,"wires":[]},{"id":"236cac33.8ebef4","type":"ui_gauge","z":"85528abd.1ee708","name":"gauge6","group":"e2bbf342.b16cd","order":4,"width":0,"height":0,"gtype":"gage","title":"gauge6","label":"units","format":"{{value}}","min":0,"max":"100","colors":["#0000ff","#008040","#ca3838"],"seg1":"","seg2":"","x":370,"y":620,"wires":[]},{"id":"5fe08048.52c37","type":"ui_gauge","z":"85528abd.1ee708","name":"gauge7","group":"bd1f1ac1.0bec58","order":4,"width":0,"height":0,"gtype":"gage","title":"gauge7","label":"units","format":"{{value}}","min":0,"max":"100","colors":["#0000ff","#008040","#ca3838"],"seg1":"","seg2":"","x":370,"y":660,"wires":[]},{"id":"e056cf39.d5636","type":"ui_gauge","z":"85528abd.1ee708","name":"gauge8","group":"ce652b23.b57588","order":4,"width":0,"height":0,"gtype":"gage","title":"gauge8","label":"units","format":"{{value}}","min":0,"max":"100","colors":["#0000ff","#008040","#ca3838"],"seg1":"","seg2":"","x":370,"y":700,"wires":[]},{"id":"d3b7a2d8.2face","type":"ui_gauge","z":"85528abd.1ee708","name":"gauge9","group":"3d215e9d.798c82","order":4,"width":0,"height":0,"gtype":"gage","title":"gauge9","label":"units","format":"{{value}}","min":0,"max":"100","colors":["#0000ff","#008040","#ca3838"],"seg1":"","seg2":"","x":370,"y":740,"wires":[]},{"id":"1c9ba65f.d9094a","type":"ui_gauge","z":"85528abd.1ee708","name":"gauge10","group":"8a1a58f3.328f68","order":4,"width":0,"height":0,"gtype":"gage","title":"gauge10","label":"units","format":"{{value}}","min":0,"max":"100","colors":["#0000ff","#008040","#ca3838"],"seg1":"","seg2":"","x":370,"y":780,"wires":[]},{"id":"c201321a.98a0e","type":"debug","z":"85528abd.1ee708","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":640,"y":1060,"wires":[]},{"id":"f29b1058.113bb","type":"sum-bars","z":"85528abd.1ee708","name":"sum-bars","title":"","period":"topic","yMin":"auto","yMax":"auto","showBarsValue":true,"showScaleValue":true,"showSumValue":true,"maxBar":30,"topColor":"#ff0000","bottomColor":"#ffff00","unit":"","fontColor":"#aaaaaa","barStyle":"Rectangle","decimal":1,"x":630,"y":1100,"wires":[["66cb6ead.3bddc"]]},{"id":"66cb6ead.3bddc","type":"ui_template","z":"85528abd.1ee708","group":"789dd9f.aa3c728","name":"","order":5,"width":6,"height":6,"format":"<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":770,"y":1100,"wires":[[]]},{"id":"701af800.9327e8","type":"function","z":"5e8d60de.683be","d":true,"name":"TCP Client","func":"var require = global.get('require');\n\n// create an empty modbus client\nvar ModbusRTU = require(\"modbus-serial\");\nvar client = new ModbusRTU();\n\n// open connection to a tcp line\nclient.connectTCP(\"127.0.0.1\", { port: 10502 });\nclient.setID(1);\n\n// read the values of 1 registers starting at address 1003\n// on device number 1. and log the values to the console.\n\nsetInterval(function() {\n    client.readHoldingRegisters(0x03EB, 1, function(err, data) {\n        flow.set('tcp_data', data.data) ; //'tcp_data'를 전역변수로 설정하여 값을 저장\n    });\n}, 1000);\n","outputs":1,"noerr":0,"x":310,"y":980,"wires":[[]]},{"id":"e2510259.1db85","type":"inject","z":"5e8d60de.683be","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":140,"y":980,"wires":[["701af800.9327e8"]]},{"id":"e195ffc9.9984d","type":"debug","z":"5e8d60de.683be","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","x":510,"y":1020,"wires":[]},{"id":"75d8aa88.ffa434","type":"catch","z":"5e8d60de.683be","d":true,"name":"","scope":null,"uncaught":false,"x":1680,"y":40,"wires":[["a2199df8.600a"]]},{"id":"a2199df8.600a","type":"debug","z":"5e8d60de.683be","name":"","active":true,"tosidebar":true,"console":true,"tostatus":false,"complete":"true","targetType":"full","x":1830,"y":40,"wires":[]},{"id":"823ff7f.c433008","type":"modbus-read","z":"5e8d60de.683be","name":"현재수량","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"1","dataType":"InputRegister","adr":"1003","quantity":"1","rate":"1","rateUnit":"s","delayOnStart":false,"startDelayTime":"","server":"967edffa.aa3e7","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":120,"y":100,"wires":[["cc247cc8.e9a14"],[]]},{"id":"84866cc1.3954c","type":"modbus-read","z":"5e8d60de.683be","name":"목표수량","topic":"","showStatusActivities":false,"logIOActivities":false,"showErrors":false,"unitid":"1","dataType":"InputRegister","adr":"1006","quantity":"1","rate":"1","rateUnit":"s","delayOnStart":false,"startDelayTime":"","server":"967edffa.aa3e7","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":120,"y":140,"wires":[["8eba810e.bf278"],[]]},{"id":"a75b9a66.738d68","type":"inject","z":"5e8d60de.683be","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":140,"y":1020,"wires":[["84f4da0d.2a9908"]]},{"id":"84f4da0d.2a9908","type":"function","z":"5e8d60de.683be","d":true,"name":"read tcp property","func":"return {payload : flow.get('tcp_data')};","outputs":1,"noerr":0,"x":330,"y":1020,"wires":[["e195ffc9.9984d"]]},{"id":"4e0c5f67.4c685","type":"inject","z":"5e8d60de.683be","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":140,"y":1160,"wires":[["4f440850.bbda98"]]},{"id":"4f440850.bbda98","type":"function","z":"5e8d60de.683be","d":true,"name":"Serial Client - planqty","func":"var require = global.get('require');\n\n// create an empty modbus client\nvar ModbusRTU = require(\"modbus-serial\");\nvar client = new ModbusRTU();\n\n// open connection to a serial port\nclient.connectRTUBuffered(\"COM3\", { baudRate: 9600 });\nclient.setID(1);\n\n// read the values of 1 registers starting at address 1003\n// on device number 1. and log the values to the console.\nsetInterval(function() {\n    client.readInputRegisters(0x03EE, 1, function(err, planqty) {\n  console.log(planqty.data)\n    //flow.set('serial_data', data.data) ; //'serial_data'를 전역변수로 설정하여 값을 저장\n});\n}, 1000);\n","outputs":1,"noerr":0,"x":340,"y":1160,"wires":[[]]},{"id":"a459b922.1b62f8","type":"inject","z":"5e8d60de.683be","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":140,"y":1200,"wires":[["c2eb6fda.1c355"]]},{"id":"c2eb6fda.1c355","type":"function","z":"5e8d60de.683be","d":true,"name":"read serial property","func":"return {payload : flow.get('serial_data')};","outputs":1,"noerr":0,"x":330,"y":1200,"wires":[["7853e23e.49bb6c"]]},{"id":"7853e23e.49bb6c","type":"debug","z":"5e8d60de.683be","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","x":510,"y":1200,"wires":[]},{"id":"bcaea147.24b58","type":"inject","z":"5e8d60de.683be","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":140,"y":1120,"wires":[["c253870b.8d4028"]]},{"id":"c253870b.8d4028","type":"function","z":"5e8d60de.683be","d":true,"name":"Serial Client - nowqty","func":"var require = global.get('require');\n\n// create an empty modbus client\nvar ModbusRTU = require(\"modbus-serial\");\nvar client = new ModbusRTU();\nvar nowqty\n// open connection to a serial port\nclient.connectRTUBuffered(\"COM3\", { baudRate: 9600 });\nclient.setID(1);\n\n// read the values of 1 registers starting at address 1003\n// on device number 1. and log the values to the console.\nsetInterval(function() {\n    client.readInputRegisters( 0x03EB, 1, function(err, data) { \n      var nowqty = data.buffer.readUInt32BE();\n      console.log(nowqty) } );\n}, 1000);\n\n\n/*\nclient.readInputRegisters(0x03EE, 1, function(err, planqty) {\n  console.log(planqty.data)\n    //flow.set('serial_data', data.data) ; //'serial_data'를 전역변수로 설정하여 값을 저장\n});\n*/\n","outputs":1,"noerr":0,"x":340,"y":1120,"wires":[[]]},{"id":"c1257d86.7741f","type":"inject","z":"5e8d60de.683be","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":140,"y":1240,"wires":[["957dc897.865ef8"]]},{"id":"957dc897.865ef8","type":"function","z":"5e8d60de.683be","d":true,"name":"Serial Client - nowqty","func":"var require = global.get('require');\n\n// create an empty modbus client\nvar ModbusRTU = require(\"modbus-serial\");\nvar client = new ModbusRTU();\nvar data = 'not work'\n\nclient.connectRTUBuffered(\"COM3\", { baudRate: 9600 });\nclient.setID(1);\nclient.readInputRegisters(0x03EB, 1, function(error, data) {\n  console.log(error, data)\n})\n","outputs":1,"noerr":0,"x":340,"y":1240,"wires":[["758f04dc.a8e80c"]]},{"id":"758f04dc.a8e80c","type":"debug","z":"5e8d60de.683be","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","x":530,"y":1240,"wires":[]},{"id":"9947050.99579f8","type":"comment","z":"5e8d60de.683be","name":"modbus tcp with function node","info":"","x":180,"y":940,"wires":[]},{"id":"458d3f03.b0d3b","type":"comment","z":"5e8d60de.683be","name":"atonics counter data","info":"","x":130,"y":60,"wires":[]},{"id":"386051b8.1d39de","type":"comment","z":"5e8d60de.683be","name":"modbus serial with function node","info":"","x":190,"y":1080,"wires":[]},{"id":"c3c731fd.94d84","type":"join","z":"5e8d60de.683be","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"num","reduceFixup":"","x":430,"y":120,"wires":[["e76330f7.06bf9"]]},{"id":"8eba810e.bf278","type":"function","z":"5e8d60de.683be","name":"plan json","func":"msg.payload = {\"plan\" : msg.payload[0]} ;\nmsg.complete = true ;\nreturn msg;","outputs":1,"noerr":0,"x":260,"y":140,"wires":[["c3c731fd.94d84"]]},{"id":"cc247cc8.e9a14","type":"function","z":"5e8d60de.683be","name":"produce json","func":"msg.payload = {\"produce\" : msg.payload[0]} ;\nreturn msg;","outputs":1,"noerr":0,"x":270,"y":100,"wires":[["c3c731fd.94d84"]]},{"id":"e76330f7.06bf9","type":"function","z":"5e8d60de.683be","name":"cavity json","func":"msg.payload.cavity = flow.get('cavity') || 2 ;\nreturn msg;","outputs":1,"noerr":0,"x":570,"y":120,"wires":[["10c34dd0.c44c02"]]},{"id":"10c34dd0.c44c02","type":"link out","z":"5e8d60de.683be","name":"","links":["d32bcf1c.a1542","84f7f769.c18fb8"],"x":695,"y":120,"wires":[]},{"id":"150ea606.15c58a","type":"function","z":"5e8d60de.683be","name":"","func":"msg.payload={\n    \"plan\": 2000,\n    \"produce\": 1000,\n    \"cavity\": 2\n  }\nreturn msg;","outputs":1,"noerr":0,"x":1850,"y":120,"wires":[["e475568b.cd81a8"]]},{"id":"255a0a91.c23036","type":"inject","z":"5e8d60de.683be","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":1700,"y":120,"wires":[["150ea606.15c58a"]]},{"id":"84f7f769.c18fb8","type":"link in","z":"5e8d60de.683be","name":"","links":["e475568b.cd81a8","10c34dd0.c44c02"],"x":1615,"y":200,"wires":[["6e7ba194.94f98","a76ec9a3.221088","f1b37906.4d0dd8","91adc5f4.c932b8","a9fd47e4.979f48"]]},{"id":"e475568b.cd81a8","type":"link out","z":"5e8d60de.683be","name":"","links":["84f7f769.c18fb8"],"x":1975,"y":120,"wires":[]},{"id":"bc0ba5b9.565c98","type":"sum-bars","z":"5e8d60de.683be","name":"sum-bars","title":"","period":"topic","yMin":"0","yMax":"auto","showBarsValue":true,"showScaleValue":true,"showSumValue":true,"maxBar":30,"topColor":"#ff0000","bottomColor":"#ffff00","unit":"","fontColor":"#aaaaaa","barStyle":"Rectangle","decimal":1,"x":1900,"y":200,"wires":[["1871ec81.05f553"]]},{"id":"1871ec81.05f553","type":"ui_template","z":"5e8d60de.683be","group":"47444b5c.6689f4","name":"","order":1,"width":6,"height":6,"format":"<div ng-bind-html=\"msg.payload\"></div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":2060,"y":300,"wires":[[]]},{"id":"6e7ba194.94f98","type":"function","z":"5e8d60de.683be","name":"목표수량","func":"msg.payload=msg.payload.plan\nmsg.topic=\"plan\"\nreturn msg;","outputs":1,"noerr":0,"x":1720,"y":200,"wires":[["bc0ba5b9.565c98","343bb5fb.29371a"]]},{"id":"a76ec9a3.221088","type":"function","z":"5e8d60de.683be","name":"생산수량","func":"msg.payload=msg.payload.produce\nmsg.topic=\"produce\"\nreturn msg;","outputs":1,"noerr":0,"x":1720,"y":240,"wires":[["bc0ba5b9.565c98","b0aeba48.4670b8"]]},{"id":"343bb5fb.29371a","type":"ui_text","z":"5e8d60de.683be","group":"c22857b4.2c58c8","order":1,"width":3,"height":2,"name":"","label":"목표","format":"{{msg.payload}}개","layout":"col-center","x":1890,"y":240,"wires":[]},{"id":"b0aeba48.4670b8","type":"ui_text","z":"5e8d60de.683be","group":"c22857b4.2c58c8","order":2,"width":3,"height":2,"name":"","label":"현재 생산","format":"{{msg.payload}}개","layout":"col-center","x":2060,"y":340,"wires":[]},{"id":"c2029a8d.6dac08","type":"ui_text","z":"5e8d60de.683be","group":"c22857b4.2c58c8","order":3,"width":3,"height":1,"name":"목표 샷 수","label":"목표 샷","format":"{{msg.payload}}회","layout":"col-center","x":1910,"y":280,"wires":[]},{"id":"f1b37906.4d0dd8","type":"function","z":"5e8d60de.683be","name":"목표 샷","func":"var toproduce=msg.payload.plan\nvar cavity=msg.payload.cavity\nmsg={payload:(toproduce/cavity)}\nreturn msg;","outputs":1,"noerr":0,"x":1720,"y":280,"wires":[["c2029a8d.6dac08"]]},{"id":"9a33f953.69d278","type":"ui_text","z":"5e8d60de.683be","group":"c22857b4.2c58c8","order":4,"width":3,"height":1,"name":"","label":"현재 샷","format":"{{msg.payload}}","layout":"col-center","x":1900,"y":320,"wires":[]},{"id":"91adc5f4.c932b8","type":"function","z":"5e8d60de.683be","name":"현재 샷","func":"var produce=msg.payload.produce\nvar cavity=msg.payload.cavity\nmsg={payload:(produce/cavity)}\nreturn msg;","outputs":1,"noerr":0,"x":1720,"y":320,"wires":[["9a33f953.69d278"]]},{"id":"ca706184.12413","type":"ui_text","z":"5e8d60de.683be","group":"c22857b4.2c58c8","order":4,"width":0,"height":0,"name":"","label":"cavity","format":"{{msg.payload}}","layout":"row-spread","x":1890,"y":360,"wires":[]},{"id":"a9fd47e4.979f48","type":"function","z":"5e8d60de.683be","name":"현재 샷","func":"var cavity=msg.payload.cavity\nmsg.payload=cavity\nreturn msg;","outputs":1,"noerr":0,"x":1720,"y":360,"wires":[["ca706184.12413"]]},{"id":"3e34f9d6.2ce196","type":"modbus-getter","z":"5e8d60de.683be","name":"","showStatusActivities":false,"showErrors":false,"logIOActivities":false,"unitid":"1","dataType":"InputRegister","adr":"1005","quantity":"1","server":"967edffa.aa3e7","useIOFile":false,"ioFile":"","useIOForPayload":false,"x":300,"y":800,"wires":[["5cd10fcd.47093"],[]]},{"id":"5cd10fcd.47093","type":"debug","z":"5e8d60de.683be","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","x":510,"y":820,"wires":[]},{"id":"c0fcd162.06626","type":"inject","z":"5e8d60de.683be","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":140,"y":800,"wires":[["3e34f9d6.2ce196"]]},{"id":"a32449f.3d1fbb8","type":"modbus-write","z":"5e8d60de.683be","name":"","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"65","quantity":"1","server":"967edffa.aa3e7","x":300,"y":840,"wires":[["5cd10fcd.47093"],[]]},{"id":"2cefb23b.d0df5e","type":"inject","z":"5e8d60de.683be","name":"","topic":"","payload":"0","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":840,"wires":[["a32449f.3d1fbb8"]]},{"id":"c358b428.094258","type":"comment","z":"5e8d60de.683be","name":"현재수량 : 63번째 high, 62번째 low","info":"","x":200,"y":640,"wires":[]},{"id":"9177c296.12cc3","type":"comment","z":"5e8d60de.683be","name":"목표수량 : 1번째 high, 0번째 low","info":"","x":190,"y":500,"wires":[]},{"id":"47cb701e.b741","type":"modbus-write","z":"5e8d60de.683be","name":"0","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"0","quantity":"1","server":"967edffa.aa3e7","x":430,"y":540,"wires":[["dd5fa03.5e7036"],[]]},{"id":"ba70ed9c.f0b7a","type":"modbus-write","z":"5e8d60de.683be","name":"1","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"1","quantity":"1","server":"967edffa.aa3e7","x":570,"y":580,"wires":[["618c0987.a7cb48"],[]]},{"id":"a95a18fa.e416b8","type":"modbus-write","z":"5e8d60de.683be","name":"62","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"62","quantity":"1","server":"967edffa.aa3e7","x":430,"y":680,"wires":[[],[]]},{"id":"c25125a3.3561c8","type":"modbus-write","z":"5e8d60de.683be","name":"63","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"63","quantity":"1","server":"967edffa.aa3e7","x":570,"y":720,"wires":[[],[]]},{"id":"d44335fd.f05e68","type":"inject","z":"5e8d60de.683be","name":"","topic":"","payload":"144","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":540,"wires":[["9213a9c9.16fb98","aeb79a35.015098"]]},{"id":"9213a9c9.16fb98","type":"function","z":"5e8d60de.683be","name":"lower byte","func":"if (msg.payload > 65536){\n    msg.payload = msg.payload - 65536\n} \nreturn msg;","outputs":1,"noerr":0,"x":290,"y":540,"wires":[["47cb701e.b741"]]},{"id":"aeb79a35.015098","type":"function","z":"5e8d60de.683be","name":"higher byte","func":"\nmsg.payload = Math.floor(msg.payload / 65536)\nconsole.log(msg.payload)\nreturn msg;","outputs":1,"noerr":0,"x":290,"y":580,"wires":[["d90186ec.ce6348"]]},{"id":"d90186ec.ce6348","type":"delay","z":"5e8d60de.683be","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":440,"y":580,"wires":[["ba70ed9c.f0b7a"]]},{"id":"3a324bb6.23e674","type":"delay","z":"5e8d60de.683be","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":440,"y":720,"wires":[["c25125a3.3561c8"]]},{"id":"c0524a91.7ebd58","type":"function","z":"5e8d60de.683be","name":"higher byte","func":"\nmsg.payload = Math.floor(msg.payload / 65536)\nconsole.log(msg.payload)\nreturn msg;","outputs":1,"noerr":0,"x":290,"y":720,"wires":[["3a324bb6.23e674"]]},{"id":"12c377d2.335468","type":"function","z":"5e8d60de.683be","name":"lower byte","func":"if (msg.payload > 65536){\n    msg.payload = msg.payload - 65536\n} \nreturn msg;","outputs":1,"noerr":0,"x":290,"y":680,"wires":[["a95a18fa.e416b8"]]},{"id":"fbcd6bbf.3e2998","type":"inject","z":"5e8d60de.683be","name":"","topic":"","payload":"24","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":680,"wires":[["c0524a91.7ebd58","12c377d2.335468"]]},{"id":"e16f4893.13cb18","type":"comment","z":"5e8d60de.683be","name":"modbus node","info":"","x":130,"y":760,"wires":[]},{"id":"7c732e93.3042e","type":"comment","z":"5e8d60de.683be","name":"UI","info":"","x":1690,"y":80,"wires":[]},{"id":"dd5fa03.5e7036","type":"function","z":"5e8d60de.683be","name":"result","func":"return {payload : msg.payload.value*1};","outputs":1,"noerr":0,"x":570,"y":540,"wires":[["e7b9440e.bfb508"]]},{"id":"618c0987.a7cb48","type":"function","z":"5e8d60de.683be","name":"result","func":"return {payload : msg.payload.value*1};","outputs":1,"noerr":0,"x":690,"y":580,"wires":[["e7b9440e.bfb508"]]},{"id":"2ac01620.8facfa","type":"debug","z":"5e8d60de.683be","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","x":1150,"y":540,"wires":[]},{"id":"e7b9440e.bfb508","type":"join","z":"5e8d60de.683be","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"num","reduceFixup":"","x":810,"y":540,"wires":[["d226103b.cb757"]]},{"id":"d226103b.cb757","type":"function","z":"5e8d60de.683be","name":"merge","func":"return {payload : msg.payload[0]+msg.payload[1]*65536};","outputs":1,"noerr":0,"x":930,"y":540,"wires":[["2ac01620.8facfa"]]},{"id":"b86d6658.38a7e8","type":"modbus-write","z":"5e8d60de.683be","name":"1","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"1","quantity":"1","server":"967edffa.aa3e7","x":870,"y":320,"wires":[["9c4a7d5d.8925a"],[]]},{"id":"2ec57751.d8e708","type":"modbus-write","z":"5e8d60de.683be","name":"0","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"0","quantity":"1","server":"967edffa.aa3e7","x":750,"y":280,"wires":[["5ae6f25f.3fc40c"],[]]},{"id":"9512be07.e0b5f","type":"modbus-write","z":"5e8d60de.683be","name":"63","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"63","quantity":"1","server":"967edffa.aa3e7","x":870,"y":400,"wires":[["52e2aa77.b02634"],[]]},{"id":"490177f.8a77a88","type":"http in","z":"5e8d60de.683be","name":"http in (/counter)","url":"/counter","method":"post","upload":false,"swaggerDoc":"","x":120,"y":280,"wires":[["d349aa85.c34cc8"]]},{"id":"d349aa85.c34cc8","type":"function","z":"5e8d60de.683be","name":"authorize","func":"if (msg.payload.name !== 'CTFadmin') {\n    msg.topic = 'error' ;\n    msg.payload = 'authorize error' ;\n}\nreturn msg;\n","outputs":1,"noerr":0,"x":280,"y":280,"wires":[["67282362.7cc25c","8500d227.2240e","c4896d62.20b63","f17b1a8a.441768"]]},{"id":"67282362.7cc25c","type":"function","z":"5e8d60de.683be","name":"check error","func":"if (msg.topic == 'error'){\n    return msg;\n}","outputs":1,"noerr":0,"x":450,"y":240,"wires":[["1642e0fc.4db9af"]]},{"id":"f17b1a8a.441768","type":"function","z":"5e8d60de.683be","name":"nowqty","func":"if (msg.topic !== 'error') {\n  msg.payload = msg.payload.now\n  return msg\n}\n","outputs":1,"noerr":0,"x":440,"y":360,"wires":[["84eaba13.33b368","9fe40616.448c48"]]},{"id":"8500d227.2240e","type":"function","z":"5e8d60de.683be","name":"planqty","func":"if (msg.topic !== 'error') {\n  msg.payload = msg.payload.plan\n  return msg\n}\n","outputs":1,"noerr":0,"x":440,"y":280,"wires":[["9f93a1bc.94e87","fc73a94e.d61cc8"]]},{"id":"c4896d62.20b63","type":"function","z":"5e8d60de.683be","name":"cavity","func":"if (msg.topic !== 'error') {\n  flow.set('cavity', msg.payload.cavity)\n  msg.payload = {\"cavity\" : msg.payload.cavity}\n  return msg\n}","outputs":1,"noerr":0,"x":430,"y":440,"wires":[["11fcce87.29e2d1"]]},{"id":"9f93a1bc.94e87","type":"function","z":"5e8d60de.683be","name":"lower byte","func":"msg.payload = msg.payload - 65536*Math.floor(msg.payload / 65536)\nreturn msg;","outputs":1,"noerr":0,"x":610,"y":280,"wires":[["2ec57751.d8e708"]]},{"id":"fc73a94e.d61cc8","type":"function","z":"5e8d60de.683be","name":"higher byte","func":"msg.payload = Math.floor(msg.payload / 65536)\nreturn msg;","outputs":1,"noerr":0,"x":610,"y":320,"wires":[["ceab755a.c7ed48"]]},{"id":"ceab755a.c7ed48","type":"delay","z":"5e8d60de.683be","name":"0.5","pauseType":"delay","timeout":"0.5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":750,"y":320,"wires":[["b86d6658.38a7e8"]]},{"id":"9c4a7d5d.8925a","type":"function","z":"5e8d60de.683be","name":"result","func":"var high = {}\nhigh[\"planhigh\"] = msg.payload.value*1\nmsg.payload = high\nreturn msg;","outputs":1,"noerr":0,"x":990,"y":320,"wires":[["11fcce87.29e2d1"]]},{"id":"11fcce87.29e2d1","type":"join","z":"5e8d60de.683be","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"num","reduceFixup":"","x":1110,"y":280,"wires":[["6d13ca74.affd24"]]},{"id":"84eaba13.33b368","type":"function","z":"5e8d60de.683be","name":"lower byte","func":"msg.payload = msg.payload - 65536*Math.floor(msg.payload / 65536)\nreturn msg;","outputs":1,"noerr":0,"x":610,"y":360,"wires":[["8627e872.9d9588"]]},{"id":"9fe40616.448c48","type":"function","z":"5e8d60de.683be","name":"higher byte","func":"msg.payload = Math.floor(msg.payload / 65536)\nreturn msg;","outputs":1,"noerr":0,"x":610,"y":400,"wires":[["c8f96fa8.26c29"]]},{"id":"c8f96fa8.26c29","type":"delay","z":"5e8d60de.683be","name":"1.5","pauseType":"delay","timeout":"1.5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":750,"y":400,"wires":[["9512be07.e0b5f"]]},{"id":"6d13ca74.affd24","type":"function","z":"5e8d60de.683be","name":"merge","func":"var result = {}\nresult[\"plan\"] = msg.payload.planlow+msg.payload.planhigh*65536\nresult[\"now\"] = msg.payload.nowlow+msg.payload.nowhigh*65536\nresult[\"cavity\"] = msg.payload.cavity\nmsg.payload = result\nreturn msg;","outputs":1,"noerr":0,"x":1230,"y":280,"wires":[["1642e0fc.4db9af"]]},{"id":"18b8577b.8c8829","type":"modbus-write","z":"5e8d60de.683be","name":"62","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"62","quantity":"1","server":"967edffa.aa3e7","x":870,"y":360,"wires":[["3385e8e4.835408"],[]]},{"id":"5ae6f25f.3fc40c","type":"function","z":"5e8d60de.683be","name":"result","func":"var low = {}\nlow[\"planlow\"] = msg.payload.value*1\nmsg.payload = low\nreturn msg;","outputs":1,"noerr":0,"x":870,"y":280,"wires":[["11fcce87.29e2d1"]]},{"id":"3385e8e4.835408","type":"function","z":"5e8d60de.683be","name":"result","func":"var low = {}\nlow[\"nowlow\"] = msg.payload.value*1\nmsg.payload = low\nreturn msg;","outputs":1,"noerr":0,"x":990,"y":360,"wires":[["11fcce87.29e2d1"]]},{"id":"52e2aa77.b02634","type":"function","z":"5e8d60de.683be","name":"result","func":"var high = {}\nhigh[\"nowhigh\"] = msg.payload.value*1\nmsg.payload = high\nmsg.complete = true\nreturn msg;","outputs":1,"noerr":0,"x":990,"y":400,"wires":[["11fcce87.29e2d1"]]},{"id":"edd4c319.798d9","type":"comment","z":"5e8d60de.683be","name":"http comunication(multi)","info":"","x":140,"y":240,"wires":[]},{"id":"8627e872.9d9588","type":"delay","z":"5e8d60de.683be","name":"1","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":750,"y":360,"wires":[["18b8577b.8c8829"]]},{"id":"1642e0fc.4db9af","type":"http response","z":"5e8d60de.683be","name":"http response","statusCode":"","headers":{},"x":1420,"y":280,"wires":[]},{"id":"dd77f45b.a83448","type":"modbus-write","z":"5e8d60de.683be","name":"1","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"1","quantity":"1","server":"967edffa.aa3e7","x":930,"y":1480,"wires":[["a1c93388.a0c28"],[]]},{"id":"fcd87d4b.c5806","type":"modbus-write","z":"5e8d60de.683be","name":"0","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"0","quantity":"1","server":"967edffa.aa3e7","x":810,"y":1440,"wires":[["93ec1dda.50e2a"],[]]},{"id":"37ab922c.d06c0e","type":"modbus-write","z":"5e8d60de.683be","name":"63","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"63","quantity":"1","server":"967edffa.aa3e7","x":930,"y":1560,"wires":[["2b228dfe.774422"],[]]},{"id":"2d8debce.cf3444","type":"http in","z":"5e8d60de.683be","d":true,"name":"http in (/counter)","url":"/counter","method":"post","upload":false,"swaggerDoc":"","x":140,"y":1440,"wires":[["8ac31d22.40109"]]},{"id":"8ac31d22.40109","type":"function","z":"5e8d60de.683be","name":"authorize & classify","func":"if (msg.payload.name !== 'CTFadmin') {\n    msg.topic = 'error' ;\n    msg.payload = 'authorize error' ;\n    return msg ;\n} else if (msg.payload.type == \"now\") {\n  msg.topic = \"now\"\n} else if (msg.payload.type == \"plan\") {\n  msg.topic = \"plan\"\n} else if (msg.payload.type == \"cavity\") {\n  msg.topic = \"cavity\"\n} \nmsg.payload = msg.payload.value\nreturn msg;\n","outputs":1,"noerr":0,"x":330,"y":1440,"wires":[["980b547e.f3d6c8","e1516cce.6416f","4c237914.c031a8","90703505.e079f8","d62b502f.9281"]]},{"id":"980b547e.f3d6c8","type":"function","z":"5e8d60de.683be","name":"check error","func":"if (msg.topic == 'error'){\n    return msg;\n}","outputs":1,"noerr":0,"x":510,"y":1440,"wires":[["60ca1332.faedbc"]]},{"id":"90703505.e079f8","type":"function","z":"5e8d60de.683be","name":"nowqty","func":"if (msg.topic == \"now\") {\n  return msg ;\n}","outputs":1,"noerr":0,"x":500,"y":1520,"wires":[["664fec5a.d78de4","effe08c6.636e78"]]},{"id":"e1516cce.6416f","type":"function","z":"5e8d60de.683be","name":"planqty","func":"if (msg.topic == \"plan\") {\n  return msg ;\n}","outputs":1,"noerr":0,"x":500,"y":1480,"wires":[["d8842eec.1457","797a39dc.40ce48"]]},{"id":"4c237914.c031a8","type":"function","z":"5e8d60de.683be","name":"cavity","func":"if (msg.topic == \"cavity\") {\n  flow.set('cavity', msg.payload)\n  msg.payload = \n  {\n    \"cavity\" : msg.payload\n  }\n  return msg ;\n}","outputs":1,"noerr":0,"x":490,"y":1560,"wires":[["60ca1332.faedbc"]]},{"id":"d8842eec.1457","type":"function","z":"5e8d60de.683be","name":"lower byte","func":"if (msg.payload > 65536){\n    msg.payload = msg.payload - 65536\n} \nreturn msg;","outputs":1,"noerr":0,"x":670,"y":1440,"wires":[["fcd87d4b.c5806"]]},{"id":"797a39dc.40ce48","type":"function","z":"5e8d60de.683be","name":"higher byte","func":"msg.payload = Math.floor(msg.payload / 65536)\nreturn msg;","outputs":1,"noerr":0,"x":670,"y":1480,"wires":[["1c927d7b.bbe2d3"]]},{"id":"1c927d7b.bbe2d3","type":"delay","z":"5e8d60de.683be","name":"0.5","pauseType":"delay","timeout":"0.5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":810,"y":1480,"wires":[["dd77f45b.a83448"]]},{"id":"a1c93388.a0c28","type":"function","z":"5e8d60de.683be","name":"result","func":"var high = {}\nhigh[\"high\"] = msg.payload.value*1\nmsg.payload = high\nmsg.complete = true\nreturn msg;","outputs":1,"noerr":0,"x":1050,"y":1480,"wires":[["ea9814af.9b7198"]]},{"id":"ea9814af.9b7198","type":"join","z":"5e8d60de.683be","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"num","reduceFixup":"","x":1170,"y":1440,"wires":[["7c8f122c.b6841c"]]},{"id":"664fec5a.d78de4","type":"function","z":"5e8d60de.683be","name":"lower byte","func":"if (msg.payload > 65536){\n    msg.payload = msg.payload - 65536\n} \nreturn msg;","outputs":1,"noerr":0,"x":670,"y":1520,"wires":[["1fd45608.02ddea"]]},{"id":"effe08c6.636e78","type":"function","z":"5e8d60de.683be","name":"higher byte","func":"msg.payload = Math.floor(msg.payload / 65536)\nreturn msg;","outputs":1,"noerr":0,"x":670,"y":1560,"wires":[["8568a61a.2ca418"]]},{"id":"8568a61a.2ca418","type":"delay","z":"5e8d60de.683be","name":"0.5","pauseType":"delay","timeout":"0.5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":810,"y":1560,"wires":[["37ab922c.d06c0e"]]},{"id":"7c8f122c.b6841c","type":"function","z":"5e8d60de.683be","name":"merge","func":"var result = {}\nresult[msg.payload.topic] = msg.payload.low+msg.payload.high*65536\nmsg.payload = result\nreturn msg;","outputs":1,"noerr":0,"x":1290,"y":1440,"wires":[["60ca1332.faedbc"]]},{"id":"60ca1332.faedbc","type":"http response","z":"5e8d60de.683be","name":"http response","statusCode":"","headers":{},"x":1440,"y":1440,"wires":[]},{"id":"1fd45608.02ddea","type":"modbus-write","z":"5e8d60de.683be","name":"62","showStatusActivities":false,"showErrors":false,"unitid":"","dataType":"HoldingRegister","adr":"62","quantity":"1","server":"967edffa.aa3e7","x":810,"y":1520,"wires":[["461fc995.096918"],[]]},{"id":"93ec1dda.50e2a","type":"function","z":"5e8d60de.683be","name":"result","func":"var low = {}\nlow[\"low\"] = msg.payload.value*1\nmsg.payload = low\nreturn msg;","outputs":1,"noerr":0,"x":930,"y":1440,"wires":[["ea9814af.9b7198"]]},{"id":"461fc995.096918","type":"function","z":"5e8d60de.683be","name":"result","func":"var low = {}\nlow[\"low\"] = msg.payload.value*1\nmsg.payload = low\nreturn msg;","outputs":1,"noerr":0,"x":930,"y":1520,"wires":[["ea9814af.9b7198"]]},{"id":"2b228dfe.774422","type":"function","z":"5e8d60de.683be","name":"result","func":"var high = {}\nhigh[\"high\"] = msg.payload.value*1\nmsg.payload = high\nmsg.complete = true\nreturn msg;","outputs":1,"noerr":0,"x":1050,"y":1560,"wires":[["ea9814af.9b7198"]]},{"id":"eabdeb0f.1675f8","type":"comment","z":"5e8d60de.683be","name":"http comunication(single)","info":"","x":170,"y":1400,"wires":[]},{"id":"d62b502f.9281","type":"function","z":"5e8d60de.683be","name":"topic","func":"msg.payload = {\"topic\" : msg.topic}\nreturn msg;","outputs":1,"noerr":0,"x":490,"y":1600,"wires":[["ea9814af.9b7198"]]},{"id":"7d3ac8c8.587508","type":"http in","z":"91ff2fa4.75554","name":"","url":"/MTC","method":"post","upload":false,"swaggerDoc":"","x":130,"y":280,"wires":[["85d08fd8.ab7e1"]]},{"id":"911ef0a0.c2651","type":"http response","z":"91ff2fa4.75554","name":"","statusCode":"","headers":{},"x":470,"y":280,"wires":[]},{"id":"dbfb629e.8297a","type":"modbus-write","z":"91ff2fa4.75554","name":"multiple(266~270)","showStatusActivities":true,"showErrors":true,"unitid":"1","dataType":"MHoldingRegisters","adr":"266","quantity":"5","server":"bb6b54c9.e10348","x":810,"y":400,"wires":[[],[]]},{"id":"b2337ed8.5391f","type":"modbus-write","z":"91ff2fa4.75554","name":"multiple(257~259)","showStatusActivities":true,"showErrors":true,"unitid":"1","dataType":"MHoldingRegisters","adr":"257","quantity":"3","server":"bb6b54c9.e10348","x":650,"y":340,"wires":[[],[]]},{"id":"85d08fd8.ab7e1","type":"function","z":"91ff2fa4.75554","name":"authoroize","func":"if (msg.payload.name !== \"CTFadmin\") {\n  msg.topic = 'error'\n  msg.payload = 'authorize error'\n}\nreturn msg\n","outputs":1,"noerr":0,"x":300,"y":280,"wires":[["42204aec.452024","c27acae7.3824b8","911ef0a0.c2651"]]},{"id":"42204aec.452024","type":"function","z":"91ff2fa4.75554","name":"257~259","func":"msg.payload = [msg.payload.power, msg.payload.run, msg.payload.alarm]\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":340,"wires":[["b2337ed8.5391f"]]},{"id":"c27acae7.3824b8","type":"function","z":"91ff2fa4.75554","name":"266~270","func":"msg.payload = [msg.payload.settemp, msg.payload.alarmtemp_hi, msg.payload.alarmtemp_lo, msg.payload.alarmpres_hi, msg.payload.alarmpres_lo]\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":400,"wires":[["208a0488.96e58c"]]},{"id":"208a0488.96e58c","type":"delay","z":"91ff2fa4.75554","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":620,"y":400,"wires":[["dbfb629e.8297a"]]},{"id":"864ebd7d.d094a","type":"modbus-write","z":"91ff2fa4.75554","name":"power state(0101)","showStatusActivities":false,"showErrors":false,"unitid":"1","dataType":"HoldingRegister","adr":"257","quantity":"1","server":"bb6b54c9.e10348","x":430,"y":520,"wires":[["fc667fe4.18409"],[]]},{"id":"7403fa73.7e5284","type":"modbus-write","z":"91ff2fa4.75554","name":"run state(0102)","showStatusActivities":false,"showErrors":false,"unitid":"1","dataType":"HoldingRegister","adr":"258","quantity":"1","server":"bb6b54c9.e10348","x":420,"y":560,"wires":[["fc667fe4.18409"],[]]},{"id":"a612ba3.93a1048","type":"modbus-write","z":"91ff2fa4.75554","name":"Alarm Buzzer ON/OFF(0103)","showStatusActivities":false,"showErrors":false,"unitid":"1","dataType":"HoldingRegister","adr":"259","quantity":"1","server":"bb6b54c9.e10348","x":460,"y":600,"wires":[["fc667fe4.18409"],[]]},{"id":"da8b24bc.0deac8","type":"modbus-write","z":"91ff2fa4.75554","name":"설정온도(010A)","showStatusActivities":false,"showErrors":false,"unitid":"1","dataType":"HoldingRegister","adr":"266","quantity":"1","server":"bb6b54c9.e10348","x":420,"y":640,"wires":[["fc667fe4.18409"],[]]},{"id":"9acaae94.a6c8e","type":"modbus-write","z":"91ff2fa4.75554","name":"Alarm Hi Temperature(010B)","showStatusActivities":false,"showErrors":false,"unitid":"1","dataType":"HoldingRegister","adr":"267","quantity":"1","server":"bb6b54c9.e10348","x":460,"y":680,"wires":[["fc667fe4.18409","aa159955.a7fe28"],[]]},{"id":"1f9d86c0.98bb99","type":"modbus-write","z":"91ff2fa4.75554","name":"Alarm Low Temperature(010C)","showStatusActivities":false,"showErrors":false,"unitid":"1","dataType":"HoldingRegister","adr":"268","quantity":"1","server":"bb6b54c9.e10348","x":470,"y":720,"wires":[["fc667fe4.18409","aa159955.a7fe28"],[]]},{"id":"f46c5ee2.81fc6","type":"modbus-write","z":"91ff2fa4.75554","name":"Alarm Hi Pressure(010D)","showStatusActivities":false,"showErrors":false,"unitid":"1","dataType":"HoldingRegister","adr":"269","quantity":"1","server":"bb6b54c9.e10348","x":450,"y":760,"wires":[["fc667fe4.18409"],[]]},{"id":"b07f98b7.6beab8","type":"modbus-write","z":"91ff2fa4.75554","name":"Alarm Low Pressure(010E)","showStatusActivities":false,"showErrors":false,"unitid":"1","dataType":"HoldingRegister","adr":"270","quantity":"1","server":"bb6b54c9.e10348","x":460,"y":800,"wires":[["fc667fe4.18409"],[]]},{"id":"e80b46cc.5597c8","type":"inject","z":"91ff2fa4.75554","name":"","topic":"","payload":"10","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":680,"wires":[["993c2086.83ec"]]},{"id":"2654a658.72857a","type":"debug","z":"91ff2fa4.75554","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","x":950,"y":660,"wires":[]},{"id":"fc667fe4.18409","type":"function","z":"91ff2fa4.75554","name":"","func":"msg.payload = msg.payload.value\nreturn msg;","outputs":1,"noerr":0,"x":790,"y":660,"wires":[["2654a658.72857a"]]},{"id":"993c2086.83ec","type":"function","z":"91ff2fa4.75554","name":"","func":"msg.payload = 10\nreturn msg;","outputs":1,"noerr":0,"x":260,"y":680,"wires":[["9acaae94.a6c8e"]]},{"id":"78f3943b.db000c","type":"function","z":"91ff2fa4.75554","name":"","func":"msg.payload = 5\nreturn msg;","outputs":1,"noerr":0,"x":250,"y":720,"wires":[["1f9d86c0.98bb99"]]},{"id":"f2c9ca26.1952f8","type":"inject","z":"91ff2fa4.75554","name":"","topic":"","payload":"10","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":720,"wires":[["78f3943b.db000c"]]},{"id":"f2755af0.ac0e38","type":"inject","z":"91ff2fa4.75554","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":140,"y":620,"wires":[["993c2086.83ec","78f3943b.db000c"]]},{"id":"aa159955.a7fe28","type":"debug","z":"91ff2fa4.75554","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":780,"y":800,"wires":[]},{"id":"5fddb61e.443ea8","type":"comment","z":"91ff2fa4.75554","name":"API","info":"","x":110,"y":240,"wires":[]},{"id":"8894f835.8e4dc8","type":"modbus-write","z":"91ff2fa4.75554","name":"multiple(266~270)","showStatusActivities":true,"showErrors":true,"unitid":"1","dataType":"MHoldingRegisters","adr":"266","quantity":"5","server":"bb6b54c9.e10348","x":910,"y":980,"wires":[["f2ec229d.8148e"],[]]},{"id":"b91fca28.8200b8","type":"inject","z":"91ff2fa4.75554","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":920,"wires":[["a4440f2b.fa07a"]]},{"id":"a4440f2b.fa07a","type":"function","z":"91ff2fa4.75554","name":"data","func":"msg.payload = {\n  \"name\" : \"CTFadmin\",\n  \"power\" : 1,\n  \"run\" : 0,\n  \"alarm\" : 0,\n  \"settemp\" : 700,\n  \"alarmtemp_hi\" : 7,\n  \"alarmtemp_lo\" : 3,\n  \"alarmpres_hi\" : 40,\n  \"alarmpres_lo\" : 0\n}\nreturn msg;","outputs":1,"noerr":0,"x":250,"y":920,"wires":[["a67a97c2.a7e358"]]},{"id":"9e7de2a.6e4372","type":"modbus-write","z":"91ff2fa4.75554","name":"multiple(257~259)","showStatusActivities":true,"showErrors":true,"unitid":"1","dataType":"MHoldingRegisters","adr":"257","quantity":"3","server":"bb6b54c9.e10348","x":750,"y":920,"wires":[["b5b1b830.6ece08"],[]]},{"id":"b5b1b830.6ece08","type":"function","z":"91ff2fa4.75554","name":"","func":"msg.payload = msg.payload.value\nreturn msg;","outputs":1,"noerr":0,"x":910,"y":920,"wires":[[]]},{"id":"f2ec229d.8148e","type":"function","z":"91ff2fa4.75554","name":"","func":"msg.payload = msg.payload.value\nreturn msg;","outputs":1,"noerr":0,"x":1070,"y":980,"wires":[[]]},{"id":"a67a97c2.a7e358","type":"function","z":"91ff2fa4.75554","name":"authoroize","func":"if (msg.payload.name !== \"CTFadmin\") {\n  msg.topic = 'error'\n  msg.payload = 'authorize error'\n}\nreturn msg\n","outputs":1,"noerr":0,"x":400,"y":920,"wires":[["34bd76c1.23167a","d48d9a8c.bfd828"]]},{"id":"34bd76c1.23167a","type":"function","z":"91ff2fa4.75554","name":"","func":"msg.payload = [msg.payload.power, msg.payload.run, msg.payload.alarm]\nreturn msg;","outputs":1,"noerr":0,"x":570,"y":920,"wires":[["9e7de2a.6e4372"]]},{"id":"d48d9a8c.bfd828","type":"function","z":"91ff2fa4.75554","name":"","func":"msg.payload = [msg.payload.settemp, msg.payload.alarmtemp_hi, msg.payload.alarmtemp_lo, msg.payload.alarmpres_hi, msg.payload.alarmpres_lo]\nreturn msg;","outputs":1,"noerr":0,"x":570,"y":980,"wires":[["c317ac46.8b489"]]},{"id":"c317ac46.8b489","type":"delay","z":"91ff2fa4.75554","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":720,"y":980,"wires":[["8894f835.8e4dc8"]]},{"id":"cb9bc7b8.385948","type":"comment","z":"91ff2fa4.75554","name":"api test","info":"","x":90,"y":880,"wires":[]},{"id":"ce9618f3.04f488","type":"function","z":"29365c96.1284f4","name":"msg maker","func":"if (!!msg.res) { // API를 통해 정보가 들어왔을 때\n  status = 'no' ; // API를 통해 들어온 세팅값의 시리얼 통신을 방해하지 않기 위해 메인 루프를 정지\n  flow.set('status', status);\n}\nif (status == 'ok') { // API를 통해 메인 루프가 정지되지 않은 경우 (평상시)\n  var routine = flow.get('routine') || 0 ; //routine은 loop를 순서대로 돌리기 위한 숫자 (id값)\n  routine += 1 ; // routine은 1씩 증가\n  if (routine > 8){ // routine이 loop_condition의 값보다 커지면 다시 routine을 1로 설정(다시 zone 1의 데이터를 조회)\n    routine = 1 ;\n  }\n  flow.set('routine', routine) ;\n  msg.payload = Buffer.from(String.fromCharCode(0x02, '0x'+routine.toString(16), 0x51, 0x00, 0x00, 0x00, 0x00, 0x03),\"ascii\") ;\n  return msg ;\n}\n","outputs":1,"noerr":0,"x":270,"y":100,"wires":[["9401a5ca.e3df08"]]},{"id":"bfac75d1.d21328","type":"inject","z":"29365c96.1284f4","name":"hotrunner","topic":"","payload":"","payloadType":"date","repeat":"1","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":100,"wires":[["ce9618f3.04f488"]]},{"id":"9401a5ca.e3df08","type":"serial request","z":"29365c96.1284f4","name":"","serial":"1a302ef9.aa4741","x":410,"y":100,"wires":[["c1977a4c.155558"]]},{"id":"4686a4db.103bbc","type":"http in","z":"29365c96.1284f4","name":"http in (/hotrunner)","url":"/hotrunner","method":"post","upload":false,"swaggerDoc":"","x":110,"y":220,"wires":[["ce9618f3.04f488","846f526c.b7c94"]]},{"id":"4c7e3d3e.a62cb4","type":"serial request","z":"29365c96.1284f4","name":"","serial":"1a302ef9.aa4741","x":670,"y":220,"wires":[["faed9b7a.31a778"]]},{"id":"a5230d60.12009","type":"join","z":"29365c96.1284f4","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"num","reduceFixup":"","x":950,"y":220,"wires":[["5e618ace.d2f934"]]},{"id":"afd4d88d.6363f8","type":"complete","z":"29365c96.1284f4","name":"when one request finish","scope":["faed9b7a.31a778"],"uncaught":false,"x":240,"y":260,"wires":[["c394a057.3ce9e"]]},{"id":"4ba8a683.734358","type":"http response","z":"29365c96.1284f4","name":"http response","statusCode":"","headers":{},"x":1260,"y":220,"wires":[]},{"id":"c1977a4c.155558","type":"function","z":"29365c96.1284f4","name":"Datastore","func":"var id = msg.payload[1] ;\nvar data_package_json = flow.get('data_package_json') || {} ;\n\nif (id == 1) {\n  data_package_json = {} ;\n  data_package_json.zone1 = msg.payload ;\n  flow.set('data_package_json', data_package_json) ;\n} else if (id == 2) {\n  data_package_json.zone2 = msg.payload ;\n  flow.set('data_package_json', data_package_json) ;\n} else if (id == 3) {\n  data_package_json.zone3 = msg.payload ;\n  flow.set('data_package_json', data_package_json) ;\n} else if (id == 4) {\n  data_package_json.zone4 = msg.payload ;\n  flow.set('data_package_json', data_package_json) ;\n} else if (id == 5) {\n  data_package_json.zone5 = msg.payload ;\n  flow.set('data_package_json', data_package_json) ;\n} else if (id == 6) {\n  data_package_json.zone6 = msg.payload ;\n  flow.set('data_package_json', data_package_json) ;\n} else if (id == 7) {\n  data_package_json.zone7 = msg.payload ;\n  flow.set('data_package_json', data_package_json) ;\n} else if (id == 8) {\n  data_package_json.zone8 = msg.payload ;\n  flow.set('data_package_json', data_package_json) ;\n  return msg ;\n}\n","outputs":1,"noerr":0,"x":540,"y":100,"wires":[["318f8f78.2e9d9"]]},{"id":"318f8f78.2e9d9","type":"function","z":"29365c96.1284f4","name":"data transfer json","func":"var json_data = {} ;\nfor (i = 1; i<=8; i++) {\n  json_data[\"zone\" + String(i)] = {} ;\n}\n\njson_data.zone1.nowtemp = (msg.payload.zone1[3]*256+msg.payload.zone1[4])/10 ; //현재온도\njson_data.zone1.settemp = msg.payload.zone1[5]*256+msg.payload.zone1[6] ; //설정온도\njson_data.zone1.max = msg.payload.zone1[7] ; //상한값\njson_data.zone1.min = msg.payload.zone1[8] ; //하한값\njson_data.zone1.outpercent = (msg.payload.zone1[9]*256+msg.payload.zone1[10])/10 ; //히터출력퍼센트\njson_data.zone1.current = (msg.payload.zone1[11]*256+msg.payload.zone1[12])/10 ; //히터소비전류\njson_data.zone1.capacity = msg.payload.zone1[13]*256+msg.payload.zone1[14] ; //히터용량값\njson_data.zone1.degree = msg.payload.zone1[15] ; //섭씨or화씨\njson_data.zone1.error = msg.payload.zone1[16] ;//에러상태\n\njson_data.zone2.nowtemp = (msg.payload.zone2[3]*256+msg.payload.zone2[4])/10 ; //현재온도\njson_data.zone2.settemp = msg.payload.zone2[5]*256+msg.payload.zone2[6] ; //설정온도\njson_data.zone2.max = msg.payload.zone2[7] ; //상한값\njson_data.zone2.min = msg.payload.zone2[8] ; //하한값\njson_data.zone2.outpercent = (msg.payload.zone2[9]*256+msg.payload.zone2[10])/10 ; //히터출력퍼센트\njson_data.zone2.current = (msg.payload.zone2[11]*256+msg.payload.zone2[12])/10 ; //히터소비전류\njson_data.zone2.capacity = msg.payload.zone2[13]*256+msg.payload.zone2[14] ; //히터용량값\njson_data.zone2.degree = msg.payload.zone2[15] ; //섭씨or화씨\njson_data.zone2.error = msg.payload.zone2[16] ;//에러상태\n\njson_data.zone3.nowtemp = (msg.payload.zone3[3]*256+msg.payload.zone3[4])/10 ; //현재온도\njson_data.zone3.settemp = msg.payload.zone3[5]*256+msg.payload.zone3[6] ; //설정온도\njson_data.zone3.max = msg.payload.zone3[7] ; //상한값\njson_data.zone3.min = msg.payload.zone3[8] ; //하한값\njson_data.zone3.outpercent = (msg.payload.zone3[9]*256+msg.payload.zone3[10])/10 ; //히터출력퍼센트\njson_data.zone3.current = (msg.payload.zone3[11]*256+msg.payload.zone3[12])/10 ; //히터소비전류\njson_data.zone3.capacity = msg.payload.zone3[13]*256+msg.payload.zone3[14] ; //히터용량값\njson_data.zone3.degree = msg.payload.zone3[15] ; //섭씨or화씨\njson_data.zone3.error = msg.payload.zone3[16] ;//에러상태\n\njson_data.zone4.nowtemp = (msg.payload.zone4[3]*256+msg.payload.zone4[4])/10 ; //현재온도\njson_data.zone4.settemp = msg.payload.zone4[5]*256+msg.payload.zone4[6] ; //설정온도\njson_data.zone4.max = msg.payload.zone4[7] ; //상한값\njson_data.zone4.min = msg.payload.zone4[8] ; //하한값\njson_data.zone4.outpercent = (msg.payload.zone4[9]*256+msg.payload.zone4[10])/10 ; //히터출력퍼센트\njson_data.zone4.current = (msg.payload.zone4[11]*256+msg.payload.zone4[12])/10 ; //히터소비전류\njson_data.zone4.capacity = msg.payload.zone4[13]*256+msg.payload.zone4[14] ; //히터용량값\njson_data.zone4.degree = msg.payload.zone4[15] ; //섭씨or화씨\njson_data.zone4.error = msg.payload.zone4[16] ;//에러상태\n\njson_data.zone5.nowtemp = (msg.payload.zone5[3]*256+msg.payload.zone5[4])/10 ; //현재온도\njson_data.zone5.settemp = msg.payload.zone5[5]*256+msg.payload.zone5[6] ; //설정온도\njson_data.zone5.max = msg.payload.zone5[7] ; //상한값\njson_data.zone5.min = msg.payload.zone5[8] ; //하한값\njson_data.zone5.outpercent = (msg.payload.zone5[9]*256+msg.payload.zone5[10])/10 ; //히터출력퍼센트\njson_data.zone5.current = (msg.payload.zone5[11]*256+msg.payload.zone5[12])/10 ; //히터소비전류\njson_data.zone5.capacity = msg.payload.zone5[13]*256+msg.payload.zone5[14] ; //히터용량값\njson_data.zone5.degree = msg.payload.zone5[15] ; //섭씨or화씨\njson_data.zone5.error = msg.payload.zone5[16] ;//에러상태\n\njson_data.zone6.nowtemp = (msg.payload.zone6[3]*256+msg.payload.zone6[4])/10 ; //현재온도\njson_data.zone6.settemp = msg.payload.zone6[5]*256+msg.payload.zone6[6] ; //설정온도\njson_data.zone6.max = msg.payload.zone6[7] ; //상한값\njson_data.zone6.min = msg.payload.zone6[8] ; //하한값\njson_data.zone6.outpercent = (msg.payload.zone6[9]*256+msg.payload.zone6[10])/10 ; //히터출력퍼센트\njson_data.zone6.current = (msg.payload.zone6[11]*256+msg.payload.zone6[12])/10 ; //히터소비전류\njson_data.zone6.capacity = msg.payload.zone6[13]*256+msg.payload.zone6[14] ; //히터용량값\njson_data.zone6.degree = msg.payload.zone6[15] ; //섭씨or화씨\njson_data.zone6.error = msg.payload.zone6[16] ;//에러상태\n\njson_data.zone7.nowtemp = (msg.payload.zone7[3]*256+msg.payload.zone7[4])/10 ; //현재온도\njson_data.zone7.settemp = msg.payload.zone7[5]*256+msg.payload.zone7[6] ; //설정온도\njson_data.zone7.max = msg.payload.zone7[7] ; //상한값\njson_data.zone7.min = msg.payload.zone7[8] ; //하한값\njson_data.zone7.outpercent = (msg.payload.zone7[9]*256+msg.payload.zone7[10])/10 ; //히터출력퍼센트\njson_data.zone7.current = (msg.payload.zone7[11]*256+msg.payload.zone7[12])/10 ; //히터소비전류\njson_data.zone7.capacity = msg.payload.zone7[13]*256+msg.payload.zone7[14] ; //히터용량값\njson_data.zone7.degree = msg.payload.zone7[15] ; //섭씨or화씨\njson_data.zone7.error = msg.payload.zone7[16] ;//에러상태\n\njson_data.zone8.nowtemp = (msg.payload.zone8[3]*256+msg.payload.zone8[4])/10 ; //현재온도\njson_data.zone8.settemp = msg.payload.zone8[5]*256+msg.payload.zone8[6] ; //설정온도\njson_data.zone8.max = msg.payload.zone8[7] ; //상한값\njson_data.zone8.min = msg.payload.zone8[8] ; //하한값\njson_data.zone8.outpercent = (msg.payload.zone8[9]*256+msg.payload.zone8[10])/10 ; //히터출력퍼센트\njson_data.zone8.current = (msg.payload.zone8[11]*256+msg.payload.zone8[12])/10 ; //히터소비전류\njson_data.zone8.capacity = msg.payload.zone8[13]*256+msg.payload.zone8[14] ; //히터용량값\njson_data.zone8.degree = msg.payload.zone8[15] ; //섭씨or화씨\njson_data.zone8.error = msg.payload.zone8[16] ;//에러상태\n\nmsg.payload = json_data ;\nreturn msg ;\n","outputs":1,"noerr":0,"x":710,"y":100,"wires":[[]]},{"id":"846f526c.b7c94","type":"function","z":"29365c96.1284f4","name":"authorize","func":"if (msg.payload.name == 'CTFadmin') { //'CTFadmin'일 경우\n  var obj = Object.values(msg.payload) ;\n  obj.splice(0,1) ;\n  flow.set('command', obj) ;\n  msg.payload = obj ;\n} else {\n  flow.set('command', ['authorize error']) ;\n  msg.payload = '' ;\n}\nreturn msg;\n","outputs":1,"noerr":0,"x":280,"y":220,"wires":[["c394a057.3ce9e"]]},{"id":"c394a057.3ce9e","type":"function","z":"29365c96.1284f4","name":"data split & convert to buffer","func":"var com_obj = flow.get('command') || [] ;\nvar com_str = com_obj[0] ;\nvar hex = '' ;\n\nif (msg.payload==='') {\n  flow.set('error', 'authorize error') ;\n}\n\nif (com_obj.length == 1) {\n  msg.complete = true ;\n  flow.set('command', []) ;\n} else {\n  com_obj.splice(0,1) ;\n  flow.set('command', com_obj) ;\n}\nif (com_str !== undefined) {\n  for (var i = 0; (i < com_str.length); i += 2) {\n    hex += String.fromCharCode('0x' + com_str.substr(i, 2)) ;\n  }\n  msg.payload = Buffer.from(hex,\"ascii\") ;\n  return msg ;\n}\n","outputs":1,"noerr":0,"x":480,"y":220,"wires":[["4c7e3d3e.a62cb4"]]},{"id":"faed9b7a.31a778","type":"function","z":"29365c96.1284f4","name":"check error","func":"if ( msg.payload === undefined ) {\n  msg.payload = 'command error' ;\n}\nreturn msg ;","outputs":1,"noerr":0,"x":810,"y":220,"wires":[["a5230d60.12009"]]},{"id":"5e618ace.d2f934","type":"function","z":"29365c96.1284f4","name":"data output","func":"var error = flow.get('error') || ''\nvar json_res = {} ;\nfor (i = 1; i<msg.payload.length+1; i++) {\n  json_res[\"response\" + String(i)] = msg.payload[i-1] ;\n}\nmsg.payload = json_res ;\nflow.set('status','ok') ;\n\nif (error !== '') {\n  msg.payload = error ;\n  flow.set('error', '') ;\n}\n\nreturn msg ;\n","outputs":1,"noerr":0,"x":1090,"y":220,"wires":[["4ba8a683.734358"]]},{"id":"d12ff07.c576b1","type":"function","z":"29365c96.1284f4","name":"예시데이터","func":"\nmsg.payload = {\n \n  \"zone1\": {\n  \n  \"nowtemp\":22.7,\n  \"settemp\":154,\n  \"max\":50,\n  \"min\":50,\n  \"degree\":0,\n  \n  \"outpercent\":60,\n  \"current\":0,\n  \n  \"capacity\":0,\n  \n  \"error\":1\n\n\n  },\n  \n  \"zone2\": {\n  \n  \"nowtemp\":22.7,\n  \"settemp\":154,\n  \"max\":50,\n  \"min\":50,\n  \"outpercent\":0,\n  \"current\":1,\n  \"capacity\":0,\n  \"degree\":0,\n  \"error\":1\n\n\n  },\n  \n  \"zone3\": {\n  \n  \"nowtemp\":22.7,\n  \"settemp\":154,\n  \"max\":50,\n  \"min\":50,\n  \"outpercent\":0,\n  \"current\":0,\n  \"capacity\":0,\n  \"degree\":0,\n  \"error\":1\n\n\n  },\n  \n  \"zone4\": {\n  \n  \"nowtemp\":22.7,\n  \"settemp\":154,\n  \"max\":50,\n  \"min\":50,\n  \"outpercent\":0,\n  \"current\":0,\n  \"capacity\":0,\n  \"degree\":0,\n  \"error\":1\n\n\n  },\n  \n  \"zone5\": {\n  \n  \"nowtemp\":22.7,\n  \"settemp\":154,\n  \"max\":50,\n  \"min\":50,\n  \"outpercent\":0,\n  \"current\":0,\n  \"capacity\":0,\n  \"degree\":0,\n  \"error\":1\n\n\n  },\n  \n  \"zone6\": {\n  \n  \"nowtemp\":22.7,\n  \"settemp\":154,\n  \"max\":50,\n  \"min\":50,\n  \"outpercent\":0,\n  \"current\":0,\n  \"capacity\":0,\n  \"degree\":0,\n  \"error\":1\n\n\n  }\n}\n\nreturn msg\n  \n  \n  ","outputs":1,"noerr":0,"x":270,"y":400,"wires":[["e331ffec.ebe84"]]},{"id":"18448767.9d8ff9","type":"inject","z":"29365c96.1284f4","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":400,"wires":[["d12ff07.c576b1"]]},{"id":"e331ffec.ebe84","type":"link out","z":"29365c96.1284f4","name":"","links":["36765f9a.d03ec"],"x":375,"y":400,"wires":[]},{"id":"36765f9a.d03ec","type":"link in","z":"29365c96.1284f4","name":"","links":["e331ffec.ebe84"],"x":215,"y":500,"wires":[["6517dff3.7d1c6","abe0a127.6fa59","1a4f6242.91e10e","21ff4121.7fb5de","875b868.8297e78","472726de.146f88","a6bdefa2.8bf23","ab136282.ba4b4"]]},{"id":"8f4ce0b4.8707f","type":"function","z":"29365c96.1284f4","name":"temp","func":"var setting=msg.payload.setting\nvar upper=msg.payload.upper\nvar lower=msg.payload.lower\nvar now=msg.payload.nowtemp\n\n\nmsg={payload:now,control:{min:(setting-(lower*2)),max:(setting+(upper*2)),seg1:(setting-lower),seg2:(setting+upper)}};\nreturn msg;\n\n","outputs":1,"noerr":0,"x":470,"y":500,"wires":[["944c6725.a64cd8"]]},{"id":"132a6b55.0de715","type":"function","z":"29365c96.1284f4","name":"percent","func":"msg.payload=msg.payload.percent\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":580,"wires":[["4256bbe7.f61ce4"]]},{"id":"6517dff3.7d1c6","type":"function","z":"29365c96.1284f4","name":"zone1","func":"msg.payload={\n \n  \"setting\": msg.payload.zone1.settemp,\n  \"nowtemp\": msg.payload.zone1.nowtemp,\n  \"upper\": msg.payload.zone1.max,\n  \"lower\": msg.payload.zone1.min,\n  \"degree\":msg.payload.zone1.degree,\n  \n  \"currents\":msg.payload.zone1.current,\n  \"percent\":msg.payload.zone1.outpercent,\n  \n  \"capacity\":msg.payload.zone1.capacity,\n  \n  \"error\":msg.payload.zone1.error\n  \n};\n\nreturn msg;","outputs":1,"noerr":0,"x":310,"y":500,"wires":[["8f4ce0b4.8707f","132a6b55.0de715","c4cf2225.e65cd","1c0a0015.8e634"]]},{"id":"1644eef.b21e411","type":"ui_level","z":"29365c96.1284f4","group":"15e03d85.cf2df2","order":2,"width":4,"height":3,"name":"temp2","label":"temp","colorHi":"#e60000","colorWarn":"#008040","colorNormal":"#0000a0","colorOff":"#000000","min":0,"max":100,"segWarn":"30","segHigh":"60","unit":"","layout":"sh","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"fixed","textoptions":"default","colorText":"#eeeeee","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":3000,"x":650,"y":720,"wires":[]},{"id":"161538e5.b72247","type":"function","z":"29365c96.1284f4","name":"temp","func":"var setting=msg.payload.setting\nvar upper=msg.payload.upper\nvar lower=msg.payload.lower\nvar now=msg.payload.nowtemp\n\n\nmsg={payload:now,control:{min:(setting-(lower*2)),max:(setting+(upper*2)),seg1:(setting-lower),seg2:(setting+upper)}};\nreturn msg;\n\n","outputs":1,"noerr":0,"x":470,"y":720,"wires":[["1644eef.b21e411"]]},{"id":"ed486df4.84d81","type":"function","z":"29365c96.1284f4","name":"percent","func":"msg.payload=msg.payload.percent\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":800,"wires":[["89ecfe8.7f2ff"]]},{"id":"89ecfe8.7f2ff","type":"ui_level","z":"29365c96.1284f4","group":"15e03d85.cf2df2","order":4,"width":3,"height":4,"name":"current2","label":"current percent","colorHi":"#e60000","colorWarn":"#ff9900","colorNormal":"#00b33c","colorOff":"#595959","min":0,"max":100,"segWarn":"","segHigh":"","unit":"","layout":"sv","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"fixed","textoptions":"default","colorText":"#eeeeee","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":3000,"x":660,"y":800,"wires":[]},{"id":"a1534089.69cda","type":"ui_level","z":"29365c96.1284f4","group":"a475e1da.9665d","order":2,"width":4,"height":3,"name":"temp3","label":"temp","colorHi":"#e60000","colorWarn":"#008040","colorNormal":"#0000a0","colorOff":"#000000","min":0,"max":100,"segWarn":"30","segHigh":"60","unit":"","layout":"sh","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"fixed","textoptions":"default","colorText":"#eeeeee","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":3000,"x":650,"y":940,"wires":[]},{"id":"ff5dacad.21906","type":"function","z":"29365c96.1284f4","name":"temp","func":"var setting=msg.payload.setting\nvar upper=msg.payload.upper\nvar lower=msg.payload.lower\nvar now=msg.payload.nowtemp\n\n\nmsg={payload:now,control:{min:(setting-(lower*2)),max:(setting+(upper*2)),seg1:(setting-lower),seg2:(setting+upper)}};\nreturn msg;\n\n","outputs":1,"noerr":0,"x":470,"y":940,"wires":[["a1534089.69cda"]]},{"id":"96ae890d.d42428","type":"function","z":"29365c96.1284f4","name":"percent","func":"msg.payload=msg.payload.percent\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":1020,"wires":[["c7c42559.f39bc8"]]},{"id":"c7c42559.f39bc8","type":"ui_level","z":"29365c96.1284f4","group":"a475e1da.9665d","order":4,"width":3,"height":4,"name":"current3","label":"current percent","colorHi":"#e60000","colorWarn":"#ff9900","colorNormal":"#00b33c","colorOff":"#595959","min":0,"max":100,"segWarn":"","segHigh":"","unit":"","layout":"sv","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"fixed","textoptions":"default","colorText":"#eeeeee","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":3000,"x":660,"y":1020,"wires":[]},{"id":"322232c7.5f49ee","type":"ui_level","z":"29365c96.1284f4","group":"32d7fd07.521b72","order":2,"width":4,"height":3,"name":"temp4","label":"temp","colorHi":"#e60000","colorWarn":"#008040","colorNormal":"#0000a0","colorOff":"#000000","min":0,"max":100,"segWarn":"30","segHigh":"60","unit":"","layout":"sh","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"fixed","textoptions":"default","colorText":"#eeeeee","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":3000,"x":650,"y":1160,"wires":[]},{"id":"8d2caaf2.086278","type":"function","z":"29365c96.1284f4","name":"temp","func":"var setting=msg.payload.setting\nvar upper=msg.payload.upper\nvar lower=msg.payload.lower\nvar now=msg.payload.nowtemp\n\n\nmsg={payload:now,control:{min:(setting-(lower*2)),max:(setting+(upper*2)),seg1:(setting-lower),seg2:(setting+upper)}};\nreturn msg;\n\n","outputs":1,"noerr":0,"x":470,"y":1160,"wires":[["322232c7.5f49ee"]]},{"id":"7ff88782.6c8798","type":"function","z":"29365c96.1284f4","name":"percent","func":"msg.payload=msg.payload.percent\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":1240,"wires":[["fc59021d.1e533"]]},{"id":"fc59021d.1e533","type":"ui_level","z":"29365c96.1284f4","group":"32d7fd07.521b72","order":4,"width":3,"height":4,"name":"current4","label":"current percent","colorHi":"#e60000","colorWarn":"#ff9900","colorNormal":"#00b33c","colorOff":"#595959","min":0,"max":100,"segWarn":"","segHigh":"","unit":"","layout":"sv","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"fixed","textoptions":"default","colorText":"#eeeeee","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":3000,"x":660,"y":1240,"wires":[]},{"id":"fe806efa.44d4a","type":"ui_level","z":"29365c96.1284f4","group":"91d99c0f.65bd7","order":2,"width":4,"height":3,"name":"temp5","label":"temp","colorHi":"#e60000","colorWarn":"#008040","colorNormal":"#0000a0","colorOff":"#000000","min":0,"max":100,"segWarn":"30","segHigh":"60","unit":"","layout":"sh","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"fixed","textoptions":"default","colorText":"#eeeeee","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":3000,"x":650,"y":1380,"wires":[]},{"id":"f646b1e9.4972","type":"function","z":"29365c96.1284f4","name":"temp","func":"var setting=msg.payload.setting\nvar upper=msg.payload.upper\nvar lower=msg.payload.lower\nvar now=msg.payload.nowtemp\n\n\nmsg={payload:now,control:{min:(setting-(lower*2)),max:(setting+(upper*2)),seg1:(setting-lower),seg2:(setting+upper)}};\nreturn msg;\n\n","outputs":1,"noerr":0,"x":470,"y":1380,"wires":[["fe806efa.44d4a"]]},{"id":"6a9168c5.44d5a8","type":"function","z":"29365c96.1284f4","name":"percent","func":"msg.payload=msg.payload.percent\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":1460,"wires":[["cb2802b0.3403e"]]},{"id":"cb2802b0.3403e","type":"ui_level","z":"29365c96.1284f4","group":"91d99c0f.65bd7","order":4,"width":3,"height":4,"name":"current5","label":"current percent","colorHi":"#e60000","colorWarn":"#ff9900","colorNormal":"#00b33c","colorOff":"#595959","min":0,"max":100,"segWarn":"","segHigh":"","unit":"","layout":"sv","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"fixed","textoptions":"default","colorText":"#eeeeee","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":3000,"x":660,"y":1460,"wires":[]},{"id":"54337deb.c05b54","type":"ui_level","z":"29365c96.1284f4","group":"4fecdbda.75ea04","order":2,"width":4,"height":3,"name":"temp6","label":"temp","colorHi":"#e60000","colorWarn":"#008040","colorNormal":"#0000a0","colorOff":"#000000","min":0,"max":100,"segWarn":"30","segHigh":"60","unit":"","layout":"sh","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"fixed","textoptions":"default","colorText":"#eeeeee","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":3000,"x":650,"y":1600,"wires":[]},{"id":"eefebae3.dc15b8","type":"function","z":"29365c96.1284f4","name":"temp","func":"var setting=msg.payload.setting\nvar upper=msg.payload.upper\nvar lower=msg.payload.lower\nvar now=msg.payload.nowtemp\n\n\nmsg={payload:now,control:{min:(setting-(lower*2)),max:(setting+(upper*2)),seg1:(setting-lower),seg2:(setting+upper)}};\nreturn msg;\n\n","outputs":1,"noerr":0,"x":470,"y":1600,"wires":[["54337deb.c05b54"]]},{"id":"23579534.10c72a","type":"function","z":"29365c96.1284f4","name":"percent","func":"msg.payload=msg.payload.percent\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":1680,"wires":[["2586bdd1.3a62f2"]]},{"id":"2586bdd1.3a62f2","type":"ui_level","z":"29365c96.1284f4","group":"4fecdbda.75ea04","order":4,"width":3,"height":4,"name":"current6","label":"current percent","colorHi":"#e60000","colorWarn":"#ff9900","colorNormal":"#00b33c","colorOff":"#595959","min":0,"max":100,"segWarn":"","segHigh":"","unit":"","layout":"sv","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"fixed","textoptions":"default","colorText":"#eeeeee","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":3000,"x":660,"y":1680,"wires":[]},{"id":"944c6725.a64cd8","type":"ui_level","z":"29365c96.1284f4","group":"b9a364cf.72f4b8","order":1,"width":4,"height":3,"name":"temp1","label":"temp","colorHi":"#e60000","colorWarn":"#008040","colorNormal":"#0000a0","colorOff":"#000000","min":0,"max":100,"segWarn":"30","segHigh":"60","unit":"","layout":"sh","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"fixed","textoptions":"default","colorText":"#eeeeee","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":3000,"x":650,"y":500,"wires":[]},{"id":"4256bbe7.f61ce4","type":"ui_level","z":"29365c96.1284f4","group":"b9a364cf.72f4b8","order":3,"width":3,"height":4,"name":"current1","label":"current percent","colorHi":"#e60000","colorWarn":"#ff9900","colorNormal":"#00b33c","colorOff":"#595959","min":0,"max":100,"segWarn":"","segHigh":"","unit":"","layout":"sv","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"fixed","textoptions":"default","colorText":"#eeeeee","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":3000,"x":660,"y":580,"wires":[]},{"id":"c4cf2225.e65cd","type":"function","z":"29365c96.1284f4","name":"current","func":"msg.payload=msg.payload.currents\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":540,"wires":[["6e83d01.dce733"]]},{"id":"6e83d01.dce733","type":"ui_text","z":"29365c96.1284f4","group":"b9a364cf.72f4b8","order":4,"width":3,"height":2,"name":"current1","label":"current","format":"{{msg.payload}} A","layout":"col-center","x":660,"y":540,"wires":[]},{"id":"c2d54602.219b18","type":"function","z":"29365c96.1284f4","name":"current","func":"msg.payload=msg.payload.currents\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":760,"wires":[["10f0a5aa.8a885a"]]},{"id":"10f0a5aa.8a885a","type":"ui_text","z":"29365c96.1284f4","group":"15e03d85.cf2df2","order":5,"width":3,"height":2,"name":"current2","label":"current","format":"{{msg.payload}} A","layout":"col-center","x":660,"y":760,"wires":[]},{"id":"5f36b51a.c7488c","type":"function","z":"29365c96.1284f4","name":"current","func":"msg.payload=msg.payload.currents\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":980,"wires":[["c1b2731d.26d64"]]},{"id":"c1b2731d.26d64","type":"ui_text","z":"29365c96.1284f4","group":"a475e1da.9665d","order":5,"width":3,"height":2,"name":"current3","label":"current","format":"{{msg.payload}} A","layout":"col-center","x":660,"y":980,"wires":[]},{"id":"7672a1d2.75dea","type":"function","z":"29365c96.1284f4","name":"current","func":"msg.payload=msg.payload.currents\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":1200,"wires":[["5669bdc3.fc0024"]]},{"id":"5669bdc3.fc0024","type":"ui_text","z":"29365c96.1284f4","group":"32d7fd07.521b72","order":5,"width":3,"height":2,"name":"current4","label":"current","format":"{{msg.payload}} A","layout":"col-center","x":660,"y":1200,"wires":[]},{"id":"8677654d.525b18","type":"function","z":"29365c96.1284f4","name":"current","func":"msg.payload=msg.payload.currents\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":1420,"wires":[["2768e9ef.c549a6"]]},{"id":"2768e9ef.c549a6","type":"ui_text","z":"29365c96.1284f4","group":"91d99c0f.65bd7","order":5,"width":3,"height":2,"name":"current5","label":"current","format":"{{msg.payload}} A","layout":"col-center","x":660,"y":1420,"wires":[]},{"id":"a914b810.6db3a8","type":"function","z":"29365c96.1284f4","name":"current","func":"msg.payload=msg.payload.currents\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":1640,"wires":[["9179c63e.7a27d8"]]},{"id":"9179c63e.7a27d8","type":"ui_text","z":"29365c96.1284f4","group":"4fecdbda.75ea04","order":5,"width":3,"height":2,"name":"current6","label":"current","format":"{{msg.payload}} A","layout":"col-center","x":660,"y":1640,"wires":[]},{"id":"abe0a127.6fa59","type":"function","z":"29365c96.1284f4","name":"zone2","func":"msg.payload={\n \n  \"setting\": msg.payload.zone2.settemp,\n  \"nowtemp\": msg.payload.zone2.nowtemp,\n  \"upper\": msg.payload.zone2.max,\n  \"lower\": msg.payload.zone2.min,\n  \"degree\":msg.payload.zone2.degree,\n  \n  \"currents\":msg.payload.zone2.current,\n  \"percent\":msg.payload.zone2.outpercent,\n  \n  \"capacity\":msg.payload.zone2.capacity,\n  \n  \"error\":msg.payload.zone2.error\n  \n};\n\nreturn msg;","outputs":1,"noerr":0,"x":310,"y":720,"wires":[["161538e5.b72247","ed486df4.84d81","c2d54602.219b18","9c95c1f.a66f94"]]},{"id":"1a4f6242.91e10e","type":"function","z":"29365c96.1284f4","name":"zone3","func":"msg.payload={\n \n  \"setting\": msg.payload.zone3.settemp,\n  \"nowtemp\": msg.payload.zone3.nowtemp,\n  \"upper\": msg.payload.zone3.max,\n  \"lower\": msg.payload.zone3.min,\n  \"degree\":msg.payload.zone3.degree,\n  \n  \"currents\":msg.payload.zone3.current,\n  \"percent\":msg.payload.zone3.outpercent,\n  \n  \"capacity\":msg.payload.zone3.capacity,\n  \n  \"error\":msg.payload.zone3.error\n  \n};\n\nreturn msg;","outputs":1,"noerr":0,"x":310,"y":940,"wires":[["ff5dacad.21906","96ae890d.d42428","5f36b51a.c7488c","9cb35d1b.42f09"]]},{"id":"21ff4121.7fb5de","type":"function","z":"29365c96.1284f4","name":"zone4","func":"msg.payload={\n \n  \"setting\": msg.payload.zone4.settemp,\n  \"nowtemp\": msg.payload.zone4.nowtemp,\n  \"upper\": msg.payload.zone4.max,\n  \"lower\": msg.payload.zone4.min,\n  \"degree\":msg.payload.zone4.degree,\n  \n  \"currents\":msg.payload.zone4.current,\n  \"percent\":msg.payload.zone4.outpercent,\n  \n  \"capacity\":msg.payload.zone4.capacity,\n  \n  \"error\":msg.payload.zone4.error\n  \n};\n\nreturn msg;","outputs":1,"noerr":0,"x":310,"y":1160,"wires":[["8d2caaf2.086278","7ff88782.6c8798","7672a1d2.75dea","3f4e37f3.327ab8"]]},{"id":"875b868.8297e78","type":"function","z":"29365c96.1284f4","name":"zone5","func":"msg.payload={\n \n  \"setting\": msg.payload.zone5.settemp,\n  \"nowtemp\": msg.payload.zone5.nowtemp,\n  \"upper\": msg.payload.zone5.max,\n  \"lower\": msg.payload.zone5.min,\n  \"degree\":msg.payload.zone5.degree,\n  \n  \"currents\":msg.payload.zone5.current,\n  \"percent\":msg.payload.zone5.outpercent,\n  \n  \"capacity\":msg.payload.zone5.capacity,\n  \n  \"error\":msg.payload.zone5.error\n  \n};\n\nreturn msg;","outputs":1,"noerr":0,"x":310,"y":1380,"wires":[["f646b1e9.4972","6a9168c5.44d5a8","8677654d.525b18","3fbf892a.179596"]]},{"id":"472726de.146f88","type":"function","z":"29365c96.1284f4","name":"zone6","func":"msg.payload={\n \n  \"setting\": msg.payload.zone6.settemp,\n  \"nowtemp\": msg.payload.zone6.nowtemp,\n  \"upper\": msg.payload.zone6.max,\n  \"lower\": msg.payload.zone6.min,\n  \"degree\":msg.payload.zone6.degree,\n  \n  \"currents\":msg.payload.zone6.current,\n  \"percent\":msg.payload.zone6.outpercent,\n  \n  \"capacity\":msg.payload.zone6.capacity,\n  \n  \"error\":msg.payload.zone6.error\n  \n};\n\nreturn msg;","outputs":1,"noerr":0,"x":310,"y":1600,"wires":[["eefebae3.dc15b8","23579534.10c72a","a914b810.6db3a8","fb76e2c9.4d158"]]},{"id":"2ee1d0c4.37f1b","type":"inject","z":"29365c96.1284f4","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":920,"y":540,"wires":[["8c1727cc.17b348"]]},{"id":"8c1727cc.17b348","type":"function","z":"29365c96.1284f4","name":"","func":"msg.payload={\n\n  \"$schema\": \"https://vega.github.io/schema/vega/v5.json\",\n  \"width\": 500,\n  \"height\": 200,\n  \"padding\": 5,\n\n  \"signals\": [\n    {\n      \"name\": \"interpolate\",\n      \"value\": \"monotone\",\n      \"bind\": {\n        \"input\": \"select\",\n        \"options\": [\n          \"basis\",\n          \"cardinal\",\n          \"catmull-rom\",\n          \"linear\",\n          \"monotone\",\n          \"natural\",\n          \"step\",\n          \"step-after\",\n          \"step-before\"\n        ]\n      }\n    }\n  ],\n\n  \"data\": [\n    {\n      \"name\": \"table\",\n      \"values\": [\n        {\"u\": 1,  \"v\": 28}, {\"u\": 2,  \"v\": 5},\n        {\"u\": 3,  \"v\": 43}, {\"u\": 4,  \"v\": 1},\n        {\"u\": 5,  \"v\": 81}, {\"u\": 6,  \"v\": 53},\n        {\"u\": 7,  \"v\": 19}, {\"u\": 8,  \"v\": 7},\n        {\"u\": 9,  \"v\": 52}, {\"u\": 10, \"v\": 48},\n        {\"u\": 11, \"v\": 24}, {\"u\": 12, \"v\": 49},\n        {\"u\": 13, \"v\": 87}, {\"u\": 14, \"v\": 66},\n        {\"u\": 15, \"v\": 17}, {\"u\": 16, \"v\": 27},\n        {\"u\": 17, \"v\": 68}, {\"u\": 18, \"v\": 16},\n        {\"u\": 19, \"v\": 49}, {\"u\": 20, \"v\": 5}\n      ]\n    }\n  ],\n\n  \"scales\": [\n    {\n      \"name\": \"xscale\",\n      \"type\": \"linear\",\n      \"range\": \"width\",\n      \"zero\": false,\n      \"domain\": {\"data\": \"table\", \"field\": \"u\"}\n    },\n    {\n      \"name\": \"yscale\",\n      \"type\": \"linear\",\n      \"range\": \"height\",\n      \"nice\": true,\n      \"zero\": true,\n      \"domain\": {\"data\": \"table\", \"field\": \"v\"}\n    }\n  ],\n\n  \"axes\": [\n    {\"orient\": \"bottom\", \"scale\": \"xscale\", \"tickCount\": 20},\n    {\"orient\": \"left\", \"scale\": \"yscale\"}\n  ],\n\n  \"marks\": [\n    {\n      \"type\": \"area\",\n      \"from\": {\"data\": \"table\"},\n      \"encode\": {\n        \"enter\": {\n          \"x\": {\"scale\": \"xscale\", \"field\": \"u\"},\n          \"y\": {\"scale\": \"yscale\", \"field\": \"v\"},\n          \"y2\": {\"scale\": \"yscale\", \"value\": 0},\n          \"fill\": {\"value\": \"steelblue\"}\n        },\n        \"update\": {\n          \"interpolate\": {\"signal\": \"interpolate\"},\n          \"fillOpacity\": {\"value\": 1}\n        },\n        \"hover\": {\n          \"fillOpacity\": {\"value\": 0.5}\n        }\n      }\n    }\n  ]\n\n}\nreturn msg;","outputs":1,"noerr":0,"x":980,"y":620,"wires":[[]]},{"id":"9a481a71.e33028","type":"ui_chart","z":"29365c96.1284f4","name":"","group":"b9a364cf.72f4b8","order":7,"width":0,"height":0,"label":"capacity","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":660,"y":620,"wires":[[]]},{"id":"1c0a0015.8e634","type":"function","z":"29365c96.1284f4","name":"capacity","func":"msg.payload=msg.payload.capacity\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":620,"wires":[["9a481a71.e33028"]]},{"id":"1a9b433a.9799ad","type":"ui_chart","z":"29365c96.1284f4","name":"","group":"15e03d85.cf2df2","order":7,"width":0,"height":0,"label":"capacity","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":660,"y":840,"wires":[[]]},{"id":"9c95c1f.a66f94","type":"function","z":"29365c96.1284f4","name":"capacity","func":"msg.payload=msg.payload.capacity\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":840,"wires":[["1a9b433a.9799ad"]]},{"id":"1815d817.778758","type":"ui_chart","z":"29365c96.1284f4","name":"","group":"a475e1da.9665d","order":7,"width":0,"height":0,"label":"capacity","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":660,"y":1060,"wires":[[]]},{"id":"9cb35d1b.42f09","type":"function","z":"29365c96.1284f4","name":"capacity","func":"msg.payload=msg.payload.capacity\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":1060,"wires":[["1815d817.778758"]]},{"id":"5ac5edbd.6b8f94","type":"ui_chart","z":"29365c96.1284f4","name":"","group":"32d7fd07.521b72","order":7,"width":0,"height":0,"label":"capacity","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":660,"y":1280,"wires":[[]]},{"id":"3f4e37f3.327ab8","type":"function","z":"29365c96.1284f4","name":"capacity","func":"msg.payload=msg.payload.capacity\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":1280,"wires":[["5ac5edbd.6b8f94"]]},{"id":"945a41e4.0ef88","type":"ui_chart","z":"29365c96.1284f4","name":"","group":"91d99c0f.65bd7","order":7,"width":0,"height":0,"label":"capacity","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":660,"y":1500,"wires":[[]]},{"id":"3fbf892a.179596","type":"function","z":"29365c96.1284f4","name":"capacity","func":"msg.payload=msg.payload.capacity\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":1500,"wires":[["945a41e4.0ef88"]]},{"id":"a06d6217.7190e","type":"ui_chart","z":"29365c96.1284f4","name":"","group":"4fecdbda.75ea04","order":7,"width":0,"height":0,"label":"capacity","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":660,"y":1720,"wires":[[]]},{"id":"fb76e2c9.4d158","type":"function","z":"29365c96.1284f4","name":"capacity","func":"msg.payload=msg.payload.capacity\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":1720,"wires":[["a06d6217.7190e"]]},{"id":"e0285376.87d3e","type":"ui_level","z":"29365c96.1284f4","group":"e8ab483d.e06cf8","order":1,"width":4,"height":3,"name":"temp7","label":"temp","colorHi":"#e60000","colorWarn":"#008040","colorNormal":"#0000a0","colorOff":"#000000","min":0,"max":100,"segWarn":"30","segHigh":"60","unit":"","layout":"sh","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"fixed","textoptions":"default","colorText":"#eeeeee","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":3000,"x":650,"y":1820,"wires":[]},{"id":"21d20475.f79eac","type":"function","z":"29365c96.1284f4","name":"temp","func":"var setting=msg.payload.setting\nvar upper=msg.payload.upper\nvar lower=msg.payload.lower\nvar now=msg.payload.nowtemp\n\n\nmsg={payload:now,control:{min:(setting-(lower*2)),max:(setting+(upper*2)),seg1:(setting-lower),seg2:(setting+upper)}};\nreturn msg;\n\n","outputs":1,"noerr":0,"x":470,"y":1820,"wires":[["e0285376.87d3e"]]},{"id":"9cb64cba.fc404","type":"function","z":"29365c96.1284f4","name":"percent","func":"msg.payload=msg.payload.percent\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":1900,"wires":[["878c8a76.49abc8"]]},{"id":"878c8a76.49abc8","type":"ui_level","z":"29365c96.1284f4","group":"e8ab483d.e06cf8","order":5,"width":3,"height":4,"name":"current7","label":"current percent","colorHi":"#e60000","colorWarn":"#ff9900","colorNormal":"#00b33c","colorOff":"#595959","min":0,"max":100,"segWarn":"","segHigh":"","unit":"","layout":"sv","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"fixed","textoptions":"default","colorText":"#eeeeee","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":3000,"x":660,"y":1900,"wires":[]},{"id":"cd9561ad.91c05","type":"function","z":"29365c96.1284f4","name":"current","func":"msg.payload=msg.payload.currents\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":1860,"wires":[["ba31ede0.96141"]]},{"id":"ba31ede0.96141","type":"ui_text","z":"29365c96.1284f4","group":"e8ab483d.e06cf8","order":6,"width":3,"height":2,"name":"current7","label":"current","format":"{{msg.payload}} A","layout":"col-center","x":660,"y":1860,"wires":[]},{"id":"a6bdefa2.8bf23","type":"function","z":"29365c96.1284f4","name":"zone7","func":"msg.payload={\n \n  \"setting\": msg.payload.zone7.settemp,\n  \"nowtemp\": msg.payload.zone7.nowtemp,\n  \"upper\": msg.payload.zone7.max,\n  \"lower\": msg.payload.zone7.min,\n  \"degree\":msg.payload.zone7.degree,\n  \n  \"currents\":msg.payload.zone7.current,\n  \"percent\":msg.payload.zone7.outpercent,\n  \n  \"capacity\":msg.payload.zone7.capacity,\n  \n  \"error\":msg.payload.zone7.error\n  \n};\n\nreturn msg;","outputs":1,"noerr":0,"x":310,"y":1820,"wires":[["21d20475.f79eac","9cb64cba.fc404","cd9561ad.91c05","8cbd29d3.382cf8"]]},{"id":"c36281c0.19b8a","type":"ui_chart","z":"29365c96.1284f4","name":"","group":"e8ab483d.e06cf8","order":9,"width":0,"height":0,"label":"capacity","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":660,"y":1940,"wires":[[]]},{"id":"8cbd29d3.382cf8","type":"function","z":"29365c96.1284f4","name":"capacity","func":"msg.payload=msg.payload.capacity\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":1940,"wires":[["c36281c0.19b8a"]]},{"id":"7d03ba66.3b67c4","type":"ui_level","z":"29365c96.1284f4","group":"74f13e4c.7d82c","order":1,"width":4,"height":3,"name":"temp8","label":"temp","colorHi":"#e60000","colorWarn":"#008040","colorNormal":"#0000a0","colorOff":"#000000","min":0,"max":100,"segWarn":"30","segHigh":"60","unit":"","layout":"sh","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"fixed","textoptions":"default","colorText":"#eeeeee","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":3000,"x":650,"y":2040,"wires":[]},{"id":"6f71413e.2fe35","type":"function","z":"29365c96.1284f4","name":"temp","func":"var setting=msg.payload.setting\nvar upper=msg.payload.upper\nvar lower=msg.payload.lower\nvar now=msg.payload.nowtemp\n\n\nmsg={payload:now,control:{min:(setting-(lower*2)),max:(setting+(upper*2)),seg1:(setting-lower),seg2:(setting+upper)}};\nreturn msg;\n\n","outputs":1,"noerr":0,"x":470,"y":2040,"wires":[["7d03ba66.3b67c4"]]},{"id":"abef9b73.8ee278","type":"function","z":"29365c96.1284f4","name":"percent","func":"msg.payload=msg.payload.percent\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":2120,"wires":[["a7d582c6.eea05"]]},{"id":"a7d582c6.eea05","type":"ui_level","z":"29365c96.1284f4","group":"74f13e4c.7d82c","order":5,"width":3,"height":4,"name":"current8","label":"current percent","colorHi":"#e60000","colorWarn":"#ff9900","colorNormal":"#00b33c","colorOff":"#595959","min":0,"max":100,"segWarn":"","segHigh":"","unit":"","layout":"sv","channelA":"","channelB":"","decimals":0,"animations":"soft","shape":2,"colorschema":"fixed","textoptions":"default","colorText":"#eeeeee","fontLabel":"","fontValue":"","fontSmall":"","colorFromTheme":true,"textAnimations":false,"hideValue":false,"tickmode":"off","peakmode":false,"peaktime":3000,"x":660,"y":2120,"wires":[]},{"id":"382edc68.f158f4","type":"function","z":"29365c96.1284f4","name":"current","func":"msg.payload=msg.payload.currents\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":2080,"wires":[["d20f649c.16dc18"]]},{"id":"d20f649c.16dc18","type":"ui_text","z":"29365c96.1284f4","group":"74f13e4c.7d82c","order":6,"width":3,"height":2,"name":"current8","label":"current","format":"{{msg.payload}} A","layout":"col-center","x":660,"y":2080,"wires":[]},{"id":"ab136282.ba4b4","type":"function","z":"29365c96.1284f4","name":"zone8","func":"msg.payload={\n \n  \"setting\": msg.payload.zone8.settemp,\n  \"nowtemp\": msg.payload.zone8.nowtemp,\n  \"upper\": msg.payload.zone8.max,\n  \"lower\": msg.payload.zone8.min,\n  \"degree\":msg.payload.zone8.degree,\n  \n  \"currents\":msg.payload.zone8.current,\n  \"percent\":msg.payload.zone8.outpercent,\n  \n  \"capacity\":msg.payload.zone8.capacity,\n  \n  \"error\":msg.payload.zone8.error\n  \n};\n\nreturn msg;","outputs":1,"noerr":0,"x":310,"y":2040,"wires":[["6f71413e.2fe35","abef9b73.8ee278","382edc68.f158f4","37f7f762.59a998"]]},{"id":"ec9ca32b.14968","type":"ui_chart","z":"29365c96.1284f4","name":"","group":"74f13e4c.7d82c","order":9,"width":0,"height":0,"label":"capacity","chartType":"line","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"","ymax":"","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#aec7e8","#ff7f0e","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":1,"x":660,"y":2160,"wires":[[]]},{"id":"37f7f762.59a998","type":"function","z":"29365c96.1284f4","name":"capacity","func":"msg.payload=msg.payload.capacity\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":2160,"wires":[["ec9ca32b.14968"]]},{"id":"10f92bd.253c7d4","type":"comment","z":"29365c96.1284f4","name":"main loop","info":"","x":80,"y":60,"wires":[]},{"id":"cd4dd2f1.4b2","type":"comment","z":"29365c96.1284f4","name":"api","info":"","x":70,"y":180,"wires":[]},{"id":"a94fca78.22bc98","type":"mosca in","z":"d1374567.e2bae8","mqtt_port":1883,"mqtt_ws_port":8080,"name":"","username":"","password":"","dburl":"","x":130,"y":100,"wires":[[]]},{"id":"be6062a9.a3db9","type":"mqtt in","z":"d1374567.e2bae8","name":"","topic":"%MW100","qos":"2","datatype":"auto","broker":"439ec062.b4d0a","x":120,"y":420,"wires":[["b627ed42.5a745"]]},{"id":"b627ed42.5a745","type":"debug","z":"d1374567.e2bae8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":310,"y":420,"wires":[]},{"id":"658a9cdc.34a3d4","type":"mqtt in","z":"d1374567.e2bae8","name":"","topic":"%DB10","qos":"2","datatype":"auto","broker":"439ec062.b4d0a","x":110,"y":500,"wires":[["7488874e.d6b5a8"]]},{"id":"7488874e.d6b5a8","type":"debug","z":"d1374567.e2bae8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":310,"y":500,"wires":[]},{"id":"cd0889b8.482cd8","type":"function","z":"d1374567.e2bae8","name":"Get data from plc","func":"var length = msg.payload[30] + msg.payload[31]*256\nvar data = [length]\nfor (i = 0; i < length; i++) {\n  data.push(msg.payload[i+32])\n}\nmsg.payload = data\nreturn msg;","outputs":1,"noerr":0,"x":790,"y":140,"wires":[["52de87d7.6acd18"]]},{"id":"52de87d7.6acd18","type":"join","z":"d1374567.e2bae8","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"num","reduceFixup":"","x":910,"y":180,"wires":[["bcef3a46.b60868"]]},{"id":"bcef3a46.b60868","type":"function","z":"d1374567.e2bae8","name":"Make json","func":"var start = msg.payload[0] //5\nvar length = msg.payload[1][0] //10\nvar data = msg.payload[1].splice(1,length) //[0 0 0 0 0 0...]\nvar data_comb = []\nvar str = start\nvar cut = start.substring(0,3)\nstr = str.replace(/[^0-9]/g,'');\nvar stn = Number(str)/2\nfor (i=0; i < data.length; i+=2) {\n  data_comb.push(data[i]+data[i+1]*256)\n}\n\nvar start_array = []\nfor (i=0; i<data_comb.length; i++) {\n  start_array.push(stn+i)\n}\n\nvar data_json = {}\nfor (i = 0; i<length/2; i++) {\n  data_json[String(cut+start_array[i])] = String(data_comb[i]);\n}\nmsg.payload = data_json\nreturn msg;","outputs":1,"noerr":0,"x":1050,"y":180,"wires":[["4a2115af.089a2c"]]},{"id":"f984ea2f.70bc28","type":"debug","z":"d1374567.e2bae8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1470,"y":180,"wires":[]},{"id":"6959cc58.fb23a4","type":"function","z":"d1374567.e2bae8","name":"Json to ascii cord (연속)","func":"msg.host = msg.payload.ip\nmsg.port = msg.payload.port\nfunction u2h(uni){\n  var resultlist = [] ;\n  for (i = 0; i<uni.length; i++) { //uni 길이만큼 반복\n    hex = uni.charCodeAt(i).toString(16) ; //uni에서 i번째 문자를 16진법으로 변환하여 hex에 지정\n    resultlist.push((\"0x\"+hex)) ;//hex값을 resultlist에 저장\n  }\n  return resultlist ;\n}\nvar protocol1 = [0x4C, 0x53, 0x49, 0x53, 0x2D, 0x58, 0x47, 0x54, 0x00, 0x00, 0x00, 0x00, 0xA0, 0x33, 0x02, 0x00]\nvar protocol2 = [0x00, 0x03, 0x00, 0x54, 0x00, 0x14, 0x00, 0x00, 0x00, 0x01, 0x00]\nvar protocol3 = [0x00]\nvar protocol = protocol1.concat(\"0x\"+(msg.payload.adress.length+12).toString(16)).concat(protocol2).concat(\"0x\"+(msg.payload.adress.length).toString(16))\n.concat(protocol3).concat(u2h(msg.payload.adress).concat(\"0x\"+(msg.payload.amount).toString(16)).concat(protocol3))\n//, 0x25, 0x44, 0x57, 0x30, 0x30, 0x30, 0x30, 0x31\n// msg.payload는 DW0001과 같은 문자\n\nvar protocol_ascii = ''\nfor (i=0; i<protocol.length;i++) {\n  protocol_ascii += String.fromCharCode(protocol[i])\n}\nmsg.payload = Buffer.from(protocol_ascii,\"ascii\")\nreturn msg ;","outputs":1,"noerr":0,"x":450,"y":140,"wires":[["e55caf63.abb76"]]},{"id":"300ac942.7f43b6","type":"inject","z":"d1374567.e2bae8","name":"연속읽기 example","topic":"12","payload":"{\"ip\":\"192.168.33.2\",\"port\":2004,\"button\":0,\"amount\":14,\"adress\":\"%DB00010\"}","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":140,"wires":[["649ec67c.3740b8"]]},{"id":"649ec67c.3740b8","type":"switch","z":"d1374567.e2bae8","name":"switch","property":"payload.button","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"str"},{"t":"eq","v":"1","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":270,"y":220,"wires":[["6959cc58.fb23a4","7854a9f3.b4abb8"],["e298a04e.f3bab"]]},{"id":"e55caf63.abb76","type":"tcp request","z":"d1374567.e2bae8","server":"","port":"","out":"time","splitc":"0","name":"","x":630,"y":140,"wires":[["cd0889b8.482cd8"]]},{"id":"7854a9f3.b4abb8","type":"function","z":"d1374567.e2bae8","name":"Get start point","func":"msg.payload = msg.payload.adress\nreturn msg;","outputs":1,"noerr":0,"x":420,"y":180,"wires":[["52de87d7.6acd18"]]},{"id":"4a2115af.089a2c","type":"function","z":"d1374567.e2bae8","name":"Make mqtt with topics","func":"var require = global.get('require');\nvar mqtt = require('mqtt');\n\nvar options = {\n  host: '127.0.0.1',\n  port: 1883\n  //protocol: 'mqtts',\n  //username:\"steve\",\n  //password:\"password\"\n};\n\nvar client = mqtt.connect(options);\n\n//connected\nclient.on(\"connect\", () => {\n  console.log(\"connected\"+ client.connected);\n})\n\n//error\nclient.on(\"error\", (error) => {\n  console.log(\"Can't connect\" + error);\n})\n\nfor (var key in msg.payload) {\n  var topic = key\n  var message = msg.payload[key]\n  client.publish(topic, message)\n}\nreturn msg;","outputs":1,"noerr":0,"x":1260,"y":180,"wires":[["f984ea2f.70bc28"]]},{"id":"bd77471e.484d88","type":"mqtt in","z":"d1374567.e2bae8","name":"","topic":"%DB13","qos":"2","datatype":"auto","broker":"439ec062.b4d0a","x":110,"y":680,"wires":[["78807320.3433dc"]]},{"id":"78807320.3433dc","type":"debug","z":"d1374567.e2bae8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":310,"y":680,"wires":[]},{"id":"221659d0.a007f6","type":"mqtt in","z":"d1374567.e2bae8","name":"","topic":"%DB12","qos":"2","datatype":"auto","broker":"439ec062.b4d0a","x":110,"y":620,"wires":[["f2a9bd50.8ccbc"]]},{"id":"f2a9bd50.8ccbc","type":"debug","z":"d1374567.e2bae8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":310,"y":620,"wires":[]},{"id":"15c4718b.e2366e","type":"mqtt in","z":"d1374567.e2bae8","name":"","topic":"%DB11","qos":"2","datatype":"auto","broker":"439ec062.b4d0a","x":110,"y":560,"wires":[["b54daca4.8ad9e"]]},{"id":"b54daca4.8ad9e","type":"debug","z":"d1374567.e2bae8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":310,"y":560,"wires":[]},{"id":"70be47a0.fed778","type":"inject","z":"d1374567.e2bae8","name":"개별읽기 example","topic":"12","payload":"{\"ip\":\"192.168.33.2\",\"port\":2004,\"button\":1,\"adress\":\"%MW100\"}","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":280,"wires":[["649ec67c.3740b8"]]},{"id":"e298a04e.f3bab","type":"function","z":"d1374567.e2bae8","name":"Json to ascii cord (개별)","func":"msg.host = msg.payload.ip\nmsg.port = msg.payload.port\nmsg.topic = msg.payload.adress\nfunction u2h(uni){\n  var resultlist = [] ;\n  for (i = 0; i<uni.length; i++) { //uni 길이만큼 반복\n    hex = uni.charCodeAt(i).toString(16) ; //uni에서 i번째 문자를 16진법으로 변환하여 hex에 지정\n    resultlist.push((\"0x\"+hex)) ;//hex값을 resultlist에 저장\n  }\n  return resultlist ;\n}\nvar protocol1 = [0x4C, 0x53, 0x49, 0x53, 0x2D, 0x58, 0x47, 0x54, 0x00, 0x00, 0x00, 0x00, 0xA0, 0x33, 0x02, 0x00]\nvar protocol2 = [0x00, 0x03, 0x00, 0x54, 0x00, 0x02, 0x00, 0x00, 0x00, 0x01, 0x00]\nvar protocol3 = [0x00]\nvar protocol = protocol1.concat(\"0x\"+(msg.payload.adress.length+10).toString(16))\n.concat(protocol2).concat(\"0x\"+(msg.payload.adress.length).toString(16)).concat(protocol3).concat(u2h(msg.payload.adress))\n//, 0x25, 0x44, 0x57, 0x30, 0x30, 0x30, 0x30, 0x31\n// msg.payload는 DW0001과 같은 문자\n\nvar protocol_ascii = ''\nfor (i=0; i<protocol.length;i++) {\n  protocol_ascii += String.fromCharCode(protocol[i])\n}\nmsg.payload = Buffer.from(protocol_ascii,\"ascii\")\n\nreturn msg ;","outputs":1,"noerr":0,"x":450,"y":280,"wires":[["f951a8d6.f4ba78"]]},{"id":"f951a8d6.f4ba78","type":"tcp request","z":"d1374567.e2bae8","server":"","port":"","out":"time","splitc":"0","name":"","x":630,"y":280,"wires":[["b4580f5f.6dbc2"]]},{"id":"b4580f5f.6dbc2","type":"function","z":"d1374567.e2bae8","name":"Get data from plc","func":"if (msg.payload.length == 34) {\n    msg.payload = msg.payload[32] + msg.payload[33]*256\n} else {\n  msg.payload = msg.payload[32]\n}\nreturn msg;","outputs":1,"noerr":0,"x":810,"y":280,"wires":[["2c9284c4.09793c"]]},{"id":"2c9284c4.09793c","type":"debug","z":"d1374567.e2bae8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1010,"y":280,"wires":[]},{"id":"98c8e400.6b7ef8","type":"comment","z":"d1374567.e2bae8","name":"mqtt","info":"","x":90,"y":60,"wires":[]},{"id":"9b4b325e.86c5f","type":"mqtt in","z":"d1374567.e2bae8","name":"","topic":"%DB14","qos":"2","datatype":"auto","broker":"439ec062.b4d0a","x":110,"y":740,"wires":[["6b32b4d1.f7941c"]]},{"id":"6b32b4d1.f7941c","type":"debug","z":"d1374567.e2bae8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":310,"y":740,"wires":[]},{"id":"3892e992.9d9b86","type":"mqtt in","z":"d1374567.e2bae8","name":"","topic":"%DB15","qos":"2","datatype":"auto","broker":"439ec062.b4d0a","x":110,"y":800,"wires":[["78c7fa57.565594"]]},{"id":"78c7fa57.565594","type":"debug","z":"d1374567.e2bae8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":310,"y":800,"wires":[]},{"id":"92a7e9a6.530cb8","type":"mqtt in","z":"d1374567.e2bae8","name":"","topic":"%DB16","qos":"2","datatype":"auto","broker":"439ec062.b4d0a","x":110,"y":860,"wires":[["bafaf6a1.7a2588"]]},{"id":"bafaf6a1.7a2588","type":"debug","z":"d1374567.e2bae8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":310,"y":860,"wires":[]},{"id":"55261efb.a105d","type":"inject","z":"d1374567.e2bae8","name":"개별쓰기 example","topic":"12","payload":"{\"ip\":\"192.168.33.2\",\"port\":2004,\"change\":1,\"adress\":\"%DW00000\"}","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":130,"y":340,"wires":[["14f6b1f7.3f65ee"]]},{"id":"14f6b1f7.3f65ee","type":"function","z":"d1374567.e2bae8","name":"Json to ascii cord (개별쓰기)","func":"msg.host = msg.payload.ip\nmsg.port = msg.payload.port\nmsg.topic = msg.payload.adress\nfunction u2h(uni){\n  var resultlist = [] ;\n  for (i = 0; i<uni.length; i++) { //uni 길이만큼 반복\n    hex = uni.charCodeAt(i).toString(16) ; //uni에서 i번째 문자를 16진법으로 변환하여 hex에 지정\n    resultlist.push((\"0x\"+hex)) ;//hex값을 resultlist에 저장\n  }\n  return resultlist ;\n}\n\nvar first = msg.payload.change.toString(16)\nvar second = first.slice(0,1)\nvar protocol1 = [0x4C, 0x53, 0x49, 0x53, 0x2D, 0x58, 0x47, 0x54, 0x00, 0x00, 0x00, 0x00, 0xA0, 0x33, 0x02, 0x00]\nvar protocol2 = [0x00, 0x03, 0x00, 0x58, 0x00, 0x02, 0x00, 0x00, 0x00, 0x01, 0x00]\nvar protocol3 = [0x00]\nvar protocol4 = [0x02]\nif (msg.payload.change> 255){\nvar protocol = protocol1.concat(\"0x\"+(msg.payload.adress.length+14).toString(16)).concat(protocol2).concat(\"0x\"+(msg.payload.adress.length).toString(16))\n.concat(protocol3).concat(u2h(msg.payload.adress)).concat(protocol4).concat(protocol3).concat(\"0x\"+(msg.payload.change).toString(16)).concat(\"0x\"+second)\n//, 0x25, 0x44, 0x57, 0x30, 0x30, 0x30, 0x30, 0x31\n// msg.payload는 DW0001과 같은 문자\nvar protocol_ascii = ''\nfor (i=0; i<protocol.length;i++) {\n  protocol_ascii += String.fromCharCode(protocol[i])\n}\nmsg.payload = Buffer.from(protocol_ascii,\"ascii\")\n}\nelse  {\n    var protocol5 = protocol1.concat(\"0x\"+(msg.payload.adress.length+14).toString(16)).concat(protocol2).concat(\"0x\"+(msg.payload.adress.length).toString(16))\n.concat(protocol3).concat(u2h(msg.payload.adress)).concat(protocol4).concat(protocol3).concat(\"0x\"+(msg.payload.change).toString(16)).concat(protocol3)\n//, 0x25, 0x44, 0x57, 0x30, 0x30, 0x30, 0x30, 0x31\n// msg.payload는 DW0001과 같은 문자\nvar protocol_ascii1 = ''\nfor (i=0; i<protocol5.length;i++) {\n  protocol_ascii1 += String.fromCharCode(protocol5[i])\n}\nmsg.payload = Buffer.from(protocol_ascii1,\"ascii\")\n}\n\nreturn msg ;","outputs":1,"noerr":0,"x":400,"y":340,"wires":[["9291a58f.693788"]]},{"id":"411ada02.5390e4","type":"debug","z":"d1374567.e2bae8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":830,"y":340,"wires":[]},{"id":"9291a58f.693788","type":"tcp request","z":"d1374567.e2bae8","server":"","port":"","out":"time","splitc":"0","name":"","x":630,"y":340,"wires":[["411ada02.5390e4"]]},{"id":"3a24b8be.192088","type":"http in","z":"d1374567.e2bae8","name":"","url":"/plc","method":"post","upload":false,"swaggerDoc":"","x":580,"y":480,"wires":[["64f7c9bb.a313f8"]]},{"id":"50c5b46.7fe644c","type":"http response","z":"d1374567.e2bae8","name":"","statusCode":"","headers":{},"x":1150,"y":480,"wires":[]},{"id":"fa2cf78a.0deac8","type":"function","z":"d1374567.e2bae8","name":"set protocol single","func":"if (msg.topic == 'single') {\n    flow.set('single_protocol', msg.payload.initial)\n    return msg;\n}","outputs":1,"noerr":0,"x":970,"y":480,"wires":[["50c5b46.7fe644c"]]},{"id":"435f6779.bc08c8","type":"function","z":"d1374567.e2bae8","name":"set protocol multi","func":"if (msg.topic == 'multi') {\n    var multi_protocol = {}\n    multi_protocol[\"initial\"] = msg.payload.initial\n    multi_protocol[\"amount\"] = msg.payload.amount\n    flow.set('multi_protocol', multi_protocol)\n    return msg;\n}","outputs":1,"noerr":0,"x":970,"y":520,"wires":[[]]},{"id":"64f7c9bb.a313f8","type":"function","z":"d1374567.e2bae8","name":"authorize & classify","func":"if (msg.payload.name !== 'CTFadmin') { \n    msg.topic = 'authorize error' ;\n} else if (msg.payload.button === 1) {\n    msg.topic = 'single'\n} else if (msg.payload.button === 0) {\n    msg.topic = 'multi'\n}\nreturn msg;","outputs":1,"noerr":0,"x":750,"y":480,"wires":[["fa2cf78a.0deac8","435f6779.bc08c8","157f3666.99979a"]]},{"id":"157f3666.99979a","type":"function","z":"d1374567.e2bae8","name":"authorize error","func":"if (msg.topic == 'authorize error') {\n    msg.payload = 'authorize error'\n    return msg;\n}","outputs":1,"noerr":0,"x":960,"y":560,"wires":[["50c5b46.7fe644c"]]},{"id":"2e8ea8be.de5098","type":"comment","z":"d1374567.e2bae8","name":"api","info":"{\n  \"name\" : \"CTFadmin\",\n  \"type\" : \"single\",\n  \"initial\" : \"%MW0001\",\n  \"amount\" : 5\n}\n\ntype : \"single\" or \"multi\"\ninitial : initial zone to read\namount : length to read","x":570,"y":440,"wires":[]},{"id":"c8523d7a.2eca2","type":"mqtt in","z":"c9b7812d.41b5b","name":"","topic":"/fp/id1/zone1","qos":"2","datatype":"auto","broker":"5434b555.7a8f4c","x":270,"y":380,"wires":[["932487b9.68bdf8"]]},{"id":"d5444c5f.7c85c","type":"mqtt in","z":"c9b7812d.41b5b","name":"","topic":"/fp/id1/zone2","qos":"2","datatype":"auto","broker":"5434b555.7a8f4c","x":270,"y":420,"wires":[["b922dbec.a6ae98"]]},{"id":"46bcc262.d6aa7c","type":"mqtt in","z":"c9b7812d.41b5b","name":"","topic":"/fp/id2/zone3","qos":"2","datatype":"auto","broker":"5434b555.7a8f4c","x":270,"y":460,"wires":[["36618d67.360db2"]]},{"id":"19c13d15.5a3443","type":"mqtt in","z":"c9b7812d.41b5b","name":"","topic":"/fp/id2/zone4","qos":"2","datatype":"auto","broker":"5434b555.7a8f4c","x":270,"y":500,"wires":[["69fc9cc8.6671b4"]]},{"id":"877c0db0.7c3ee","type":"mqtt in","z":"c9b7812d.41b5b","name":"","topic":"/fp/id3/zone5","qos":"2","datatype":"auto","broker":"5434b555.7a8f4c","x":270,"y":540,"wires":[["468cb032.dc8fd"]]},{"id":"17226f14.26ff21","type":"mqtt in","z":"c9b7812d.41b5b","name":"","topic":"/fp/id3/zone6","qos":"2","datatype":"auto","broker":"5434b555.7a8f4c","x":270,"y":580,"wires":[["bd03c325.2aed3"]]},{"id":"c2f888a5.8a4bc8","type":"mqtt in","z":"c9b7812d.41b5b","name":"","topic":"/fp/id4/zone7","qos":"2","datatype":"auto","broker":"5434b555.7a8f4c","x":270,"y":620,"wires":[["69463f26.291d7"]]},{"id":"e9743479.73fde8","type":"mqtt in","z":"c9b7812d.41b5b","name":"","topic":"/fp/id4/zone8","qos":"2","datatype":"auto","broker":"5434b555.7a8f4c","x":270,"y":660,"wires":[["d6969605.cf69d8"]]},{"id":"601d3c97.c30e24","type":"mqtt in","z":"c9b7812d.41b5b","name":"","topic":"/fp/id5/zone9","qos":"2","datatype":"auto","broker":"5434b555.7a8f4c","x":270,"y":700,"wires":[["efc4eaa0.3873c8"]]},{"id":"a098bf52.22878","type":"mqtt in","z":"c9b7812d.41b5b","name":"","topic":"/fp/id5/zone10","qos":"2","datatype":"auto","broker":"5434b555.7a8f4c","x":270,"y":740,"wires":[["51d1acd1.b5c814"]]},{"id":"3d4fa1ec.298aae","type":"mqtt in","z":"c9b7812d.41b5b","name":"","topic":"/fp/id6/zone11","qos":"2","datatype":"auto","broker":"5434b555.7a8f4c","x":270,"y":780,"wires":[["63c467bc.3f3938"]]},{"id":"932487b9.68bdf8","type":"debug","z":"c9b7812d.41b5b","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","x":430,"y":380,"wires":[]},{"id":"b922dbec.a6ae98","type":"debug","z":"c9b7812d.41b5b","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","x":430,"y":420,"wires":[]},{"id":"36618d67.360db2","type":"debug","z":"c9b7812d.41b5b","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","x":430,"y":460,"wires":[]},{"id":"69fc9cc8.6671b4","type":"debug","z":"c9b7812d.41b5b","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","x":430,"y":500,"wires":[]},{"id":"468cb032.dc8fd","type":"debug","z":"c9b7812d.41b5b","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","x":430,"y":540,"wires":[]},{"id":"bd03c325.2aed3","type":"debug","z":"c9b7812d.41b5b","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","x":430,"y":580,"wires":[]},{"id":"69463f26.291d7","type":"debug","z":"c9b7812d.41b5b","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","x":430,"y":620,"wires":[]},{"id":"d6969605.cf69d8","type":"debug","z":"c9b7812d.41b5b","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","x":430,"y":660,"wires":[]},{"id":"efc4eaa0.3873c8","type":"debug","z":"c9b7812d.41b5b","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","x":430,"y":700,"wires":[]},{"id":"51d1acd1.b5c814","type":"debug","z":"c9b7812d.41b5b","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","x":430,"y":740,"wires":[]},{"id":"63c467bc.3f3938","type":"debug","z":"c9b7812d.41b5b","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","x":430,"y":780,"wires":[]},{"id":"6d0f788f.a8e3b8","type":"mosca in","z":"c9b7812d.41b5b","mqtt_port":1883,"mqtt_ws_port":8080,"name":"","username":"","password":"","dburl":"","x":240,"y":300,"wires":[[]]},{"id":"65778021.8073d","type":"function","z":"c9b7812d.41b5b","name":"data organization","func":"//data organization\n\nvar id = msg.payload[1]\nvar data1 = {}\nvar data2 = {}\nvar topic1 = \"/fp/id\"+String(id)+\"/zone\"+String(id*2-1)\nvar topic2 = \"/fp/id\"+String(id)+\"/zone\"+String(id*2)\n\n//토픽은 /fp/id1/zone1/\n\nif(id !== 6) {\n  data1[\"nowtemp\"] = (msg.payload[5]*256+msg.payload[6])/10\n  data1[\"settemp\"] = (msg.payload[7]*256+msg.payload[8])/10\n  data1[\"upper\"] = (msg.payload[9]*256+msg.payload[10])/10\n  data1[\"lower\"] = (msg.payload[11]*256+msg.payload[12])/10\n  \n  data2[\"nowtemp\"] = (msg.payload[16]*256+msg.payload[17])/10\n  data2[\"settemp\"] = (msg.payload[18]*256+msg.payload[19])/10\n  data2[\"upper\"] = (msg.payload[20]*256+msg.payload[21])/10\n  data2[\"lower\"] = (msg.payload[22]*256+msg.payload[23])/10\n} else {\n  data1[\"planqty\"] = msg.payload[3]*256+msg.payload[4]\n  data1[\"prodqty\"] = msg.payload[6]*256+msg.payload[7]\n  data1[\"goodqty\"] = msg.payload[10]*256+msg.payload[11]\n  data1[\"cavity\"] = msg.payload[5]\n}\n\nvar data = {}\ndata[\"id\"] = id\ndata[String(topic1)] = data1\ndata[String(topic2)] = data2\nmsg.payload = data\nreturn msg","outputs":1,"noerr":0,"x":670,"y":140,"wires":[["b7a8290d.74c228"]]},{"id":"b2b0298b.35b838","type":"inject","z":"c9b7812d.41b5b","name":"","topic":"","payload":"[2,1,49,1,1,1,4,1,1,0,60,0,60,0,0,1,1,4,1,1,0,76,0,60,1,1,0,3]","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":270,"y":60,"wires":[["12caa5c2.44c58a"]]},{"id":"158fc82f.90d628","type":"inject","z":"c9b7812d.41b5b","name":"","topic":"","payload":"[2,2,49,1,1,1,11,1,1,0,30,0,30,2,1,1,1,11,1,1,0,30,0,30,1,1,0,3]","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":270,"y":100,"wires":[["cd4f75f.feb1a88"]]},{"id":"8069e13a.11b57","type":"inject","z":"c9b7812d.41b5b","name":"","topic":"","payload":"[2,3,49,1,1,1,19,1,1,0,30,0,30,0,0,1,1,19,1,1,0,30,0,30,0,0,0,3]","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":270,"y":140,"wires":[["4e562ca1.428c34"]]},{"id":"4fd813b5.2d08cc","type":"inject","z":"c9b7812d.41b5b","name":"","topic":"","payload":"[2,4,49,1,1,1,16,1,1,0,30,0,30,0,0,1,1,16,1,1,0,30,0,30,0,0,0,3]","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":270,"y":180,"wires":[["4251a602.6467a8"]]},{"id":"63bb7958.b21cb8","type":"inject","z":"c9b7812d.41b5b","name":"","topic":"","payload":"[2,5,49,1,1,1,24,1,1,0,50,0,50,0,0,1,1,24,1,1,0,50,0,50,2,1,0,3]","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":270,"y":220,"wires":[["b6a3b975.91c7c8"]]},{"id":"4b1c3ecf.b367d","type":"inject","z":"c9b7812d.41b5b","name":"","topic":"","payload":"[2,6,65,7,208,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,146,3]","payloadType":"str","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":270,"y":260,"wires":[["48f5b378.c6b6fc"]]},{"id":"12caa5c2.44c58a","type":"function","z":"c9b7812d.41b5b","name":"","func":"msg.payload = [2,1,49,1,1,1,4,1,1,0,60,0,60,0,0,1,1,4,1,1,0,76,0,60,1,1,0,3]\nreturn msg;","outputs":1,"noerr":0,"x":390,"y":60,"wires":[["65778021.8073d"]]},{"id":"cd4f75f.feb1a88","type":"function","z":"c9b7812d.41b5b","name":"","func":"msg.payload = [2,2,49,1,1,1,11,1,1,0,30,0,30,2,1,1,1,11,1,1,0,30,0,30,1,1,0,3]\nreturn msg;","outputs":1,"noerr":0,"x":390,"y":100,"wires":[["65778021.8073d"]]},{"id":"4e562ca1.428c34","type":"function","z":"c9b7812d.41b5b","name":"","func":"msg.payload = [2,3,49,1,1,1,19,1,1,0,30,0,30,0,0,1,1,19,1,1,0,30,0,30,0,0,0,3]\nreturn msg;","outputs":1,"noerr":0,"x":390,"y":140,"wires":[["65778021.8073d"]]},{"id":"4251a602.6467a8","type":"function","z":"c9b7812d.41b5b","name":"","func":"msg.payload = [2,4,49,1,1,1,16,1,1,0,30,0,30,0,0,1,1,16,1,1,0,30,0,30,0,0,0,3]\nreturn msg;","outputs":1,"noerr":0,"x":390,"y":180,"wires":[["65778021.8073d"]]},{"id":"b6a3b975.91c7c8","type":"function","z":"c9b7812d.41b5b","name":"","func":"msg.payload = [2,5,49,1,1,1,24,1,1,0,50,0,50,0,0,1,1,24,1,1,0,50,0,50,2,1,0,3]\nreturn msg;","outputs":1,"noerr":0,"x":390,"y":220,"wires":[["65778021.8073d"]]},{"id":"48f5b378.c6b6fc","type":"function","z":"c9b7812d.41b5b","name":"","func":"msg.payload = [2,6,65,7,208,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,146,3]\nreturn msg;","outputs":1,"noerr":0,"x":390,"y":260,"wires":[["65778021.8073d"]]},{"id":"b7a8290d.74c228","type":"switch","z":"c9b7812d.41b5b","name":"","property":"payload.id","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"str"},{"t":"eq","v":"2","vt":"str"},{"t":"eq","v":"3","vt":"str"},{"t":"eq","v":"4","vt":"str"},{"t":"eq","v":"5","vt":"str"},{"t":"eq","v":"6","vt":"str"}],"checkall":"true","repair":false,"outputs":6,"x":850,"y":140,"wires":[["afa976ce.efe398","15024b59.7b1235"],["cf3c5ce6.9fa01","21b871f7.ea5e4e"],["15b1a7f7.5649a8","328c4e0d.d877c2"],["4ff5648.8058f9c","bcbbdb15.d4f4e8"],["686f89a0.ee4268","d873f819.770db8"],["c2e42ee6.2d2a9"]]},{"id":"6addacb6.71a8e4","type":"mqtt out","z":"c9b7812d.41b5b","name":"","topic":"/fp/id1/zone1","qos":"","retain":"","broker":"5434b555.7a8f4c","x":1210,"y":40,"wires":[]},{"id":"f0ec1ce6.ba80d","type":"mqtt out","z":"c9b7812d.41b5b","name":"","topic":"/fp/id1/zone2","qos":"","retain":"","broker":"5434b555.7a8f4c","x":1210,"y":80,"wires":[]},{"id":"ec1b692.ed75298","type":"mqtt out","z":"c9b7812d.41b5b","name":"","topic":"/fp/id2/zone3","qos":"","retain":"","broker":"5434b555.7a8f4c","x":1210,"y":120,"wires":[]},{"id":"e327163a.325f98","type":"mqtt out","z":"c9b7812d.41b5b","name":"","topic":"/fp/id2/zone4","qos":"","retain":"","broker":"5434b555.7a8f4c","x":1210,"y":160,"wires":[]},{"id":"a00c749c.353978","type":"mqtt out","z":"c9b7812d.41b5b","name":"","topic":"/fp/id3/zone5","qos":"","retain":"","broker":"5434b555.7a8f4c","x":1210,"y":200,"wires":[]},{"id":"d92e2b34.31a228","type":"mqtt out","z":"c9b7812d.41b5b","name":"","topic":"/fp/id3/zone6","qos":"","retain":"","broker":"5434b555.7a8f4c","x":1210,"y":240,"wires":[]},{"id":"448766f4.f991b8","type":"mqtt out","z":"c9b7812d.41b5b","name":"","topic":"/fp/id4/zone7","qos":"","retain":"","broker":"5434b555.7a8f4c","x":1210,"y":280,"wires":[]},{"id":"aeefffb0.b0cbc","type":"mqtt out","z":"c9b7812d.41b5b","name":"","topic":"/fp/id4/zone8","qos":"","retain":"","broker":"5434b555.7a8f4c","x":1210,"y":320,"wires":[]},{"id":"f3f05433.3d8078","type":"mqtt out","z":"c9b7812d.41b5b","name":"","topic":"/fp/id5/zone9","qos":"","retain":"","broker":"5434b555.7a8f4c","x":1210,"y":360,"wires":[]},{"id":"49622629.b1e408","type":"mqtt out","z":"c9b7812d.41b5b","name":"","topic":"/fp/id5/zone10","qos":"","retain":"","broker":"5434b555.7a8f4c","x":1220,"y":400,"wires":[]},{"id":"8a5b5828.3348f8","type":"mqtt out","z":"c9b7812d.41b5b","name":"","topic":"/fp/id6/zone11","qos":"","retain":"","broker":"5434b555.7a8f4c","x":1220,"y":440,"wires":[]},{"id":"afa976ce.efe398","type":"function","z":"c9b7812d.41b5b","name":"zone1","func":"msg.topic = Object.keys(msg.payload)[1]\nmsg.payload = Object.values(msg.payload)[1]\nreturn msg;","outputs":1,"noerr":0,"x":1050,"y":40,"wires":[["6addacb6.71a8e4"]]},{"id":"15024b59.7b1235","type":"function","z":"c9b7812d.41b5b","name":"zone2","func":"msg.topic = Object.keys(msg.payload)[2]\nmsg.payload = Object.values(msg.payload)[2]\nreturn msg;","outputs":1,"noerr":0,"x":1050,"y":80,"wires":[["f0ec1ce6.ba80d"]]},{"id":"cf3c5ce6.9fa01","type":"function","z":"c9b7812d.41b5b","name":"zone3","func":"msg.topic = Object.keys(msg.payload)[1]\nmsg.payload = Object.values(msg.payload)[1]\nreturn msg;","outputs":1,"noerr":0,"x":1050,"y":120,"wires":[["ec1b692.ed75298"]]},{"id":"21b871f7.ea5e4e","type":"function","z":"c9b7812d.41b5b","name":"zone4","func":"msg.topic = Object.keys(msg.payload)[2]\nmsg.payload = Object.values(msg.payload)[2]\nreturn msg;","outputs":1,"noerr":0,"x":1050,"y":160,"wires":[["e327163a.325f98"]]},{"id":"15b1a7f7.5649a8","type":"function","z":"c9b7812d.41b5b","name":"zone5","func":"msg.topic = Object.keys(msg.payload)[1]\nmsg.payload = Object.values(msg.payload)[1]\nreturn msg;","outputs":1,"noerr":0,"x":1050,"y":200,"wires":[["a00c749c.353978"]]},{"id":"328c4e0d.d877c2","type":"function","z":"c9b7812d.41b5b","name":"zone6","func":"msg.topic = Object.keys(msg.payload)[2]\nmsg.payload = Object.values(msg.payload)[2]\nreturn msg;","outputs":1,"noerr":0,"x":1050,"y":240,"wires":[["d92e2b34.31a228"]]},{"id":"4ff5648.8058f9c","type":"function","z":"c9b7812d.41b5b","name":"zone7","func":"msg.topic = Object.keys(msg.payload)[1]\nmsg.payload = Object.values(msg.payload)[1]\nreturn msg;","outputs":1,"noerr":0,"x":1050,"y":280,"wires":[["448766f4.f991b8"]]},{"id":"bcbbdb15.d4f4e8","type":"function","z":"c9b7812d.41b5b","name":"zone8","func":"msg.topic = Object.keys(msg.payload)[2]\nmsg.payload = Object.values(msg.payload)[2]\nreturn msg;","outputs":1,"noerr":0,"x":1050,"y":320,"wires":[["aeefffb0.b0cbc"]]},{"id":"686f89a0.ee4268","type":"function","z":"c9b7812d.41b5b","name":"zone9","func":"msg.topic = Object.keys(msg.payload)[1]\nmsg.payload = Object.values(msg.payload)[1]\nreturn msg;","outputs":1,"noerr":0,"x":1050,"y":360,"wires":[["f3f05433.3d8078"]]},{"id":"d873f819.770db8","type":"function","z":"c9b7812d.41b5b","name":"zone10","func":"msg.topic = Object.keys(msg.payload)[2]\nmsg.payload = Object.values(msg.payload)[2]\nreturn msg;","outputs":1,"noerr":0,"x":1060,"y":400,"wires":[["49622629.b1e408"]]},{"id":"c2e42ee6.2d2a9","type":"function","z":"c9b7812d.41b5b","name":"zone11","func":"msg.topic = Object.keys(msg.payload)[1]\nmsg.payload = Object.values(msg.payload)[1]\nreturn msg;","outputs":1,"noerr":0,"x":1060,"y":440,"wires":[["8a5b5828.3348f8"]]}]
